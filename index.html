<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>RC Light Controller configuration tool</title>

  <style>.CodeMirror{font-family:monospace;height:300px}.CodeMirror-scroll{overflow:auto}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px;-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;border-width:0;background:0 0;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;-moz-box-sizing:content-box;box-sizing:content-box}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror div.CodeMirror-cursor{border-left:1px solid #000}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.CodeMirror.cm-fat-cursor div.CodeMirror-cursor{width:auto;border:0;background:#7e7}.CodeMirror.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-animate-fat-cursor{width:auto;border:0;-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite}@-moz-keyframes blink{0%,to{background:#7e7}50%{background:0 0}}@-webkit-keyframes blink{0%,to{background:#7e7}50%{background:0 0}}@keyframes blink{0%,to{background:#7e7}50%{background:0 0}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-ruler{border-left:1px solid #ccc;position:absolute}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-invalidchar,.cm-s-default .cm-error{color:red}div.CodeMirror span.CodeMirror-matchingbracket{color:#0f0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#f22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{line-height:1;position:relative;overflow:hidden;background:#fff;color:#000}.CodeMirror-scroll,.CodeMirror-sizer{position:relative;-moz-box-sizing:content-box;box-sizing:content-box}.CodeMirror-scroll{margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none}.CodeMirror-sizer{border-right:30px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;padding-bottom:30px;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;-moz-box-sizing:content-box;box-sizing:content-box;padding-bottom:30px;margin-bottom:-32px;display:inline-block;*zoom:1;*display:inline}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;overflow:auto}.CodeMirror-wrap .CodeMirror-scroll{overflow-x:hidden}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-measure pre{position:static}.CodeMirror div.CodeMirror-cursor{position:absolute;border-right:none;width:0}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.CodeMirror-focused div.CodeMirror-cursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.cm-searching{background:#ffa;background:rgba(255,255,0,.4)}.CodeMirror span{*vertical-align:text-bottom}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:''}span.CodeMirror-selectedtext{background:0 0}</style>
  <style>.cm-s-monokai.CodeMirror{background:#272822;color:#f8f8f2}.cm-s-monokai div.CodeMirror-selected{background:#49483e!important}.cm-s-monokai .CodeMirror-gutters{background:#272822;border-right:0}.cm-s-monokai .CodeMirror-guttermarker{color:#fff}.cm-s-monokai .CodeMirror-guttermarker-subtle,.cm-s-monokai .CodeMirror-linenumber{color:#d0d0d0}.cm-s-monokai .CodeMirror-cursor{border-left:1px solid #f8f8f0!important}.cm-s-monokai span.cm-comment{color:#75715e}.cm-s-monokai span.cm-atom,.cm-s-monokai span.cm-number{color:#ae81ff}.cm-s-monokai span.cm-attribute,.cm-s-monokai span.cm-property{color:#a6e22e}.cm-s-monokai span.cm-keyword{color:#f92672}.cm-s-monokai span.cm-string{color:#e6db74}.cm-s-monokai span.cm-variable{color:#a6e22e}.cm-s-monokai span.cm-variable-2{color:#9effff}.cm-s-monokai span.cm-def{color:#fd971f}.cm-s-monokai span.cm-bracket{color:#f8f8f2}.cm-s-monokai span.cm-tag{color:#f92672}.cm-s-monokai span.cm-link{color:#ae81ff}.cm-s-monokai span.cm-error{background:#f92672;color:#f8f8f0}.cm-s-monokai .CodeMirror-activeline-background{background:#373831!important}.cm-s-monokai .CodeMirror-matchingbracket{text-decoration:underline;color:#fff!important}</style>
  <style>.CodeMirror-fullscreen{position:fixed;top:0;left:0;right:0;bottom:0;height:auto;z-index:9}</style>
  <style>.CodeMirror-dialog{position:absolute;left:0;right:0;background:#fff;z-index:15;padding:.1em .8em;overflow:hidden;color:#333}.CodeMirror-dialog-top{border-bottom:1px solid #eee;top:0}.CodeMirror-dialog-bottom{border-top:1px solid #eee;bottom:0}.CodeMirror-dialog input{border:none;outline:none;background:0 0;width:20em;color:inherit;font-family:monospace}.CodeMirror-dialog button{font-size:70%}</style>
  <style>.CodeMirror-lint-markers{width:16px}.CodeMirror-lint-tooltip{background-color:infobackground;border:1px solid #000;border-radius:4px 4px 4px 4px;color:infotext;font-family:monospace;font-size:10pt;overflow:hidden;padding:2px 5px;position:fixed;white-space:pre-wrap;z-index:100;max-width:600px;opacity:0;transition:opacity .4s;-moz-transition:opacity .4s;-webkit-transition:opacity .4s;-o-transition:opacity .4s;-ms-transition:opacity .4s}.CodeMirror-lint-mark-error,.CodeMirror-lint-mark-warning{background-position:left bottom;background-repeat:repeat-x}.CodeMirror-lint-mark-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==)}.CodeMirror-lint-mark-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=)}.CodeMirror-lint-marker-error,.CodeMirror-lint-marker-warning{background-position:center center;background-repeat:no-repeat;cursor:pointer;display:inline-block;height:16px;width:16px;vertical-align:middle;position:relative}.CodeMirror-lint-message-error,.CodeMirror-lint-message-warning{padding-left:18px;background-position:top left;background-repeat:no-repeat}.CodeMirror-lint-marker-error,.CodeMirror-lint-message-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=)}.CodeMirror-lint-marker-warning,.CodeMirror-lint-message-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=)}.CodeMirror-lint-marker-multiple{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-position:right bottom;width:100%;height:100%}</style>

  <style>*{padding:0;margin:0}body{color:#000;font-size:100%;font-family:sans-serif}h1,h2,h3{font-size:1.6em;color:#000}h2,h3{font-size:1.4em}h3{font-size:1.2em;padding-top:1em}button,input,select{font-size:1em}ul{margin-left:20px}.redborder{border:1px solid red}.box{margin:10px}.box,.widebox{border-radius:10px;padding:10px}.box,.widebox{clear:both}.widebox{margin:10px 10px 0}.heading{background-color:#f90;position:relative}#logo{display:inline-block;width:48px;height:48px;vertical-align:middle;border:1px solid #ffcf0d;background-image:url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAIBAQEBAQIBAQECAgICAgQDAgICAgUEBAMEBgUGBgYFBgYGBwkIBgcJBwYGCAsICQoKCgoKBggLDAsKDAkKCgr/2wBDAQICAgICAgUDAwUKBwYHCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgr/wAARCAAwADADAREAAhEBAxEB/8QAHAAAAQQDAQAAAAAAAAAAAAAABQMGBwgBBAkC/8QALRAAAAYBAwMDAwQDAAAAAAAAAQIDBAUGBwgREgATIQkiMRQyQRYXYaEjUXH/xAAcAQABBQEBAQAAAAAAAAAAAAAFAwQGBwgCAAn/xAAsEQACAQMEAQQBBQADAQAAAAABAgMEBREABhIhMRMiQVEHFCMyYXEVUpFy/9oADAMBAAIRAxEAPwCdW8MHHfh+OsWS12PnX0Vap786UYskH/d7KZv8C5kj8i7e4o7D1zVTtTTmNjnGmFNclqoFkHWdKKwmwfZ/XSS13fnTlanWi7hvn29P4az+9Oo6nQeQidt9idF6erz86IxVGhDhsdA+wh4/30YjkEg0QRww1APqs+qbcNAFlgcX4uxdFy9gnIYJQspYFVDM2qP1BkgJ2UTEOqYe0p57hALuUfd5DpD8fbDpN5UklZVTsqIxTioGT7Qc8jkD+Q64nx51mj8g/kau2vVpR0kKszKG5MTge4jHEYJ8HvkMab87qm1VenRpshnmQ63B36RCTJGPq6ozdxsi0dCkZRTkbdUAITgYEwOmUXKRDuUjCkQ4BZm4fxLaL3VGphneJ2OT0GU/4PaR/wCnVYWH8sXqz0oppYlkRRgdlWH+n3A/+DVntCmqxhrXwejlMKSavSCawoykSD0HSaKm4iXgqAF5lEnE3kAEBEQEPHWfd52CXZ16NE0vNcAq2MEggeRk4wevOrz2huxdz2sVXDg2SCM57z8HA+O/GpZfQ/EBHtjt/wA6AwVn96mkVToHJRYgA7E/ro9S1RJ0UhnzpuS0aIAO5P66klJU6M082dRd6xunbFeaNOMFE2mEQG0y97hK5TJQU91Gy798kmsO4eRKVsVwpt+O3v8AG/Ue/GG6LrZrxOYX/YWKWWVesERoSuM+CXKrkYznH1rO+/LTb73TwRSj91pEjRvrmwDZx5AXJ7+s6pxjfShh27aic83ufyPN17D2GE1o4JCQmFn7tn9MgVJyVBRwJzGEy6ZwIiG4HN2yAUfADbFR+Qd0UO37RCoE1wrMMBgBSHJKZAwAApXkesAEn+q0qNsbfa/XDGY6WnPHyScqAGwSSSeQbA/wa91tpbNMOnu3ZDrOaL1G5Ypwwd2l6chZlk2ETEPJBJJOPkWiZyouHZmXNdx3Eg494pSgAcdxtXcBunc9PDUQRPRVBlgEpQF5JUjJMkbkFljEmEj4tg8ST3nB6mt429tyeSKWRayERymMMQqIzgBHUEAvwBZ+S5BIx1gl+ymWdQdpwTI65sU6gLOOQpOSsNtrOP3065Uin1OYugYnQJHGP9OQyaSiLopwJ3DnHxzEwiULFDaaPcaberKVP0iCGF5Qqh1qZF9QMZAOZDMGjIJ4gecY7NrPdZrAb5SVL/qmMsqxFmKNAjcCOBPAYUq4IGST1nPWhU8c5Vk9XzjT0vm7ME8hQ8GNZ3IUSzyxKJLTFqOkAptk1zuQBv3AXIcpQMVPx7vBeu6q/U8W0RdRDBGairaOFjBGQlOD2xUJ7uPEgkgt9dnStJQXBtzf8ctRO4gpg8qieQF5j4UMXHHkCCACF+/GhGML3qPR1zU3EMRj3IlGXYMFnt0g7nmVxakn7FwAFQNwOcyaAkFJYwCHvETF+C/dJKaO2zbYqK6SqiqVYhY2jphBxZf5fALZyo+hg+T4XsVx3Gu9qaiSOaHiC0iSVDThlbodElVxgn/t4+PNtPV4zG40/wA7g3KD6Fj7BEV+3Ssm4qP6gbM38g9LGmbNXCCa47rJt/q1jHEgCJDKI7hsbfqmPxnahuCnutErmN5I40EnBmRVMgZ1Yr/EvwAXOAQG+RpLc96Wy3OirJVDpGzNw5KGLcCqkZ8heRJx4ONc8v3wxtVrDW8g1TT1kteoWC1OrBO1V1mRu/Y2+QbHBdPk1SMJFCouxIusIpn4imQhgADj1d//AA1yqaaeknrYBPHGsSSCmZGgRxxPvPYLx5RAGXIJIPQ1X5vtjhroqyOllKFzIymYMJGByMjOOn9zdHwARgnR20ayNQtswJdlct3qg5Ba5KoT5krF1R5EsHVZfKKppIKrGAAUeIlFZJMClOocDcSm4mEOTGm2dt+lvtKKCKamalmRuUgldZUAJYAfxjY8SSSqrjJGRnD199XirttWleySrURsuE4KY2PSknyyjIHkn4Peg+K85Xa5Z1xJe8RwzeEHDdOi6vAVOWszYAtjjc6Uk0TcBsgm9coK+xE5ufcSKHETCAdPrjYaKmslypa5+ZrpZJnkVG/ZHRiYr/MxxsPcwGOLHvHekqHcc815oKijHH9JGkaozL+55DgH+IZ1PQJzyA6z1pWpanY295Lz1XMn4ElbFKZrm0EnEPVsixbd/HRseJ+2x+4xjKAmUCrCUuwlTHwHnb1TtSoo7faJKGrWNKFSQ0kMjIzyYy/wAM9pk5BOnNNuSOurbklXTNI9YwBVJEDBI/C+Sc46bHWNO/0lV8JN9YtlHFMM3rcS8rqaMVCT1yaykiuumBhXUSVS2BUvn7SAbiUm47bj053mt5G24RXv6sgclmSNo0AP8QVOSD/ZxknUj/FZtke6ZWpV9NGTChnV2YjPIqR0R9gZxjJxrojrbyvV8L5vqlttl9ZVhKRw5e4aHlZO7rVlFWTXeVlVBqWVRDmyVORsucpy+7ZE4h9o7Zg23aau82WeCCEzFaqkkZVhFQRGqVYZvRbqRQWUEHr3DPnSG85IoaqEykAFJR2eIyTEQOXwTg4/w6pPljUPS8iZIzpK6Y9XUHjG5Xe0U52GSj2x9ER8wzZQJ20nDsrGVsVRXsSIouBXORE0gVAxxBQQHe2LTt2tt1ttCXq2PV09PHVL6HppK6NJOHhmkpS5C84eSBAXFOWA9oxitJpopppjBIIyxX3ciFIC4Kh8d4ODnokdYIzrXltddRr2Ssx5GiArs+xaNGlqwHc5WFOySc5ISjouElJeOQMQoKGdnduZLsqF2MePQX4AYOYKQ7ErKi22ukk5xsxaGsiVg5FC0k1RDDK2SQIgiQclOQsrx8iOjya7EkshUMD2jEAe/AUkDwc8icd5xyx86j3IGfFHXptRteyJqOaRdrobJgFJolNyTIGXsKhJoHiiFjrYogki9QAy7o8iByCZRJLkKw8R6kdusPpfkt5qOgLwVDP6s0sEeIgYfTDUtXy5NG+FjWDicKzY4DOk3qZI7cpMgDpjChjk4bPvjx5GMlvvHZxqCrZkvEX6discqWM05DsJiAiJlos977YzFsUqy8iyQTJucTqEXSWUKYxuO+we8OMso7TfDVS1oj9OV0nkQhcNzfKrFIxOBxUq0akAZ/8Ak51Be94fj+O001kNUKilgmoKaZWkDxejCFkkqaaJEBYu4kinkDOxTwMOvGZ/T5r9Dy/qyj2GRclyEhOQjpxL1dSu2QjyHBEDmTBAqJPDI3aEoFL8mIBgMACHlpezJbdus1JTcFcKknOMpKTjJJY9ye7OT4BxgnUejkq73vpYrncxUhXeSAQTiWnRASqqsanjB7MBUwCVB5AEd9srBVaVkWDGtX2sMZePMcDmZv25VUxMHwOw/nrGyy1lBP61M5RvsHB0QraKGpQpKoYfR0kwwTgJpVFaShiCukiV1AUWYBFp9s5/wYQ28j/PTOW6316sVJqH5joHkc6DNZ6IIYxEOP1jWXmHcKhVE6MTF0EEOiuCyUaEcn2SqB8H47bb/wA9KQ3C8/qzUmd/UIxy5HOPrOl4rVR+mI/THH6x1ps2bBGCZaeLaJHEtfWkEgKCbxSMTE4AUNg87fgPHUiobreoofRWdwh+ORxopFaKB5BI0Sk/eBpmymm/TyioCyOGa6U5FxWIYItPcFB+TfHz1LKS83thg1D+MeT40ZprFacg+gvnPgedAo3CuHaJOrWem42h42QW5dx2zZFIcd/nyAeN+pNFcblVxCOaVmUfBOpDbrNbKSf1oYVVj8gd6//Z)}#version{position:absolute;right:0;top:0;font-size:.8em;padding:8px}.footer{background-color:#ffeda5;color:gray;margin-bottom:1em;font-size:.8em}.footer a{color:gray;text-decoration:none;font-size:.9em;font-style:italic;padding-left:1em}.footer>div{padding-bottom:1em}.configuration{background-color:#ffcf0d}.configuration>div{margin-top:.5em}#load_and_save div,.info div{margin-top:1em}.load_save_table td{padding-right:40px}#config_basic .radio_item,.led_table{margin-bottom:1em}#config_basic label,.advanced_feature label{font-weight:700}.led_table{width:100%;border-collapse:collapse}.led_table td,.led_table th{text-align:center;vertical-align:middle;width:6.25%;height:2em;cursor:default}.led_table .even td,.led_table .even th{border-left:2px solid #e8a60c}.led_table .even td:first-child,.led_table .even th:first-child{border-left:2px solid #ffcf0d}.led_table .odd td,.led_table .odd th{border-left:2px solid #ffcf0d}.led_table th{font-size:.8em}.led_table .odd{background:#e8a60c}.led_table input{width:3.5em}.advanced_feature{padding-top:1em;padding-bottom:1em}.advanced_feature input{margin-bottom:.5em}.spanner{vertical-align:middle;width:24px;height:24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAC8UlEQVRIie2UT0iTYRzHv8/2zrWFZM6CF5kDcWAI2mTgEhk4CAYLQfAmtqmNoKsnd8joJNWly+wiCIoMPMjUNmVEh5oWqBE7hDFhL+HFcLEWz/R93z1PB6dMnTlHhw794IWH9/39Pt/fv+cF/tsFRioNtNlsRKvVanQ6HV9bW2N/TaClpaXK4/Hcd7lc3qamJmsmk8mur6+/CYfDzyORyPZpf+Ey8Pr6+qujo6Mhp9N5jzHGOeektrb2piAISiqVihFCUpzz/GWTBgDo9XrtyMjI+Pb2NksmkyyZTLKZmRnJZrO9BHAXQB1KdKTsFul0uhvxePxLdXV1LQBCCOGdnZ0P0+l0BMAuAKVUnKZcAVEUbxmNRpOqqjh6ZFn+DGDnCN7a2qrp6empK44rewaMMYOiKJxzDgCcEAK32+3c2Nj4JAhCvrm5+XZvb+8TSZIyCwsLDwAclC0giqLe7/cPKIpCCgoEAA8EAs8SiYQ7nU5/7+7u7pNlWZibmxtHUesvnIHFYqny+/0TLpdrUFXVM98JISCEgDGGnZ2dPa/X2yfL8jsA7MIKLBaLfnh4ONjV1TVEKT16fVxBUYJ8b2/vVyAQeCHLcuII/keBhoYGvc/nCzocjsEi+LHI1tbWrsFgECilB5ubm1/D4XAom82+BvDjRIWl4Gazucrn8004HI4hRVH4KT++uLi4Ojk5+QoAxeEwvwFIAcgWKjtfwGw26wcGBoIdHR2DinJ2tZeWluJTU1NjAD4W4BzAubf3RItEUdT39/cH29vbBymlBAA455wQQjjnPBqNxqenpx8D+AAgdx60pIBGo9HY7fZHbW1tQ5RSftpxeXk5Pjs7O3YZ+AkBxtgVq9XqKYIfi8RisfehUOhSmR8nXnTWSpKUVlWVFH4FRFVVrKysxCuFA4C26MwlSdpvbGy8U1NTcy2fz7NoNPp2fn7+aaVw4OwWXQfgMJlM9lwu95NSugogAWC/EngpAQDQATDicPUoim7lP2m/Af2IT1eXHKCOAAAAAElFTkSuQmCC);display:inline-block;border:1px transparent}.led_feature_active{background-color:#f70}.led_features table{width:100%}.led_features table td{width:6.25%}.led_features table td:first-child{border:0;width:12.5%;text-align:left}.CodeMirror{border:1px inset #eee;line-height:1.3;height:500px}.CodeMirror-linenumbers{padding:0 8px}.CodeMirror-placeholder{color:#75715e!important}.editor{padding-top:1em;padding-bottom:1em}.error{background-color:#e44;overflow:auto}</style>

  <script>!function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(r,n){if(!(this instanceof e))return new e(r,n);this.options=n=n?vi(n):{},vi(Oo,n,!1),d(n);var i=n.value;"string"==typeof i&&(i=new rl(i,n.mode)),this.doc=i;var o=this.display=new t(r,i);o.wrapper.CodeMirror=this,u(this),s(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!ao&&St(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new ui,keySeq:null},Zi&&Qi<11&&setTimeout(mi(Lt,this,!0),20),Tt(this),Hi(),Qe(this),this.curOp.forceUpdate=!0,An(this,i),n.autofocus&&!ao||ki()==o.input?setTimeout(mi(Zt,this),20):Qt(this);for(var l in Do)Do.hasOwnProperty(l)&&Do[l](this,n[l],Io);b(this);for(var a=0;a<Ro.length;++a)Ro[a](this);et(this)}function t(e,t){var r=this,n=r.input=xi("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Ji?n.style.width="1000px":n.setAttribute("wrap","off"),so&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),r.inputDiv=xi("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=xi("div",[xi("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=xi("div",[xi("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=xi("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=xi("div",null,"CodeMirror-gutter-filler"),r.lineDiv=xi("div",null,"CodeMirror-code"),r.selectionDiv=xi("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=xi("div",null,"CodeMirror-cursors"),r.measure=xi("div",null,"CodeMirror-measure"),r.lineMeasure=xi("div",null,"CodeMirror-measure"),r.lineSpace=xi("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=xi("div",[xi("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=xi("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=xi("div",null,null,"position: absolute; height: "+hl+"px; width: 1px;"),r.gutters=xi("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=xi("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=xi("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),Zi&&Qi<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),so&&(n.style.width="0px"),Ji||(r.scroller.draggable=!0),io&&(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"),Zi&&Qi<8&&(r.scrollbarH.style.minHeight=r.scrollbarV.style.minWidth="18px"),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.view=[],r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new ui,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null}function r(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,xe(e,100),e.state.modeGen++,e.curOp&&dt(e)}function i(e){e.options.lineWrapping?(Nl(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(Tl(e.display.wrapper,"CodeMirror-wrap"),h(e)),l(e),dt(e),Fe(e),setTimeout(function(){v(e)},100)}function o(e){var t=qe(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/Ze(e.display)-3);return function(i){if(rn(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function l(e){var t=e.doc,r=o(e);t.iter(function(e){var t=r(e);t!=e.height&&In(e,t)})}function s(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Fe(e)}function a(e){u(e),dt(e),setTimeout(function(){y(e)},20)}function u(e){var t=e.display.gutters,r=e.options.gutters;Ci(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(xi("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",c(e)}function c(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function f(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=$r(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=qr(n);){var i=t.find(0,!0);r-=n.text.length-i.from.ch,n=i.to.line,r+=n.text.length-i.to.ch}return r}function h(e){var t=e.display,r=e.doc;t.maxLine=Wn(r,r.first),t.maxLineLength=f(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=f(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function d(e){var t=di(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<hl-3}function g(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:p(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Me(e.display))}}function v(e,t){t||(t=g(e));var r=e.display,n=Wi(r.measure),i=t.docHeight+hl,o=t.scrollWidth>t.clientWidth;o&&t.scrollWidth<=t.clientWidth+1&&n>0&&!t.hScrollbarTakesSpace&&(o=!1);var l=i>t.clientHeight;if(l?(r.scrollbarV.style.display="block",r.scrollbarV.style.bottom=o?n+"px":"0",r.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||r.scrollbarV.clientHeight))+"px"):(r.scrollbarV.style.display="",r.scrollbarV.firstChild.style.height="0"),o?(r.scrollbarH.style.display="block",r.scrollbarH.style.right=l?n+"px":"0",r.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||r.scrollbarH.clientWidth)+"px"):(r.scrollbarH.style.display="",r.scrollbarH.firstChild.style.width="0"),o&&l?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=r.scrollbarFiller.style.width=n+"px"):r.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n+"px",r.gutterFiller.style.width=r.gutters.offsetWidth+"px"):r.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===n){var s=uo&&!oo?"12px":"18px";r.scrollbarV.style.minWidth=r.scrollbarH.style.minHeight=s;var a=function(t){ti(t)!=r.scrollbarV&&ti(t)!=r.scrollbarH&&at(e,Wt)(t)};al(r.scrollbarV,"mousedown",a),al(r.scrollbarH,"mousedown",a)}e.state.checkedOverlayScrollbar=!0}}function m(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-ke(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=Pn(t,n),l=Pn(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;if(s<o)return{from:s,to:Pn(t,zn(Wn(t,s))+e.wrapper.clientHeight)};if(Math.min(a,t.lastLine())>=l)return{from:Pn(t,zn(Wn(t,a))-e.wrapper.clientHeight),to:a}}return{from:o,to:Math.max(l,o+1)}}function y(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=x(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&r[l].gutter&&(r[l].gutter.style.left=o);var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function b(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=w(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(xi("div",[xi("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",c(e),!0}return!1}function w(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function x(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function C(e,t,r){var n=e.display;this.viewport=t,this.visible=m(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=r,this.dims=A(e)}function L(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return gt(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&0==bt(e))return!1;b(e)&&(gt(e),t.dims=A(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),l=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(i,r.viewTo)),vo&&(o=en(e.doc,o),l=tn(e.doc,l));var s=o!=r.viewFrom||l!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;yt(e,o,l),r.viewOffset=zn(Wn(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var a=bt(e);if(!s&&0==a&&!t.force&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var u=ki();return a>4&&(r.lineDiv.style.display="none"),W(e,r.updateLineNumbers,t.dims),a>4&&(r.lineDiv.style.display=""),u&&ki()!=u&&u.offsetHeight&&u.focus(),Ci(r.cursorDiv),Ci(r.selectionDiv),s&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,xe(e,400)),r.updateLineNumbers=null,!0}function S(e,t){for(var r=t.force,n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)r=!0;else if(r=!1,n&&null!=n.top&&(n={top:Math.min(e.doc.height+Me(e.display)-hl-e.display.scroller.clientHeight,n.top)}),t.visible=m(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!L(e,t))break;N(e);var o=g(e);me(e),M(e,o),v(e,o)}ni(e,"update",e),e.display.viewFrom==t.oldViewFrom&&e.display.viewTo==t.oldViewTo||ni(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function k(e,t){var r=new C(e,t);if(L(e,r)){N(e),S(e,r);var n=g(e);me(e),M(e,n),v(e,n)}}function M(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-hl)+"px"}function T(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function N(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i,o=t.view[n];if(!o.hidden){if(Zi&&Qi<8){var l=o.node.offsetTop+o.node.offsetHeight;i=l-r,r=l}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var a=o.line.height-i;if(i<2&&(i=qe(t)),(a>.001||a<-.001)&&(In(o.line,i),H(o.line),o.rest))for(var u=0;u<o.rest.length;u++)H(o.rest[u])}}}function H(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function A(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l)r[e.options.gutters[l]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[l]]=o.clientWidth;return{fixedPos:x(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function W(e,t,r){function n(t){var r=t.nextSibling;return Ji&&uo&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var i=e.display,o=e.options.lineNumbers,l=i.lineDiv,s=l.firstChild,a=i.view,u=i.viewFrom,c=0;c<a.length;c++){var f=a[c];if(f.hidden);else if(f.node){for(;s!=f.node;)s=n(s);var h=o&&null!=t&&t<=u&&f.lineNumber;f.changes&&(di(f.changes,"gutter")>-1&&(h=!1),O(e,f,u,r)),h&&(Ci(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(w(e.options,u)))),s=f.node.nextSibling}else{var d=B(e,f,u,r);l.insertBefore(d,s)}u+=f.size}for(;s;)s=n(s)}function O(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?P(e,t):"gutter"==o?R(e,t,r,n):"class"==o?z(t):"widget"==o&&F(t,n)}t.changes=null}function D(e){return e.node==e.text&&(e.node=xi("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Zi&&Qi<8&&(e.node.style.zIndex=2)),e.node}function I(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=D(e);e.background=r.insertBefore(xi("div",null,t),r.firstChild)}}function E(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):yn(e,t)}function P(e,t){var r=t.text.className,n=E(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,z(t)):r&&(t.text.className=r)}function z(e){I(e),e.line.wrapClass?D(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function R(e,t,r,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=D(t),l=t.gutter=o.insertBefore(xi("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),t.text);if(!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(xi("div",w(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var a=e.options.gutters[s],u=i.hasOwnProperty(a)&&i[a];u&&l.appendChild(xi("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[a]+"px; width: "+n.gutterWidth[a]+"px"))}}}function F(e,t){e.alignable&&(e.alignable=null);for(var r,n=e.node.firstChild;n;n=r){var r=n.nextSibling;"CodeMirror-linewidget"==n.className&&e.node.removeChild(n)}G(e,t)}function B(e,t,r,n){var i=E(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),z(t),R(e,t,r,n),G(t,n),t.node}function G(e,t){if(V(e.line,e,t,!0),e.rest)for(var r=0;r<e.rest.length;r++)V(e.rest[r],e,t,!1)}function V(e,t,r,n){if(e.widgets)for(var i=D(t),o=0,l=e.widgets;o<l.length;++o){var s=l[o],a=xi("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(a.ignoreEvents=!0),U(s,a,t,r),n&&s.above?i.insertBefore(a,t.gutter||t.text):i.appendChild(a),ni(s,"redraw")}}function U(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function K(e){return mo(e.line,e.ch)}function X(e,t){return yo(e,t)<0?t:e}function j(e,t){return yo(e,t)<0?e:t}function _(e,t){this.ranges=e,this.primIndex=t}function Y(e,t){this.anchor=e,this.head=t}function $(e,t){var r=e[t];e.sort(function(e,t){return yo(e.from(),t.from())}),t=di(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(yo(o.to(),i.from())>=0){var l=j(o.from(),i.from()),s=X(o.to(),i.to()),a=o.empty()?i.from()==i.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new Y(a?s:l,a?l:s))}}return new _(e,t)}function q(e,t){return new _([new Y(e,t||e)],0)}function Z(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Q(e,t){if(t.line<e.first)return mo(e.first,0);var r=e.first+e.size-1;return t.line>r?mo(r,Wn(e,r).text.length):J(t,Wn(e,t.line).text.length)}function J(e,t){var r=e.ch;return null==r||r>t?mo(e.line,t):r<0?mo(e.line,0):e}function ee(e,t){return t>=e.first&&t<e.first+e.size}function te(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=Q(e,t[n]);return r}function re(e,t,r,n){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(n){var o=yo(r,i)<0;o!=yo(n,i)<0?(i=r,r=n):o!=yo(r,n)<0&&(r=n)}return new Y(i,r)}return new Y(n||r,r)}function ne(e,t,r,n){ue(e,new _([re(e,e.sel.primary(),t,r)],0),n)}function ie(e,t,r){for(var n=[],i=0;i<e.sel.ranges.length;i++)n[i]=re(e,e.sel.ranges[i],t[i],null);var o=$(n,e.sel.primIndex);ue(e,o,r)}function oe(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,ue(e,$(i,e.sel.primIndex),n)}function le(e,t,r,n){ue(e,q(t,r),n)}function se(e,t){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new Y(Q(e,t[r].anchor),Q(e,t[r].head))}};return cl(e,"beforeSelectionChange",e,r),e.cm&&cl(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?$(r.ranges,r.ranges.length-1):t}function ae(e,t,r){var n=e.history.done,i=hi(n);i&&i.ranges?(n[n.length-1]=t,ce(e,t,r)):ue(e,t,r)}function ue(e,t,r){ce(e,t,r),Xn(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function ce(e,t,r){(si(e,"beforeSelectionChange")||e.cm&&si(e.cm,"beforeSelectionChange"))&&(t=se(e,t));var n=r&&r.bias||(yo(t.primary().head,e.sel.primary().head)<0?-1:1);fe(e,de(e,t,n,!0)),r&&r.scroll===!1||!e.cm||yr(e.cm)}function fe(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,li(e.cm)),ni(e,"cursorActivity",e))}function he(e){fe(e,de(e,e.sel,null,!1),pl)}function de(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=pe(e,l.anchor,r,n),a=pe(e,l.head,r,n);(i||s!=l.anchor||a!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Y(s,a))}return i?$(i,t.primIndex):t}function pe(e,t,r,n){var i=!1,o=t,l=r||1;e.cantEdit=!1;e:for(;;){var s=Wn(e,o.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var u=s.markedSpans[a],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(n&&(cl(c,"beforeCursorEnter"),c.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(!c.atomic)continue;var f=c.find(l<0?-1:1);if(0==yo(f,o)&&(f.ch+=l,f.ch<0?f=f.line>e.first?Q(e,mo(f.line-1)):null:f.ch>s.text.length&&(f=f.line<e.first+e.size-1?mo(f.line+1,0):null),!f)){if(i)return n?(e.cantEdit=!0,mo(e.first,0)):pe(e,t,r,!0);i=!0,f=t,l=-l}o=f;continue e}}return o}}function ge(e){for(var t=e.display,r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++){var s=r.sel.ranges[l],a=s.empty();(a||e.options.showCursorWhenSelecting)&&ye(e,s,i),a||be(e,s,o)}if(e.options.moveInputWithCursor){var u=Xe(e,r.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,u.top+f.top-c.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,u.left+f.left-c.left))}return n}function ve(e,t){Li(e.display.cursorDiv,t.cursors),Li(e.display.selectionDiv,t.selection),null!=t.teTop&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function me(e){ve(e,ge(e))}function ye(e,t,r){var n=Xe(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(xi("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=r.appendChild(xi("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function be(e,t,r){function n(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),s.appendChild(xi("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?c-e:r)+"px; height: "+(n-t)+"px"))}function i(t,r,i){function o(r,n){return Ke(e,mo(t,r),"div",f,n)}var s,a,f=Wn(l,t),h=f.text.length;return Ei(Rn(f),r||0,null==i?h:i,function(e,t,l){var f,d,p,g=o(e,"left");if(e==t)f=g,d=p=g.left;else{if(f=o(t-1,"right"),"rtl"==l){var v=g;g=f,f=v}d=g.left,p=f.right}null==r&&0==e&&(d=u),f.top-g.top>3&&(n(d,g.top,null,g.bottom),d=u,g.bottom<f.top&&n(d,g.bottom,null,f.top)),null==i&&t==h&&(p=c),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!a||f.bottom>a.bottom||f.bottom==a.bottom&&f.right>a.right)&&(a=f),d<u+1&&(d=u),n(d,f.top,p-d,f.bottom)}),{start:s,end:a}}var o=e.display,l=e.doc,s=document.createDocumentFragment(),a=Te(e.display),u=a.left,c=o.lineSpace.offsetWidth-a.right,f=t.from(),h=t.to();if(f.line==h.line)i(f.line,f.ch,h.ch);else{var d=Wn(l,f.line),p=Wn(l,h.line),g=Qr(d)==Qr(p),v=i(f.line,f.ch,g?d.text.length+1:null).end,m=i(h.line,g?0:null,h.ch).start;g&&(v.top<m.top-2?(n(v.right,v.top,null,v.bottom),n(u,m.top,m.left,m.bottom)):n(v.right,v.top,m.left-v.right,v.bottom)),v.bottom<m.top&&n(u,v.bottom,null,m.top)}r.appendChild(s)}function we(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function xe(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,mi(Ce,e))}function Ce(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=Bo(t.mode,Se(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var l=o.styles,s=pn(e,o,n,!0);o.styles=s.styles;var a=o.styleClasses,u=s.classes;u?o.styleClasses=u:a&&(o.styleClasses=null);for(var c=!l||l.length!=o.styles.length||a!=u&&(!a||!u||a.bgClass!=u.bgClass||a.textClass!=u.textClass),f=0;!c&&f<l.length;++f)c=l[f]!=o.styles[f];c&&i.push(t.frontier),o.stateAfter=Bo(t.mode,n)}else vn(e,o.text,n),o.stateAfter=t.frontier%5==0?Bo(t.mode,n):null;if(++t.frontier,+new Date>r)return xe(e,e.options.workDelay),!0}),i.length&&st(e,function(){for(var t=0;t<i.length;t++)pt(e,i[t],"text")})}}function Le(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>l;--s){if(s<=o.first)return o.first;var a=Wn(o,s-1);if(a.stateAfter&&(!r||s<=o.frontier))return s;var u=ml(a.text,null,e.options.tabSize);(null==i||n>u)&&(i=s-1,n=u)}return i}function Se(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return!0;var o=Le(e,t,r),l=o>n.first&&Wn(n,o-1).stateAfter;return l=l?Bo(n.mode,l):Go(n.mode),n.iter(o,t,function(r){vn(e,r.text,l);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;r.stateAfter=s?Bo(n.mode,l):null,++o}),r&&(n.frontier=o),l}function ke(e){return e.lineSpace.offsetTop}function Me(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Te(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Li(e.measure,xi("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Ne(e,t,r){var n=e.options.lineWrapping,i=n&&e.display.scroller.clientWidth;if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];Math.abs(a.bottom-u.bottom)>2&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}function He(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(En(e.rest[n])>r)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ae(e,t){t=Qr(t);var r=En(t),n=e.display.externalMeasured=new ft(e.doc,t,r);n.lineN=r;var i=n.built=yn(e,n);return n.text=i.pre,Li(e.display.lineMeasure,i.pre),n}function We(e,t,r,n){return Ie(e,De(e,t),r,n)}function Oe(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[vt(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function De(e,t){var r=En(t),n=Oe(e,r);n&&!n.text?n=null:n&&n.changes&&O(e,n,r,A(e)),n||(n=Ae(e,t));var i=He(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ie(e,t,r,n,i){t.before&&(r=-1);var o,l=r+(n||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Ne(e,t.view,t.rect),t.hasHeights=!0),o=Ee(e,t,r,n),o.bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function Ee(e,t,r,n){for(var i,o,l,s,a=t.map,u=0;u<a.length;u+=3){var c=a[u],f=a[u+1];if(r<c?(o=0,l=1,s="left"):r<f?(o=r-c,l=o+1):(u==a.length-3||r==f&&a[u+3]>r)&&(l=f-c,o=l-1,r>=f&&(s="right")),null!=o){if(i=a[u+2],c==f&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==o)for(;u&&a[u-2]==a[u-3]&&a[u-1].insertLeft;)i=a[(u-=3)+2],s="left";if("right"==n&&o==f-c)for(;u<a.length-3&&a[u+3]==a[u+4]&&!a[u+5].insertLeft;)i=a[(u+=3)+2],s="right";break}}var h;if(3==i.nodeType){for(var u=0;u<4;u++){for(;o&&wi(t.line.text.charAt(c+o));)--o;for(;c+l<f&&wi(t.line.text.charAt(c+l));)++l;if(Zi&&Qi<9&&0==o&&l==f-c)h=i.parentNode.getBoundingClientRect();else if(Zi&&e.options.lineWrapping){var d=wl(i,o,l).getClientRects();h=d.length?d["right"==n?d.length-1:0]:Co}else h=wl(i,o,l).getBoundingClientRect()||Co;if(h.left||h.right||0==o)break;l=o,o-=1,s="right"}Zi&&Qi<11&&(h=Pe(e.display.measure,h))}else{o>0&&(s=n="right");var d;h=e.options.lineWrapping&&(d=i.getClientRects()).length>1?d["right"==n?d.length-1:0]:i.getBoundingClientRect()}if(Zi&&Qi<9&&!o&&(!h||!h.left&&!h.right)){var p=i.parentNode.getClientRects()[0];h=p?{left:p.left,right:p.left+Ze(e.display),top:p.top,bottom:p.bottom}:Co}for(var g=h.top-t.rect.top,v=h.bottom-t.rect.top,m=(g+v)/2,y=t.view.measure.heights,u=0;u<y.length-1&&!(m<y[u]);u++);var b=u?y[u-1]:0,w=y[u],x={left:("right"==s?h.right:h.left)-t.rect.left,right:("left"==s?h.left:h.right)-t.rect.left,top:b,bottom:w};return h.left||h.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=v),x}function Pe(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ii(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function ze(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Re(e){e.display.externalMeasure=null,Ci(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ze(e.display.view[t])}function Fe(e){Re(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Be(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ge(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ve(e,t,r,n){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=ln(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=zn(t);if("local"==n?l+=ke(e.display):l-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+("window"==n?0:Ge());var a=s.left+("window"==n?0:Be());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function Ue(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=Be(),i-=Ge();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function Ke(e,t,r,n,i){return n||(n=Wn(e.doc,t.line)),Ve(e,n,We(e,n,t.ch,i),r)}function Xe(e,t,r,n,i,o){function l(t,l){var s=Ie(e,i,t,l?"right":"left",o);return l?s.left=s.right:s.right=s.left,Ve(e,n,s,r)}function s(e,t){var r=a[t],n=r.level%2;return e==Pi(r)&&t&&r.level<a[t-1].level?(r=a[--t],e=zi(r)-(r.level%2?0:1),n=!0):e==zi(r)&&t<a.length-1&&r.level<a[t+1].level&&(r=a[++t],e=Pi(r)-r.level%2,n=!1),n&&e==r.to&&e>r.from?l(e-1):l(e,n)}n=n||Wn(e.doc,t.line),i||(i=De(e,n));var a=Rn(n),u=t.ch;if(!a)return l(u);var c=Ki(a,u),f=s(u,c);return null!=Pl&&(f.other=s(u,Pl)),f}function je(e,t){var r=0,t=Q(e.doc,t);e.options.lineWrapping||(r=Ze(e.display)*t.ch);var n=Wn(e.doc,t.line),i=zn(n)+ke(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function _e(e,t,r,n){var i=mo(e,t);return i.xRel=n,r&&(i.outside=!0),i}function Ye(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,r<0)return _e(n.first,0,!0,-1);var i=Pn(n,r),o=n.first+n.size-1;if(i>o)return _e(n.first+n.size-1,Wn(n,o).text.length,!0,1);t<0&&(t=0);for(var l=Wn(n,i);;){var s=$e(e,l,i,t,r),a=qr(l),u=a&&a.find(0,!0);if(!a||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=En(l=u.to.line)}}function $e(e,t,r,n,i){function o(n){var i=Xe(e,mo(r,n),"line",t,u);return s=!0,l>i.bottom?i.left-a:l<i.top?i.left+a:(s=!1,i.left)}var l=i-zn(t),s=!1,a=2*e.display.wrapper.clientWidth,u=De(e,t),c=Rn(t),f=t.text.length,h=Ri(t),d=Fi(t),p=o(h),g=s,v=o(d),m=s;if(n>v)return _e(r,d,m,1);for(;;){if(c?d==h||d==ji(t,h,1):d-h<=1){for(var y=n<p||n-p<=v-n?h:d,b=n-(y==h?p:v);wi(t.text.charAt(y));)++y;var w=_e(r,y,y==h?g:m,b<-1?-1:b>1?1:0);return w}var x=Math.ceil(f/2),C=h+x;if(c){C=h;for(var L=0;L<x;++L)C=ji(t,C,1)}var S=o(C);S>n?(d=C,v=S,(m=s)&&(v+=1e3),f=x):(h=C,p=S,g=s,f-=x)}}function qe(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==bo){bo=xi("pre");for(var t=0;t<49;++t)bo.appendChild(document.createTextNode("x")),bo.appendChild(xi("br"));bo.appendChild(document.createTextNode("x"))}Li(e.measure,bo);var r=bo.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Ci(e.measure),r||1}function Ze(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=xi("span","xxxxxxxxxx"),r=xi("pre",[t]);Li(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Qe(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++So},Lo?Lo.ops.push(e.curOp):e.curOp.ownsGroup=Lo={ops:[e.curOp],delayedCallbacks:[]}}function Je(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r]();for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)}}while(r<t.length)}function et(e){var t=e.curOp,r=t.ownsGroup;if(r)try{Je(r)}finally{Lo=null;for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;tt(r)}}function tt(e){for(var t=e.ops,r=0;r<t.length;r++)rt(t[r]);for(var r=0;r<t.length;r++)nt(t[r]);for(var r=0;r<t.length;r++)it(t[r]);for(var r=0;r<t.length;r++)ot(t[r]);for(var r=0;r<t.length;r++)lt(t[r])}function rt(e){var t=e.cm,r=t.display;
e.updateMaxLine&&h(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new C(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function nt(e){e.updatedDisplay=e.mustUpdate&&L(e.cm,e.update)}function it(e){var t=e.cm,r=t.display;e.updatedDisplay&&N(t),e.barMeasure=g(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=We(t,r.maxLine,r.maxLine.text.length).left+3,e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo+hl-r.scroller.clientWidth)),(e.updatedDisplay||e.selectionChanged)&&(e.newSelectionNodes=ge(t))}function ot(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Bt(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&ve(t,e.newSelectionNodes),e.updatedDisplay&&M(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&v(t,e.barMeasure),e.selectionChanged&&we(t),t.state.focused&&e.updateInput&&Lt(t,e.typing)}function lt(e){var t=e.cm,r=t.display,n=t.doc;if(null!=e.adjustWidthTo&&Math.abs(e.barMeasure.scrollWidth-t.display.scroller.scrollWidth)>1&&v(t),e.updatedDisplay&&S(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&(r.scroller.scrollTop!=e.scrollTop||e.forceScroll)){var i=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=i}if(null!=e.scrollLeft&&(r.scroller.scrollLeft!=e.scrollLeft||e.forceScroll)){var o=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=o,y(t)}if(e.scrollToPos){var l=pr(t,Q(n,e.scrollToPos.from),Q(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&dr(t,l)}var s=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(s)for(var u=0;u<s.length;++u)s[u].lines.length||cl(s[u],"hide");if(a)for(var u=0;u<a.length;++u)a[u].lines.length&&cl(a[u],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&Ji&&(t.options.lineWrapping&&T(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!p(t)&&v(t)),e.changeObjs&&cl(t,"changes",t,e.changeObjs)}function st(e,t){if(e.curOp)return t();Qe(e);try{return t()}finally{et(e)}}function at(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Qe(e);try{return t.apply(e,arguments)}finally{et(e)}}}function ut(e){return function(){if(this.curOp)return e.apply(this,arguments);Qe(this);try{return e.apply(this,arguments)}finally{et(this)}}}function ct(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Qe(t);try{return e.apply(this,arguments)}finally{et(t)}}}function ft(e,t,r){this.line=t,this.rest=Jr(t),this.size=this.rest?En(hi(this.rest))-r+1:1,this.node=this.text=null,this.hidden=rn(e,t)}function ht(e,t,r){for(var n,i=[],o=t;o<r;o=n){var l=new ft(e.doc,Wn(e.doc,o),o);n=o+l.size,i.push(l)}return i}function dt(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)vo&&en(e.doc,t)<i.viewTo&&gt(e);else if(r<=i.viewFrom)vo&&tn(e.doc,r+n)>i.viewFrom?gt(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)gt(e);else if(t<=i.viewFrom){var o=mt(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):gt(e)}else if(r>=i.viewTo){var o=mt(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):gt(e)}else{var l=mt(e,t,t,-1),s=mt(e,r,r+n,1);l&&s?(i.view=i.view.slice(0,l.index).concat(ht(e,l.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):gt(e)}var a=i.externalMeasured;a&&(r<a.lineN?a.lineN+=n:t<a.lineN+a.size&&(i.externalMeasured=null))}function pt(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[vt(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);di(l,r)==-1&&l.push(r)}}}function gt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function vt(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,t<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if(t-=r[n].size,t<0)return n}function mt(e,t,r,n){var i,o=vt(e,t),l=e.display.view;if(!vo||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=0,a=e.display.viewFrom;s<o;s++)a+=l[s].size;if(a!=t){if(n>0){if(o==l.length-1)return null;i=a+l[o].size-t,o++}else i=a-t;t+=i,r+=i}for(;en(e.doc,r)!=r;){if(o==(n<0?0:l.length-1))return null;r+=n*l[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function yt(e,t,r){var n=e.display,i=n.view;0==i.length||t>=n.viewTo||r<=n.viewFrom?(n.view=ht(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=ht(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(vt(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(ht(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,vt(e,r)))),n.viewTo=r}function bt(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function wt(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){Ct(e),e.state.focused&&wt(e)})}function xt(e){function t(){var n=Ct(e);n||r?(e.display.pollingFast=!1,wt(e)):(r=!0,e.display.poll.set(60,t))}var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function Ct(e){var t=e.display.input,r=e.display.prevInput,n=e.doc;if(!e.state.focused||Ol(t)&&!r||Mt(e)||e.options.disableInput||e.state.keySeq)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==r&&!e.somethingSelected())return!1;if(Zi&&Qi>=9&&e.display.inputHasSelection===i||uo&&/[\uf700-\uf7ff]/.test(i))return Lt(e),!1;var o=!e.curOp;o&&Qe(e),e.display.shift=!1,8203!=i.charCodeAt(0)||n.sel!=e.display.selForContextMenu||r||(r="​");for(var l=0,s=Math.min(r.length,i.length);l<s&&r.charCodeAt(l)==i.charCodeAt(l);)++l;var a=i.slice(l),u=Wl(a),c=null;e.state.pasteIncoming&&n.sel.ranges.length>1&&(ko&&ko.join("\n")==a?c=n.sel.ranges.length%ko.length==0&&pi(ko,Wl):u.length==n.sel.ranges.length&&(c=pi(u,function(e){return[e]})));for(var f=n.sel.ranges.length-1;f>=0;f--){var h=n.sel.ranges[f],d=h.from(),p=h.to();l<r.length?d=mo(d.line,d.ch-(r.length-l)):e.state.overwrite&&h.empty()&&!e.state.pasteIncoming&&(p=mo(p.line,Math.min(Wn(n,p.line).text.length,p.ch+hi(u).length)));var g=e.curOp.updateInput,v={from:d,to:p,text:c?c[f%c.length]:u,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(lr(e.doc,v),ni(e,"inputRead",e,v),a&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&h.head.ch<100&&(!f||n.sel.ranges[f-1].head.line!=h.head.line)){var m=e.getModeAt(h.head),y=Wo(v);if(m.electricChars){for(var b=0;b<m.electricChars.length;b++)if(a.indexOf(m.electricChars.charAt(b))>-1){wr(e,y.line,"smart");break}}else m.electricInput&&m.electricInput.test(Wn(n,y.line).text.slice(0,y.ch))&&wr(e,y.line,"smart")}}return yr(e),e.curOp.updateInput=g,e.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=i,o&&et(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function Lt(e,t){var r,n,i=e.doc;if(e.somethingSelected()){e.display.prevInput="";var o=i.sel.primary();r=Dl&&(o.to().line-o.from().line>100||(n=e.getSelection()).length>1e3);var l=r?"-":n||e.getSelection();e.display.input.value=l,e.state.focused&&bl(e.display.input),Zi&&Qi>=9&&(e.display.inputHasSelection=l)}else t||(e.display.prevInput=e.display.input.value="",Zi&&Qi>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=r}function St(e){"nocursor"==e.options.readOnly||ao&&ki()==e.display.input||e.display.input.focus()}function kt(e){e.state.focused||(St(e),Zt(e))}function Mt(e){return e.options.readOnly||e.doc.cantEdit}function Tt(e){function t(){e.state.focused&&setTimeout(mi(St,e),0)}function r(t){oi(e,t)||sl(t)}function n(t){if(e.somethingSelected())ko=e.getSelections(),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=ko.join("\n"),bl(i.input));else{for(var r=[],n=[],o=0;o<e.doc.sel.ranges.length;o++){var l=e.doc.sel.ranges[o].head.line,s={anchor:mo(l,0),head:mo(l+1,0)};n.push(s),r.push(e.getRange(s.anchor,s.head))}"cut"==t.type?e.setSelections(n,null,pl):(i.prevInput="",i.input.value=r.join("\n"),bl(i.input)),ko=r}"cut"==t.type&&(e.state.cutIncoming=!0)}var i=e.display;al(i.scroller,"mousedown",at(e,Wt)),Zi&&Qi<11?al(i.scroller,"dblclick",at(e,function(t){if(!oi(e,t)){var r=At(e,t);if(r&&!Pt(e,t)&&!Ht(e.display,t)){ol(t);var n=e.findWordAt(r);ne(e.doc,n.anchor,n.head)}}})):al(i.scroller,"dblclick",function(t){oi(e,t)||ol(t)}),al(i.lineSpace,"selectstart",function(e){Ht(i,e)||ol(e)}),po||al(i.scroller,"contextmenu",function(t){Jt(e,t)}),al(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Ft(e,i.scroller.scrollTop),Bt(e,i.scroller.scrollLeft,!0),cl(e,"scroll",e))}),al(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&Ft(e,i.scrollbarV.scrollTop)}),al(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&Bt(e,i.scrollbarH.scrollLeft)}),al(i.scroller,"mousewheel",function(t){Gt(e,t)}),al(i.scroller,"DOMMouseScroll",function(t){Gt(e,t)}),al(i.scrollbarH,"mousedown",t),al(i.scrollbarV,"mousedown",t),al(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),al(i.input,"keyup",function(t){$t.call(e,t)}),al(i.input,"input",function(){Zi&&Qi>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),xt(e)}),al(i.input,"keydown",at(e,_t)),al(i.input,"keypress",at(e,qt)),al(i.input,"focus",mi(Zt,e)),al(i.input,"blur",mi(Qt,e)),e.options.dragDrop&&(al(i.scroller,"dragstart",function(t){Rt(e,t)}),al(i.scroller,"dragenter",r),al(i.scroller,"dragover",r),al(i.scroller,"drop",at(e,zt))),al(i.scroller,"paste",function(t){Ht(i,t)||(e.state.pasteIncoming=!0,St(e),xt(e))}),al(i.input,"paste",function(){if(Ji&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=i.input.selectionStart,r=i.input.selectionEnd;i.input.value+="$",i.input.selectionEnd=r,i.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,xt(e)}),al(i.input,"cut",n),al(i.input,"copy",n),io&&al(i.sizer,"mouseup",function(){ki()==i.input&&i.input.blur(),St(e)})}function Nt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize())}function Ht(e,t){for(var r=ti(t);r!=e.wrapper;r=r.parentNode)if(!r||r.ignoreEvents||r.parentNode==e.sizer&&r!=e.mover)return!0}function At(e,t,r,n){var i=e.display;if(!r){var o=ti(t);if(o==i.scrollbarH||o==i.scrollbarV||o==i.scrollbarFiller||o==i.gutterFiller)return null}var l,s,a=i.lineSpace.getBoundingClientRect();try{l=t.clientX-a.left,s=t.clientY-a.top}catch(e){return null}var u,c=Ye(e,l,s);if(n&&1==c.xRel&&(u=Wn(e.doc,c.line).text).length==c.ch){var f=ml(u,u.length,e.options.tabSize)-u.length;c=mo(c.line,Math.max(0,Math.round((l-Te(e.display).left)/Ze(e.display))-f))}return c}function Wt(e){if(!oi(this,e)){var t=this,r=t.display;if(r.shift=e.shiftKey,Ht(r,e))return void(Ji||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100)));if(!Pt(t,e)){var n=At(t,e);switch(window.focus(),ri(e)){case 1:n?Ot(t,e,n):ti(e)==r.scroller&&ol(e);break;case 2:Ji&&(t.state.lastMiddleDown=+new Date),n&&ne(t.doc,n),setTimeout(mi(St,t),20),ol(e);break;case 3:po&&Jt(t,e)}}}}function Ot(e,t,r){setTimeout(mi(kt,e),0);var n,i=+new Date;xo&&xo.time>i-400&&0==yo(xo.pos,r)?n="triple":wo&&wo.time>i-400&&0==yo(wo.pos,r)?(n="double",xo={time:i,pos:r}):(n="single",wo={time:i,pos:r});var o=e.doc.sel,l=uo?t.metaKey:t.ctrlKey;e.options.dragDrop&&Al&&!Mt(e)&&"single"==n&&o.contains(r)>-1&&o.somethingSelected()?Dt(e,t,r,l):It(e,t,r,n,l)}function Dt(e,t,r,n){var i=e.display,o=at(e,function(l){Ji&&(i.scroller.draggable=!1),e.state.draggingText=!1,ul(document,"mouseup",o),ul(i.scroller,"drop",o),Math.abs(t.clientX-l.clientX)+Math.abs(t.clientY-l.clientY)<10&&(ol(l),n||ne(e.doc,r),St(e),Zi&&9==Qi&&setTimeout(function(){document.body.focus(),St(e)},20))});Ji&&(i.scroller.draggable=!0),e.state.draggingText=o,i.scroller.dragDrop&&i.scroller.dragDrop(),al(document,"mouseup",o),al(i.scroller,"drop",o)}function It(e,t,r,n,i){function o(t){if(0!=yo(g,t))if(g=t,"rect"==n){for(var i=[],o=e.options.tabSize,l=ml(Wn(u,r.line).text,r.ch,o),s=ml(Wn(u,t.line).text,t.ch,o),a=Math.min(l,s),d=Math.max(l,s),p=Math.min(r.line,t.line),v=Math.min(e.lastLine(),Math.max(r.line,t.line));p<=v;p++){var m=Wn(u,p).text,y=ci(m,a,o);a==d?i.push(new Y(mo(p,y),mo(p,y))):m.length>y&&i.push(new Y(mo(p,y),mo(p,ci(m,d,o))))}i.length||i.push(new Y(r,r)),ue(u,$(h.ranges.slice(0,f).concat(i),f),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=c,w=b.anchor,x=t;if("single"!=n){if("double"==n)var C=e.findWordAt(t);else var C=new Y(mo(t.line,0),Q(u,mo(t.line+1,0)));yo(C.anchor,w)>0?(x=C.head,w=j(b.from(),C.anchor)):(x=C.anchor,w=X(b.to(),C.head))}var i=h.ranges.slice(0);i[f]=new Y(Q(u,w),x),ue(u,$(i,f),gl)}}function l(t){var r=++y,i=At(e,t,!0,"rect"==n);if(i)if(0!=yo(i,g)){kt(e),o(i);var s=m(a,u);(i.line>=s.to||i.line<s.from)&&setTimeout(at(e,function(){y==r&&l(t)}),150)}else{var c=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;c&&setTimeout(at(e,function(){y==r&&(a.scroller.scrollTop+=c,l(t))}),50)}}function s(t){y=1/0,ol(t),St(e),ul(document,"mousemove",b),ul(document,"mouseup",w),u.history.lastSelOrigin=null}var a=e.display,u=e.doc;ol(t);var c,f,h=u.sel;if(i&&!t.shiftKey?(f=u.sel.contains(r),c=f>-1?u.sel.ranges[f]:new Y(r,r)):c=u.sel.primary(),t.altKey)n="rect",i||(c=new Y(r,r)),r=At(e,t,!0,!0),f=-1;else if("double"==n){var d=e.findWordAt(r);c=e.display.shift||u.extend?re(u,c,d.anchor,d.head):d}else if("triple"==n){var p=new Y(mo(r.line,0),Q(u,mo(r.line+1,0)));c=e.display.shift||u.extend?re(u,c,p.anchor,p.head):p}else c=re(u,c,r);i?f>-1?oe(u,f,c,gl):(f=u.sel.ranges.length,ue(u,$(u.sel.ranges.concat([c]),f),{scroll:!1,origin:"*mouse"})):(f=0,ue(u,new _([c],0),gl),h=u.sel);var g=r,v=a.wrapper.getBoundingClientRect(),y=0,b=at(e,function(e){ri(e)?l(e):s(e)}),w=at(e,s);al(document,"mousemove",b),al(document,"mouseup",w)}function Et(e,t,r,n,i){try{var o=t.clientX,l=t.clientY}catch(e){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&ol(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(l>a.bottom||!si(e,r))return ei(t);l-=a.top-s.viewOffset;for(var u=0;u<e.options.gutters.length;++u){var c=s.gutters.childNodes[u];if(c&&c.getBoundingClientRect().right>=o){var f=Pn(e.doc,l),h=e.options.gutters[u];return i(e,r,e,f,h,t),ei(t)}}}function Pt(e,t){return Et(e,t,"gutterClick",!0,ni)}function zt(e){var t=this;if(!oi(t,e)&&!Ht(t.display,e)){ol(e),Zi&&(Mo=+new Date);var r=At(t,e,!0),n=e.dataTransfer.files;if(r&&!Mt(t))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){var s=new FileReader;s.onload=at(t,function(){if(o[n]=s.result,++l==i){r=Q(t.doc,r);var e={from:r,to:r,text:Wl(o.join("\n")),origin:"paste"};lr(t.doc,e),ae(t.doc,q(r,Wo(e)))}}),s.readAsText(e)},a=0;a<i;++a)s(n[a],a);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(mi(St,t),20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(uo?e.metaKey:e.ctrlKey))var u=t.listSelections();if(ce(t.doc,q(r,r)),u)for(var a=0;a<u.length;++a)hr(t.doc,"",u[a].anchor,u[a].head,"drag");t.replaceSelection(o,"around","paste"),St(t)}}catch(e){}}}}function Rt(e,t){if(Zi&&(!e.state.draggingText||+new Date-Mo<100))return void sl(t);if(!oi(e,t)&&!Ht(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!no)){var r=xi("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ro&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),ro&&r.parentNode.removeChild(r)}}function Ft(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Yi||k(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Yi&&k(e),xe(e,100))}function Bt(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,y(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Gt(e,t){var r=t.wheelDeltaX,n=t.wheelDeltaY;null==r&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta);var i=e.display,o=i.scroller;if(r&&o.scrollWidth>o.clientWidth||n&&o.scrollHeight>o.clientHeight){if(n&&uo&&Ji)e:for(var l=t.target,s=i.view;l!=o;l=l.parentNode)for(var a=0;a<s.length;a++)if(s[a].node==l){e.display.currentWheelTarget=l;break e}if(r&&!Yi&&!ro&&null!=No)return n&&Ft(e,Math.max(0,Math.min(o.scrollTop+n*No,o.scrollHeight-o.clientHeight))),Bt(e,Math.max(0,Math.min(o.scrollLeft+r*No,o.scrollWidth-o.clientWidth))),ol(t),void(i.wheelStartX=null);if(n&&null!=No){var u=n*No,c=e.doc.scrollTop,f=c+i.wrapper.clientHeight;u<0?c=Math.max(0,c+u-50):f=Math.min(e.doc.height,f+u+50),k(e,{top:c,bottom:f})}To<20&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=r,i.wheelDY=n,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,r=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,r&&(No=(No*To+r)/(To+1),++To)}},200)):(i.wheelDX+=r,i.wheelDY+=n))}}function Vt(e,t,r){if("string"==typeof t&&(t=Vo[t],!t))return!1;e.display.pollingFast&&Ct(e)&&(e.display.pollingFast=!1);var n=e.display.shift,i=!1;try{Mt(e)&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=dl}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function Ut(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=Ko(t,e.state.keyMaps[n],r);if(i)return i}return e.options.extraKeys&&Ko(t,e.options.extraKeys,r)||Ko(t,e.options.keyMap,r)}function Kt(e,t,r,n){var i=e.state.keySeq;if(i){if(Xo(t))return"handled";Ho.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,Lt(e))}),t=i+" "+t}var o=Ut(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&ni(e,"keyHandled",e,t,r),"handled"!=o&&"multi"!=o||(ol(r),we(e)),i&&!o&&/\'$/.test(t)?(ol(r),!0):!!o}function Xt(e,t){var r=jo(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?Kt(e,"Shift-"+r,t,function(t){return Vt(e,t,!0)})||Kt(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Vt(e,t)}):Kt(e,r,t,function(t){return Vt(e,t)}))}function jt(e,t,r){return Kt(e,"'"+r+"'",t,function(t){return Vt(e,t,!0)})}function _t(e){var t=this;if(kt(t),!oi(t,e)){Zi&&Qi<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=Xt(t,e);ro&&(Ao=n?r:null,!n&&88==r&&!Dl&&(uo?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||Yt(t)}}function Yt(e){function t(e){18!=e.keyCode&&e.altKey||(Tl(r,"CodeMirror-crosshair"),ul(document,"keyup",t),ul(document,"mouseover",t))}var r=e.display.lineDiv;Nl(r,"CodeMirror-crosshair"),al(document,"keyup",t),al(document,"mouseover",t)}function $t(e){16==e.keyCode&&(this.doc.sel.shift=!1),oi(this,e)}function qt(e){var t=this;if(!(oi(t,e)||e.ctrlKey&&!e.altKey||uo&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(ro&&r==Ao)return Ao=null,void ol(e);if(!(ro&&(!e.which||e.which<10)||io)||!Xt(t,e)){var i=String.fromCharCode(null==n?r:n);jt(t,e,i)||(Zi&&Qi>=9&&(t.display.inputHasSelection=null),xt(t))}}}function Zt(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(cl(e,"focus",e),e.state.focused=!0,Nl(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(Lt(e),Ji&&setTimeout(mi(Lt,e,!0),0))),wt(e),we(e))}function Qt(e){e.state.focused&&(cl(e,"blur",e),e.state.focused=!1,Tl(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Jt(e,t){function r(){if(null!=i.input.selectionStart){var t=e.somethingSelected(),r=i.input.value="​"+(t?i.input.value:"");i.prevInput=t?"":"​",i.input.selectionStart=1,i.input.selectionEnd=r.length,i.selForContextMenu=e.doc.sel}}function n(){if(i.inputDiv.style.position="relative",i.input.style.cssText=a,Zi&&Qi<9&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=l),wt(e),null!=i.input.selectionStart){(!Zi||Zi&&Qi<9)&&r();var t=0,n=function(){i.selForContextMenu==e.doc.sel&&0==i.input.selectionStart?at(e,Vo.selectAll)(e):t++<10?i.detectingSelectAll=setTimeout(n,500):Lt(e)};i.detectingSelectAll=setTimeout(n,200)}}if(!oi(e,t,"contextmenu")){var i=e.display;if(!Ht(i,t)&&!er(e,t)){var o=At(e,t),l=i.scroller.scrollTop;if(o&&!ro){var s=e.options.resetSelectionOnContextMenu;s&&e.doc.sel.contains(o)==-1&&at(e,ue)(e.doc,q(o),pl);var a=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(Zi?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Ji)var u=window.scrollY;if(St(e),Ji&&window.scrollTo(null,u),Lt(e),e.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=e.doc.sel,clearTimeout(i.detectingSelectAll),Zi&&Qi>=9&&r(),po){sl(t);var c=function(){ul(window,"mouseup",c),setTimeout(n,20)};al(window,"mouseup",c)}else setTimeout(n,50)}}}}function er(e,t){return!!si(e,"gutterContextMenu")&&Et(e,t,"gutterContextMenu",!1,cl)}function tr(e,t){if(yo(e,t.from)<0)return e;if(yo(e,t.to)<=0)return Wo(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Wo(t).ch-t.to.ch),mo(r,n)}function rr(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new Y(tr(i.anchor,t),tr(i.head,t)))}return $(r,e.sel.primIndex)}function nr(e,t,r){return e.line==t.line?mo(r.line,e.ch-t.ch+r.ch):mo(r.line+(e.line-t.line),e.ch)}function ir(e,t,r){for(var n=[],i=mo(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=nr(s.from,i,o),u=nr(Wo(s),i,o);if(i=s.to,o=u,"around"==r){var c=e.sel.ranges[l],f=yo(c.head,c.anchor)<0;n[l]=new Y(f?u:a,f?a:u)}else n[l]=new Y(a,a)}return new _(n,e.sel.primIndex)}function or(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(n.update=function(t,r,n,i){t&&(this.from=Q(e,t)),r&&(this.to=Q(e,r)),n&&(this.text=n),void 0!==i&&(this.origin=i)}),cl(e,"beforeChange",e,n),e.cm&&cl(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function lr(e,t,r){if(e.cm){if(!e.cm.curOp)return at(e.cm,lr)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(si(e,"beforeChange")||e.cm&&si(e.cm,"beforeChange"))||(t=or(e,t,!0))){var n=go&&!r&&Vr(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)sr(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text});else sr(e,t)}}function sr(e,t){if(1!=t.text.length||""!=t.text[0]||0!=yo(t.from,t.to)){var r=rr(e,t);Un(e,t,r,e.cm?e.cm.curOp.id:NaN),cr(e,t,r,Fr(e,t));var n=[];Hn(e,function(e,r){r||di(n,e.history)!=-1||(Jn(e.history,t),n.push(e.history)),cr(e,t,null,Fr(e,t))})}}function ar(e,t,r){if(!e.cm||!e.cm.state.suppressEdits){for(var n,i=e.history,o=e.sel,l="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,a=0;a<l.length&&(n=l[a],r?!n.ranges||n.equals(e.sel):n.ranges);a++);if(a!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;n=l.pop(),n.ranges;){if(jn(n,s),r&&!n.equals(e.sel))return void ue(e,n,{clearRedo:!1});o=n}var u=[];jn(o,s),s.push({changes:u,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;for(var c=si(e,"beforeChange")||e.cm&&si(e.cm,"beforeChange"),a=n.changes.length-1;a>=0;--a){var f=n.changes[a];if(f.origin=t,c&&!or(e,f,!1))return void(l.length=0);u.push(Bn(e,f));var h=a?rr(e,f):hi(l);cr(e,f,h,Gr(e,f)),!a&&e.cm&&e.cm.scrollIntoView({from:f.from,to:Wo(f)});var d=[];Hn(e,function(e,t){t||di(d,e.history)!=-1||(Jn(e.history,f),d.push(e.history)),cr(e,f,null,Gr(e,f))})}}}}function ur(e,t){if(0!=t&&(e.first+=t,e.sel=new _(pi(e.sel.ranges,function(e){return new Y(mo(e.anchor.line+t,e.anchor.ch),mo(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){dt(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)pt(e.cm,n,"gutter")}}function cr(e,t,r,n){if(e.cm&&!e.cm.curOp)return at(e.cm,cr)(e,t,r,n);if(t.to.line<e.first)return void ur(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ur(e,i),t={from:mo(e.first,0),to:mo(t.to.line+i,t.to.ch),text:[hi(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:mo(o,Wn(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=On(e,t.from,t.to),r||(r=rr(e,t)),e.cm?fr(e.cm,t,n):Mn(e,t,n),ce(e,r,pl)}}function fr(e,t,r){var n=e.doc,i=e.display,l=t.from,s=t.to,a=!1,u=l.line;e.options.lineWrapping||(u=En(Qr(Wn(n,l.line))),n.iter(u,s.line+1,function(e){if(e==i.maxLine)return a=!0,!0})),n.sel.contains(t.from,t.to)>-1&&li(e),Mn(n,t,r,o(e)),e.options.lineWrapping||(n.iter(u,l.line+t.text.length,function(e){var t=f(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,l.line),xe(e,400);var c=t.text.length-(s.line-l.line)-1;l.line!=s.line||1!=t.text.length||kn(e.doc,t)?dt(e,l.line,s.line+1,c):pt(e,l.line,"text");var h=si(e,"changes"),d=si(e,"change");if(d||h){var p={from:l,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&ni(e,"change",e,p),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function hr(e,t,r,n,i){if(n||(n=r),yo(n,r)<0){var o=n;n=r,r=o}"string"==typeof t&&(t=Wl(t)),lr(e,{from:r,to:n,text:t,origin:i})}function dr(e,t){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!lo){var o=xi("div","​",null,"position: absolute; top: "+(t.top-r.viewOffset-ke(e.display))+"px; height: "+(t.bottom-t.top+hl)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}function pr(e,t,r,n){null==n&&(n=0);for(var i=0;i<5;i++){var o=!1,l=Xe(e,t),s=r&&r!=t?Xe(e,r):l,a=vr(e,Math.min(l.left,s.left),Math.min(l.top,s.top)-n,Math.max(l.left,s.left),Math.max(l.bottom,s.bottom)+n),u=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=a.scrollTop&&(Ft(e,a.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),null!=a.scrollLeft&&(Bt(e,a.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(o=!0)),!o)return l}}function gr(e,t,r,n,i){var o=vr(e,t,r,n,i);null!=o.scrollTop&&Ft(e,o.scrollTop),null!=o.scrollLeft&&Bt(e,o.scrollLeft)}function vr(e,t,r,n,i){var o=e.display,l=qe(e.display);r<0&&(r=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,a=o.scroller.clientHeight-hl,u={};i-r>a&&(i=r+a);var c=e.doc.height+Me(o),f=r<l,h=i>c-l;if(r<s)u.scrollTop=f?0:r;else if(i>s+a){var d=Math.min(r,(h?c:i)-a);d!=s&&(u.scrollTop=d)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,g=o.scroller.clientWidth-hl-o.gutters.offsetWidth,v=n-t>g;return v&&(n=t+g),t<10?u.scrollLeft=0:t<p?u.scrollLeft=Math.max(0,t-(v?0:10)):n>g+p-3&&(u.scrollLeft=n+(v?0:10)-g),u}function mr(e,t,r){null==t&&null==r||br(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=r&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+r)}function yr(e){br(e);var t=e.getCursor(),r=t,n=t;e.options.lineWrapping||(r=t.ch?mo(t.line,t.ch-1):t,n=mo(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function br(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=je(e,t.from),n=je(e,t.to),i=vr(e,Math.min(r.left,n.left),Math.min(r.top,n.top)-t.margin,Math.max(r.right,n.right),Math.max(r.bottom,n.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function wr(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=Se(e,t):r="prev");var l=e.options.tabSize,s=Wn(o,t),a=ml(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&(u=o.mode.indent(i,s.text.slice(c.length),s.text),u==dl||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>o.first?ml(Wn(o,t-1).text,null,l):0:"add"==r?u=a+e.options.indentUnit:"subtract"==r?u=a-e.options.indentUnit:"number"==typeof r&&(u=a+r),u=Math.max(0,u);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(u/l);d;--d)h+=l,f+="\t";if(h<u&&(f+=fi(u-h)),f!=c)hr(o,f,mo(t,0),mo(t,c.length),"+input");else for(var d=0;d<o.sel.ranges.length;d++){var p=o.sel.ranges[d];if(p.head.line==t&&p.head.ch<c.length){var h=mo(t,c.length);oe(o,d,new Y(h,h));break}}s.stateAfter=null}function xr(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=Wn(e,Z(e,t)):i=En(t),null==i?null:(n(o,i)&&e.cm&&pt(e.cm,i,r),o)}function Cr(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&yo(o.from,hi(n).to)<=0;){var l=n.pop();if(yo(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}st(e,function(){for(var t=n.length-1;t>=0;t--)hr(e.doc,"",n[t].from,n[t].to,"+delete");yr(e)})}function Lr(e,t,r,n,i){function o(){var t=s+r;return t<e.first||t>=e.first+e.size?f=!1:(s=t,c=Wn(e,t))}function l(e){var t=(i?ji:_i)(c,a,r,!0);if(null==t){if(e||!o())return f=!1;a=i?(r<0?Fi:Ri)(c):r<0?c.text.length:0}else a=t;return!0}var s=t.line,a=t.ch,u=r,c=Wn(e,s),f=!0;if("char"==n)l();else if("column"==n)l(!0);else if("word"==n||"group"==n)for(var h=null,d="group"==n,p=e.cm&&e.cm.getHelper(t,"wordChars"),g=!0;!(r<0)||l(!g);g=!1){var v=c.text.charAt(a)||"\n",m=yi(v,p)?"w":d&&"\n"==v?"n":!d||/\s/.test(v)?null:"p";if(!d||g||m||(m="s"),h&&h!=m){r<0&&(r=1,l());break}if(m&&(h=m),r>0&&!l(!g))break}var y=pe(e,mo(s,a),u,!0);return f||(y.hitSide=!0),y}function Sr(e,t,r,n){var i,o=e.doc,l=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+r*(s-(r<0?1.5:.5)*qe(e.display))}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;;){var a=Ye(e,l,i);if(!a.outside)break;if(r<0?i<=0:i>=o.height){a.hitSide=!0;break}i+=5*r}return a}function kr(t,r,n,i){e.defaults[t]=r,n&&(Do[t]=i?function(e,t,r){r!=Io&&n(e,t,r)}:n)}function Mr(e){for(var t,r,n,i,o=e.split(/-(?!$)/),e=o[o.length-1],l=0;l<o.length-1;l++){var s=o[l];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Tr(e){return"string"==typeof e?Uo[e]:e}function Nr(e,t,r,n,i){if(n&&n.shared)return Hr(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return at(e.cm,Nr)(e,t,r,n,i);var o=new Yo(e,i),l=yo(t,r);if(n&&vi(n,o,!1),l>0||0==l&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=xi("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),n.insertLeft&&(o.widgetNode.insertLeft=!0)),
o.collapsed){if(Zr(e,t.line,t,r,o)||t.line!=r.line&&Zr(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");vo=!0}o.addToHistory&&Un(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var s,a=t.line,u=e.cm;if(e.iter(a,r.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&Qr(e)==u.display.maxLine&&(s=!0),o.collapsed&&a!=t.line&&In(e,0),Pr(e,new Dr(o,a==t.line?t.ch:null,a==r.line?r.ch:null)),++a}),o.collapsed&&e.iter(t.line,r.line+1,function(t){rn(e,t)&&In(t,0)}),o.clearOnEnter&&al(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(go=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++$o,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)dt(u,t.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var c=t.line;c<=r.line;c++)pt(u,c,"text");o.atomic&&he(u.doc),ni(u,"markerAdded",u,o)}return o}function Hr(e,t,r,n,i){n=vi(n),n.shared=!1;var o=[Nr(e,t,r,n,i)],l=o[0],s=n.widgetNode;return Hn(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(Nr(e,Q(e,t),Q(e,r),n,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;l=hi(o)}),new qo(o,l)}function Ar(e){return e.findMarks(mo(e.first,0),e.clipPos(mo(e.lastLine())),function(e){return e.parent})}function Wr(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(yo(o,l)){var s=Nr(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}function Or(e){for(var t=0;t<e.length;t++){var r=e[t],n=[r.primary.doc];Hn(r.primary.doc,function(e){n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];di(n,o.doc)==-1&&(o.parent=null,r.markers.splice(i--,1))}}}function Dr(e,t,r){this.marker=e,this.from=t,this.to=r}function Ir(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function Er(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Pr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function zr(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==l.type&&(!r||!o.marker.insertLeft)){var a=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Dr(l,o.from,a?null:o.to))}}return n}function Rr(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==l.type&&(!r||o.marker.insertLeft)){var a=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Dr(l,a?null:o.from-t,null==o.to?null:o.to-t))}}return n}function Fr(e,t){var r=ee(e,t.from.line)&&Wn(e,t.from.line).markedSpans,n=ee(e,t.to.line)&&Wn(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==yo(t.from,t.to),s=zr(r,i,l),a=Rr(n,o,l),u=1==t.text.length,c=hi(t.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var h=s[f];if(null==h.to){var d=Ir(a,h.marker);d?u&&(h.to=null==d.to?null:d.to+c):h.to=i}}if(a)for(var f=0;f<a.length;++f){var h=a[f];if(null!=h.to&&(h.to+=c),null==h.from){var d=Ir(s,h.marker);d||(h.from=c,u&&(s||(s=[])).push(h))}else h.from+=c,u&&(s||(s=[])).push(h)}s&&(s=Br(s)),a&&a!=s&&(a=Br(a));var p=[s];if(!u){var g,v=t.text.length-2;if(v>0&&s)for(var f=0;f<s.length;++f)null==s[f].to&&(g||(g=[])).push(new Dr(s[f].marker,null,null));for(var f=0;f<v;++f)p.push(g);p.push(a)}return p}function Br(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Gr(e,t){var r=$n(e,t),n=Fr(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function Vr(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&di(n,r)!=-1||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(yo(u.to,s.from)<0||yo(u.from,s.to)>0)){var c=[a,1],f=yo(u.from,s.from),h=yo(u.to,s.to);(f<0||!l.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(h>0||!l.inclusiveRight&&!h)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-1}}return i}function Ur(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Kr(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Xr(e){return e.inclusiveLeft?-1:0}function jr(e){return e.inclusiveRight?1:0}function _r(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=yo(n.from,i.from)||Xr(e)-Xr(t);if(o)return-o;var l=yo(n.to,i.to)||jr(e)-jr(t);return l?l:t.id-e.id}function Yr(e,t){var r,n=vo&&e.markedSpans;if(n)for(var i,o=0;o<n.length;++o)i=n[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!r||_r(r,i.marker)<0)&&(r=i.marker);return r}function $r(e){return Yr(e,!0)}function qr(e){return Yr(e,!1)}function Zr(e,t,r,n,i){var o=Wn(e,t),l=vo&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=yo(u.from,r)||Xr(a.marker)-Xr(i),f=yo(u.to,n)||jr(a.marker)-jr(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(yo(u.to,r)>0||a.marker.inclusiveRight&&i.inclusiveLeft)||c>=0&&(yo(u.from,n)<0||a.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function Qr(e){for(var t;t=$r(e);)e=t.find(-1,!0).line;return e}function Jr(e){for(var t,r;t=qr(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function en(e,t){var r=Wn(e,t),n=Qr(r);return r==n?t:En(n)}function tn(e,t){if(t>e.lastLine())return t;var r,n=Wn(e,t);if(!rn(e,n))return t;for(;r=qr(n);)n=r.find(1,!0).line;return En(n)+1}function rn(e,t){var r=vo&&t.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if(n=r[i],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&nn(e,t,n))return!0}}function nn(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return nn(e,n.line,Ir(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&nn(e,t,i))return!0}function on(e,t,r){zn(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&mr(e,null,r)}function ln(e){if(null!=e.height)return e.height;if(!Si(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),Li(e.cm.display.measure,xi("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function sn(e,t,r,n){var i=new Zo(e,r,n);return i.noHScroll&&(e.display.alignWidgets=!0),xr(e.doc,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!rn(e.doc,t)){var n=zn(t)<e.doc.scrollTop;In(t,t.height+ln(i)),n&&mr(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function an(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ur(e),Kr(e,r);var i=n?n(e):1;i!=e.height&&In(e,i)}function un(e){e.parent=null,Ur(e)}function cn(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function fn(t,r){if(t.blankLine)return t.blankLine(r);if(t.innerMode){var n=e.innerMode(t,r);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function hn(e,t,r){for(var n=0;n<10;n++){var i=e.token(t,r);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function dn(t,r,n,i,o,l,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var u,c=0,f=null,h=new _o(r,t.options.tabSize);for(""==r&&cn(fn(n,i),l);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,s&&vn(t,r,i,h.pos),h.pos=r.length,u=null):u=cn(hn(n,h,i),l),t.options.addModeClass){var d=e.innerMode(n,i).mode.name;d&&(u="m-"+(u?d+" "+u:d))}a&&f==u||(c<h.start&&o(h.start,f),c=h.start,f=u),h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e4);o(p,f),c=p}}function pn(e,t,r,n){var i=[e.state.modeGen],o={};dn(e,t.text,e.doc.mode,r,function(e,t){i.push(e,t)},o,n);for(var l=0;l<e.state.overlays.length;++l){var s=e.state.overlays[l],a=1,u=0;dn(e,t.text,s.mode,!0,function(e,t){for(var r=a;u<e;){var n=i[a];n>e&&i.splice(a,1,e,i[a+1],n),a+=2,u=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,a-r,e,"cm-overlay "+t),a=r+2;else for(;r<a;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function gn(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=pn(e,t,t.stateAfter=Se(e,En(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.frontier&&e.doc.frontier++}return t.styles}function vn(e,t,r,n){var i=e.doc.mode,o=new _o(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&fn(i,r);!o.eol()&&o.pos<=e.options.maxHighlightLength;)hn(i,o,r),o.start=o.pos}function mn(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?el:Jo;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function yn(e,t){var r=xi("span",null,null,Ji?"padding-right: .1px":null),n={pre:xi("pre",[r]),content:r,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,l=i?t.rest[i-1]:t.line;n.pos=0,n.addToken=wn,(Zi||Ji)&&e.getOption("lineWrapping")&&(n.addToken=xn(n.addToken)),Di(e.display.measure)&&(o=Rn(l))&&(n.addToken=Cn(n.addToken,o)),n.map=[];var s=t!=e.display.externalMeasured&&En(l);Sn(l,n,gn(e,l,s)),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=Ti(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=Ti(l.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Oi(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return Ji&&/\bcm-tab\b/.test(n.content.lastChild.className)&&(n.content.className="cm-tab-wrap-hack"),cl(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Ti(n.pre.className,n.textClass||"")),n}function bn(e){var t=xi("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function wn(e,t,r,n,i,o){if(t){var l=e.cm.options.specialChars,s=!1;if(l.test(t))for(var a=document.createDocumentFragment(),u=0;;){l.lastIndex=u;var c=l.exec(t),f=c?c.index-u:t.length-u;if(f){var h=document.createTextNode(t.slice(u,u+f));Zi&&Qi<9?a.appendChild(xi("span",[h])):a.appendChild(h),e.map.push(e.pos,e.pos+f,h),e.col+=f,e.pos+=f}if(!c)break;if(u+=f+1,"\t"==c[0]){var d=e.cm.options.tabSize,p=d-e.col%d,h=a.appendChild(xi("span",fi(p),"cm-tab"));e.col+=p}else{var h=e.cm.options.specialCharPlaceholder(c[0]);Zi&&Qi<9?a.appendChild(xi("span",[h])):a.appendChild(h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}else{e.col+=t.length;var a=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,a),Zi&&Qi<9&&(s=!0),e.pos+=t.length}if(r||n||i||s){var g=r||"";n&&(g+=n),i&&(g+=i);var v=xi("span",[a],g);return o&&(v.title=o),e.content.appendChild(v)}e.content.appendChild(a)}}function xn(e){function t(e){for(var t=" ",r=0;r<e.length-2;++r)t+=r%2?" ":" ";return t+=" "}return function(r,n,i,o,l,s){e(r,n.replace(/ {3,}/g,t),i,o,l,s)}}function Cn(e,t){return function(r,n,i,o,l,s){i=i?i+" cm-force-border":"cm-force-border";for(var a=r.pos,u=a+n.length;;){for(var c=0;c<t.length;c++){var f=t[c];if(f.to>a&&f.from<=a)break}if(f.to>=u)return e(r,n,i,o,l,s);e(r,n.slice(0,f.to-a),i,o,null,s),o=null,n=n.slice(f.to-a),a=f.to}}}function Ln(e,t,r,n){var i=!n&&r.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function Sn(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,f,h=i.length,d=0,p=1,g="",v=0;;){if(v==d){s=a=u=c="",f=null,v=1/0;for(var m=[],y=0;y<n.length;++y){var b=n[y],w=b.marker;b.from<=d&&(null==b.to||b.to>d)?(null!=b.to&&v>b.to&&(v=b.to,a=""),w.className&&(s+=" "+w.className),w.startStyle&&b.from==d&&(u+=" "+w.startStyle),w.endStyle&&b.to==v&&(a+=" "+w.endStyle),w.title&&!c&&(c=w.title),w.collapsed&&(!f||_r(f.marker,w)<0)&&(f=b)):b.from>d&&v>b.from&&(v=b.from),"bookmark"==w.type&&b.from==d&&w.widgetNode&&m.push(w)}if(f&&(f.from||0)==d&&(Ln(t,(null==f.to?h+1:f.to)-d,f.marker,null==f.from),null==f.to))return;if(!f&&m.length)for(var y=0;y<m.length;++y)Ln(t,0,m[y])}if(d>=h)break;for(var x=Math.min(h,v);;){if(g){var C=d+g.length;if(!f){var L=C>x?g.slice(0,x-d):g;t.addToken(t,L,l?l+s:s,u,d+L.length==v?a:"",c)}if(C>=x){g=g.slice(x-d),d=x;break}d=C,u=""}g=i.slice(o,o=r[p++]),l=mn(r[p++],t.cm.options)}}else for(var p=1;p<r.length;p+=2)t.addToken(t,i.slice(o,o=r[p]),mn(r[p+1],t.cm.options))}function kn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==hi(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Mn(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){an(e,r,i,n),ni(e,"change",e,t)}var l=t.from,s=t.to,a=t.text,u=Wn(e,l.line),c=Wn(e,s.line),f=hi(a),h=i(a.length-1),d=s.line-l.line;if(kn(e,t)){for(var p=0,g=[];p<a.length-1;++p)g.push(new Qo(a[p],i(p),n));o(c,c.text,h),d&&e.remove(l.line,d),g.length&&e.insert(l.line,g)}else if(u==c)if(1==a.length)o(u,u.text.slice(0,l.ch)+f+u.text.slice(s.ch),h);else{for(var g=[],p=1;p<a.length-1;++p)g.push(new Qo(a[p],i(p),n));g.push(new Qo(f+u.text.slice(s.ch),h,n)),o(u,u.text.slice(0,l.ch)+a[0],i(0)),e.insert(l.line+1,g)}else if(1==a.length)o(u,u.text.slice(0,l.ch)+a[0]+c.text.slice(s.ch),i(0)),e.remove(l.line+1,d);else{o(u,u.text.slice(0,l.ch)+a[0],i(0)),o(c,f+c.text.slice(s.ch),h);for(var p=1,g=[];p<a.length-1;++p)g.push(new Qo(a[p],i(p),n));d>1&&e.remove(l.line+1,d-1),e.insert(l.line+1,g)}ni(e,"change",e,t)}function Tn(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}function Nn(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}function Hn(e,t,r){function n(e,i,o){if(e.linked)for(var l=0;l<e.linked.length;++l){var s=e.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;r&&!a||(t(s.doc,a),n(s.doc,e,a))}}}n(e,null,!0)}function An(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,l(e),r(e),e.options.lineWrapping||h(e),e.options.mode=t.modeOption,dt(e)}function Wn(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function On(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function Dn(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function In(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function En(e){if(null==e.parent)return null;for(var t=e.parent,r=di(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function Pn(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var n=0;n<e.lines.length;++n){var l=e.lines[n],s=l.height;if(t<s)break;t-=s}return r+n}function zn(e){e=Qr(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var n=0;n<o.children.length;++n){var l=o.children[n];if(l==r)break;t+=l.height}return t}function Rn(e){var t=e.order;return null==t&&(t=e.order=zl(e.text)),t}function Fn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Bn(e,t){var r={from:K(t.from),to:Wo(t),text:On(e,t.from,t.to)};return _n(e,r,t.from.line,t.to.line+1),Hn(e,function(e){_n(e,r,t.from.line,t.to.line+1)},!0),r}function Gn(e){for(;e.length;){var t=hi(e);if(!t.ranges)break;e.pop()}}function Vn(e,t){return t?(Gn(e.done),hi(e.done)):e.done.length&&!hi(e.done).ranges?hi(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),hi(e.done)):void 0}function Un(e,t,r,n){var i=e.history;i.undone.length=0;var o,l=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>l-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Vn(i,i.lastOp==n))){var s=hi(o.changes);0==yo(t.from,t.to)&&0==yo(t.from,s.to)?s.to=Wo(t):o.changes.push(Bn(e,t))}else{var a=hi(i.done);for(a&&a.ranges||jn(e.sel,i.done),o={changes:[Bn(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=l,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,s||cl(e,"historyAdded")}function Kn(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Xn(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Kn(e,o,hi(i.done),t))?i.done[i.done.length-1]=t:jn(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&n.clearRedo!==!1&&Gn(i.undone)}function jn(e,t){var r=hi(t);r&&r.ranges&&r.equals(e)||t.push(e)}function _n(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function Yn(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function $n(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=0,i=[];n<t.text.length;++n)i.push(Yn(r[n]));return i}function qn(e,t,r){for(var n=0,i=[];n<e.length;++n){var o=e[n];if(o.ranges)i.push(r?_.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];i.push({changes:s});for(var a=0;a<l.length;++a){var u,c=l[a];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var f in c)(u=f.match(/^spans_(\d+)$/))&&di(t,Number(u[1]))>-1&&(hi(s)[f]=c[f],delete c[f])}}}return i}function Zn(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Qn(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)Zn(o.ranges[s].anchor,t,r,n),Zn(o.ranges[s].head,t,r,n)}else{for(var s=0;s<o.changes.length;++s){var a=o.changes[s];if(r<a.from.line)a.from=mo(a.from.line+n,a.from.ch),a.to=mo(a.to.line+n,a.to.ch);else if(t<=a.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function Jn(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;Qn(e.done,r,n,i),Qn(e.undone,r,n,i)}function ei(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ti(e){return e.target||e.srcElement}function ri(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),uo&&e.ctrlKey&&1==t&&(t=3),t}function ni(e,t){function r(e){return function(){e.apply(null,o)}}var n=e._handlers&&e._handlers[t];if(n){var i,o=Array.prototype.slice.call(arguments,2);Lo?i=Lo.delayedCallbacks:fl?i=fl:(i=fl=[],setTimeout(ii,0));for(var l=0;l<n.length;++l)i.push(r(n[l]))}}function ii(){var e=fl;fl=null;for(var t=0;t<e.length;++t)e[t]()}function oi(e,t,r){return cl(e,r||t.type,e,t),ei(t)||t.codemirrorIgnore}function li(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)di(r,t[n])==-1&&r.push(t[n])}function si(e,t){var r=e._handlers&&e._handlers[t];return r&&r.length>0}function ai(e){e.prototype.on=function(e,t){al(this,e,t)},e.prototype.off=function(e,t){ul(this,e,t)}}function ui(){this.id=null}function ci(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);o==-1&&(o=e.length);var l=o-n;if(o==e.length||i+l>=t)return n+Math.min(l,t-i);if(i+=o-n,i+=r-i%r,n=o+1,i>=t)return n}}function fi(e){for(;yl.length<=e;)yl.push(hi(yl)+" ");return yl[e]}function hi(e){return e[e.length-1]}function di(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function pi(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function gi(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&vi(t,r),r}function vi(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||r===!1&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function mi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function yi(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Cl(e))||t.test(e):Cl(e)}function bi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function wi(e){return e.charCodeAt(0)>=768&&Ll.test(e)}function xi(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function Ci(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Li(e,t){return Ci(e).appendChild(t)}function Si(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function ki(){return document.activeElement}function Mi(e){return new RegExp("\\b"+e+"\\b\\s*")}function Ti(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!Mi(r[n]).test(t)&&(t+=" "+r[n]);return t}function Ni(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}function Hi(){Hl||(Ai(),Hl=!0)}function Ai(){var e;al(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Sl=null,Ni(Nt)},100))}),al(window,"blur",function(){Ni(Qt)})}function Wi(e){if(null!=Sl)return Sl;var t=xi("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Li(e,t),t.offsetWidth&&(Sl=t.offsetHeight-t.clientHeight),Sl||0}function Oi(e){if(null==kl){var t=xi("span","​");Li(e,xi("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(kl=t.offsetWidth<=1&&t.offsetHeight>2&&!(Zi&&Qi<8))}return kl?xi("span","​"):xi("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Di(e){if(null!=Ml)return Ml;var t=Li(e,document.createTextNode("AخA")),r=wl(t,0,1).getBoundingClientRect();if(!r||r.left==r.right)return!1;var n=wl(t,1,2).getBoundingClientRect();return Ml=n.right-r.right<3}function Ii(e){if(null!=Il)return Il;var t=Li(e,xi("span","x")),r=t.getBoundingClientRect(),n=wl(t,0,1).getBoundingClientRect();return Il=Math.abs(r.left-n.left)>1}function Ei(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?"rtl":"ltr"),i=!0)}i||n(t,r,"ltr")}function Pi(e){return e.level%2?e.to:e.from}function zi(e){return e.level%2?e.from:e.to}function Ri(e){var t=Rn(e);return t?Pi(t[0]):0}function Fi(e){var t=Rn(e);return t?zi(hi(t)):e.text.length}function Bi(e,t){var r=Wn(e.doc,t),n=Qr(r);n!=r&&(t=En(n));var i=Rn(n),o=i?i[0].level%2?Fi(n):Ri(n):0;return mo(t,o)}function Gi(e,t){for(var r,n=Wn(e.doc,t);r=qr(n);)n=r.find(1,!0).line,t=null;var i=Rn(n),o=i?i[0].level%2?Ri(n):Fi(n):n.text.length;return mo(null==t?En(n):t,o)}function Vi(e,t){var r=Bi(e,t.line),n=Wn(e.doc,r.line),i=Rn(n);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;return mo(r.line,l?0:o)}return r}function Ui(e,t,r){var n=e[0].level;return t==n||r!=n&&t<r}function Ki(e,t){Pl=null;for(var r,n=0;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(null!=r)return Ui(e,i.level,e[r].level)?(i.from!=i.to&&(Pl=r),n):(i.from!=i.to&&(Pl=n),r);r=n}}return r}function Xi(e,t,r,n){if(!n)return t+r;do t+=r;while(t>0&&wi(e.text.charAt(t)));return t}function ji(e,t,r,n){var i=Rn(e);if(!i)return _i(e,t,r,n);for(var o=Ki(i,t),l=i[o],s=Xi(e,t,l.level%2?-r:r,n);;){if(s>l.from&&s<l.to)return s;if(s==l.from||s==l.to)return Ki(i,s)==o?s:(l=i[o+=r],r>0==l.level%2?l.to:l.from);if(l=i[o+=r],!l)return null;s=r>0==l.level%2?Xi(e,l.to,-1,n):Xi(e,l.from,1,n)}}function _i(e,t,r,n){var i=t+r;if(n)for(;i>0&&wi(e.text.charAt(i));)i+=r;return i<0||i>e.text.length?null:i}var Yi=/gecko\/\d/i.test(navigator.userAgent),$i=/MSIE \d/.test(navigator.userAgent),qi=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Zi=$i||qi,Qi=Zi&&($i?document.documentMode||6:qi[1]),Ji=/WebKit\//.test(navigator.userAgent),eo=Ji&&/Qt\/\d+\.\d+/.test(navigator.userAgent),to=/Chrome\//.test(navigator.userAgent),ro=/Opera\//.test(navigator.userAgent),no=/Apple Computer/.test(navigator.vendor),io=/KHTML\//.test(navigator.userAgent),oo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),lo=/PhantomJS/.test(navigator.userAgent),so=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ao=so||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),uo=so||/Mac/.test(navigator.platform),co=/win/i.test(navigator.platform),fo=ro&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);fo&&(fo=Number(fo[1])),fo&&fo>=15&&(ro=!1,Ji=!0);var ho=uo&&(eo||ro&&(null==fo||fo<12.11)),po=Yi||Zi&&Qi>=9,go=!1,vo=!1,mo=e.Pos=function(e,t){return this instanceof mo?(this.line=e,void(this.ch=t)):new mo(e,t)},yo=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};_.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(0!=yo(r.anchor,n.anchor)||0!=yo(r.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Y(K(this.ranges[t].anchor),K(this.ranges[t].head));return new _(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(yo(t,n.from())>=0&&yo(e,n.to())<=0)return r}return-1}},Y.prototype={from:function(){return j(this.anchor,this.head)},to:function(){return X(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var bo,wo,xo,Co={left:0,right:0,top:0,bottom:0},Lo=null,So=0,ko=null,Mo=0,To=0,No=null;Zi?No=-.53:Yi?No=15:to?No=-.7:no&&(No=-1/3);var Ho=new ui,Ao=null,Wo=e.changeEnd=function(e){return e.text?mo(e.from.line+e.text.length-1,hi(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),St(this),xt(this)},setOption:function(e,t){var r=this.options,n=r[e];r[e]==t&&"mode"!=e||(r[e]=t,Do.hasOwnProperty(e)&&at(this,Do[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Tr(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:ut(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:r&&r.opaque}),this.state.modeGen++,dt(this)}),removeOverlay:ut(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void dt(this)}}),indentLine:ut(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ee(this.doc,e)&&wr(this,e,t,r)}),indentSelection:ut(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(wr(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&yr(this));else{var o=i.from(),l=i.to(),s=Math.max(r,o.line);r=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1;for(var a=s;a<r;++a)wr(this,a,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[n].from().ch>0&&oe(this.doc,n,new Y(o,u[n].to()),pl)}}}),getTokenAt:function(e,t){var r=this.doc;e=Q(r,e);for(var n=Se(this,e.line,t),i=this.doc.mode,o=Wn(r,e.line),l=new _o(o.text,this.options.tabSize);l.pos<e.ch&&!l.eol();){l.start=l.pos;var s=hn(i,l,n)}return{start:l.start,end:l.pos,string:l.current(),type:s||null,state:n}},getTokenTypeAt:function(e){e=Q(this.doc,e);var t,r=gn(this,Wn(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf("cm-overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!Fo.hasOwnProperty(t))return Fo;var n=Fo[t],i=this.getModeAt(e);if("string"==typeof i[t])n[i[t]]&&r.push(n[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var l=n[i[t][o]];l&&r.push(l)}else i.helperType&&n[i.helperType]?r.push(n[i.helperType]):n[i.name]&&r.push(n[i.name]);for(var o=0;o<n._global.length;o++){var s=n._global[o];s.pred(i,this)&&di(r,s.val)==-1&&r.push(s.val)}return r},getStateAfter:function(e,t){var r=this.doc;return e=Z(r,null==e?r.first+r.size-1:e),Se(this,e+1,t)},cursorCoords:function(e,t){var r,n=this.doc.sel.primary();return r=null==e?n.head:"object"==typeof e?Q(this.doc,e):e?n.from():n.to(),Xe(this,r,t||"page")},charCoords:function(e,t){return Ke(this,Q(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Ue(this,e,t||"page"),Ye(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Ue(this,{top:e,left:0},t||"page").top,Pn(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,r=!0);var i=Wn(this.doc,e);return Ve(this,i,{top:0,left:0},t||"page").top+(r?this.doc.height-zn(i):0)},defaultTextHeight:function(){return qe(this.display)},defaultCharWidth:function(){return Ze(this.display)},setGutterMarker:ut(function(e,t,r){return xr(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&bi(n)&&(e.gutterMarkers=null),!0})}),clearGutter:ut(function(e){var t=this,r=t.doc,n=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,pt(t,n,"gutter"),bi(r.gutterMarkers)&&(r.gutterMarkers=null)),++n})}),addLineWidget:ut(function(e,t,r){return sn(this,e,t,r)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!ee(this.doc,e))return null;var t=e;if(e=Wn(this.doc,e),!e)return null}else{var t=En(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=Xe(this,Q(this.doc,e));var l=e.bottom,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==n)l=e.top;else if("above"==n||"near"==n){var a=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(l=e.bottom),
s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&gr(this,s,l,s+t.offsetWidth,l+t.offsetHeight)},triggerOnKeyDown:ut(_t),triggerOnKeyPress:ut(qt),triggerOnKeyUp:$t,execCommand:function(e){if(Vo.hasOwnProperty(e))return Vo[e](this)},findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var o=0,l=Q(this.doc,e);o<t&&(l=Lr(this.doc,l,i,r,n),!l.hitSide);++o);return l},moveH:ut(function(e,t){var r=this;r.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?Lr(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},vl)}),deleteH:ut(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Cr(this,function(r){var i=Lr(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=1,o=n;t<0&&(i=-1,t=-t);for(var l=0,s=Q(this.doc,e);l<t;++l){var a=Xe(this,s,"div");if(null==o?o=a.left:a.left=o,s=Sr(this,a,i,r),s.hitSide)break}return s},moveV:ut(function(e,t){var r=this,n=this.doc,i=[],o=!r.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return e<0?l.from():l.to();var s=Xe(r,l.head,"div");null!=l.goalColumn&&(s.left=l.goalColumn),i.push(s.left);var a=Sr(r,s,e,t);return"page"==t&&l==n.sel.primary()&&mr(r,null,Ke(r,a,"div").top-s.top),a},vl),i.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=i[l]}),findWordAt:function(e){var t=this.doc,r=Wn(t,e.line).text,n=e.ch,i=e.ch;if(r){var o=this.getHelper(e,"wordChars");(e.xRel<0||i==r.length)&&n?--n:++i;for(var l=r.charAt(n),s=yi(l,o)?function(e){return yi(e,o)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!yi(e)};n>0&&s(r.charAt(n-1));)--n;for(;i<r.length&&s(r.charAt(i));)++i}return new Y(mo(e.line,n),mo(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Nl(this.display.cursorDiv,"CodeMirror-overwrite"):Tl(this.display.cursorDiv,"CodeMirror-overwrite"),cl(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return ki()==this.display.input},scrollTo:ut(function(e,t){null==e&&null==t||br(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=hl;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:ut(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:mo(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)br(this),this.curOp.scrollToPos=e;else{var r=vr(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:ut(function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=r(e)),null!=t&&(n.display.wrapper.style.height=r(t)),n.options.lineWrapping&&Re(this);var i=n.display.viewFrom;n.doc.iter(i,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){pt(n,i,"widget");break}++i}),n.curOp.forceUpdate=!0,cl(n,"refresh",this)}),operation:function(e){return st(this,e)},refresh:ut(function(){var e=this.display.cachedTextHeight;dt(this),this.curOp.forceUpdate=!0,Fe(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),c(this),(null==e||Math.abs(e-qe(this.display))>.5)&&l(this),cl(this,"refresh",this)}),swapDoc:ut(function(e){var t=this.doc;return t.cm=null,An(this,e),Fe(this),Lt(this),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ni(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ai(e);var Oo=e.defaults={},Do=e.optionHandlers={},Io=e.Init={toString:function(){return"CodeMirror.Init"}};kr("value","",function(e,t){e.setValue(t)},!0),kr("mode",null,function(e,t){e.doc.modeOption=t,r(e)},!0),kr("indentUnit",2,r,!0),kr("indentWithTabs",!1),kr("smartIndent",!0),kr("tabSize",4,function(e){n(e),Fe(e),dt(e)},!0),kr("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),e.refresh()},!0),kr("specialCharPlaceholder",bn,function(e){e.refresh()},!0),kr("electricChars",!0),kr("rtlMoveVisually",!co),kr("wholeLineUpdateBefore",!0),kr("theme","default",function(e){s(e),a(e)},!0),kr("keyMap","default",function(t,r,n){var i=Tr(r),o=n!=e.Init&&Tr(n);o&&o.detach&&o.detach(t,i),i.attach&&i.attach(t,o||null)}),kr("extraKeys",null),kr("lineWrapping",!1,i,!0),kr("gutters",[],function(e){d(e.options),a(e)},!0),kr("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?x(e.display)+"px":"0",e.refresh()},!0),kr("coverGutterNextToScrollbar",!1,v,!0),kr("lineNumbers",!1,function(e){d(e.options),a(e)},!0),kr("firstLineNumber",1,a,!0),kr("lineNumberFormatter",function(e){return e},a,!0),kr("showCursorWhenSelecting",!1,me,!0),kr("resetSelectionOnContextMenu",!0),kr("readOnly",!1,function(e,t){"nocursor"==t?(Qt(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Lt(e))}),kr("disableInput",!1,function(e,t){t||Lt(e)},!0),kr("dragDrop",!0),kr("cursorBlinkRate",530),kr("cursorScrollMargin",0),kr("cursorHeight",1,me,!0),kr("singleCursorHeightPerLine",!0,me,!0),kr("workTime",100),kr("workDelay",100),kr("flattenSpans",!0,n,!0),kr("addModeClass",!1,n,!0),kr("pollInterval",100),kr("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),kr("historyEventDelay",1250),kr("viewportMargin",10,function(e){e.refresh()},!0),kr("maxHighlightLength",1e4,n,!0),kr("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),kr("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),kr("autofocus",null);var Eo=e.modes={},Po=e.mimeModes={};e.defineMode=function(t,r){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(r.dependencies=Array.prototype.slice.call(arguments,2)),Eo[t]=r},e.defineMIME=function(e,t){Po[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Po.hasOwnProperty(t))t=Po[t];else if(t&&"string"==typeof t.name&&Po.hasOwnProperty(t.name)){var r=Po[t.name];"string"==typeof r&&(r={name:r}),t=gi(r,t),t.name=r.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,r){var r=e.resolveMode(r),n=Eo[r.name];if(!n)return e.getMode(t,"text/plain");var i=n(t,r);if(zo.hasOwnProperty(r.name)){var o=zo[r.name];for(var l in o)o.hasOwnProperty(l)&&(i.hasOwnProperty(l)&&(i["_"+l]=i[l]),i[l]=o[l])}if(i.name=r.name,r.helperType&&(i.helperType=r.helperType),r.modeProps)for(var l in r.modeProps)i[l]=r.modeProps[l];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var zo=e.modeExtensions={};e.extendMode=function(e,t){var r=zo.hasOwnProperty(e)?zo[e]:zo[e]={};vi(t,r)},e.defineExtension=function(t,r){e.prototype[t]=r},e.defineDocExtension=function(e,t){rl.prototype[e]=t},e.defineOption=kr;var Ro=[];e.defineInitHook=function(e){Ro.push(e)};var Fo=e.helpers={};e.registerHelper=function(t,r,n){Fo.hasOwnProperty(t)||(Fo[t]=e[t]={_global:[]}),Fo[t][r]=n},e.registerGlobalHelper=function(t,r,n,i){e.registerHelper(t,r,i),Fo[t]._global.push({pred:n,val:i})};var Bo=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r},Go=e.startState=function(e,t,r){return!e.startState||e.startState(t,r)};e.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var Vo=e.commands={selectAll:function(e){e.setSelection(mo(e.firstLine(),0),mo(e.lastLine()),pl)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),pl)},killLine:function(e){Cr(e,function(t){if(t.empty()){var r=Wn(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:mo(t.head.line+1,0)}:{from:t.head,to:mo(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Cr(e,function(t){return{from:mo(t.from().line,0),to:Q(e.doc,mo(t.to().line+1,0))}})},delLineLeft:function(e){Cr(e,function(e){return{from:mo(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Cr(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){Cr(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(mo(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(mo(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Bi(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return Vi(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Gi(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},vl)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},vl)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?Vi(e,t.head):n},vl)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=ml(e.getLine(o.line),o.ch,n);t.push(new Array(n-l%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){st(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++){var i=t[n].head,o=Wn(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new mo(i.line,i.ch-1)),i.ch>0)i=new mo(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),mo(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var l=Wn(e.doc,i.line-1).text;l&&e.replaceRange(o.charAt(0)+"\n"+l.charAt(l.length-1),mo(i.line-1,l.length-1),mo(i.line,1),"+transpose")}r.push(new Y(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){st(e,function(){for(var t=e.listSelections().length,r=0;r<t;r++){var n=e.listSelections()[r];e.replaceRange("\n",n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0),yr(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},Uo=e.keyMap={};Uo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Uo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Uo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Uo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Uo.default=uo?Uo.macDefault:Uo.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=pi(r.split(" "),Mr),o=0;o<i.length;o++){var l,s;o==i.length-1?(s=r,l=n):(s=i.slice(0,o+1).join(" "),l="...");var a=t[s];if(a){if(a!=l)throw new Error("Inconsistent bindings for "+s)}else t[s]=l}delete e[r]}for(var u in t)e[u]=t[u];return e};var Ko=e.lookupKey=function(e,t,r){t=Tr(t);var n=t[e];if(n===!1)return"nothing";if("..."===n)return"multi";if(null!=n&&r(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ko(e,t.fallthrough,r);for(var i=0;i<t.fallthrough.length;i++){var o=Ko(e,t.fallthrough[i],r);if(o)return o}}},Xo=e.isModifierKey=function(e){var t="string"==typeof e?e:El[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},jo=e.keyName=function(e,t){if(ro&&34==e.keyCode&&e.char)return!1;var r=El[e.keyCode],n=r;return null!=n&&!e.altGraphKey&&(e.altKey&&"Alt"!=r&&(n="Alt-"+n),(ho?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(n="Ctrl-"+n),(ho?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=r&&(n="Shift-"+n),n)};e.fromTextArea=function(t,r){function n(){t.value=a.getValue()}if(r||(r={}),r.value=t.value,!r.tabindex&&t.tabindex&&(r.tabindex=t.tabindex),!r.placeholder&&t.placeholder&&(r.placeholder=t.placeholder),null==r.autofocus){var i=ki();r.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(al(t.form,"submit",n),!r.leaveSubmitMethodAlone)){var o=t.form,l=o.submit;try{var s=o.submit=function(){n(),o.submit=l,o.submit(),o.submit=s}}catch(e){}}t.style.display="none";var a=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},r);return a.save=n,a.getTextArea=function(){return t},a.toTextArea=function(){a.toTextArea=isNaN,n(),t.parentNode.removeChild(a.getWrapperElement()),t.style.display="",t.form&&(ul(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=l))},a};var _o=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};_o.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));if(r)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ml(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ml(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ml(this.string,null,this.tabSize)-(this.lineStart?ml(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(i(o)==i(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Yo=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};ai(Yo),Yo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Qe(e),si(this,"clear")){var r=this.find();r&&ni(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=Ir(l.markedSpans,this);e&&!this.collapsed?pt(e,En(l),"text"):e&&(null!=s.to&&(i=En(l)),null!=s.from&&(n=En(l))),l.markedSpans=Er(l.markedSpans,s),null==s.from&&this.collapsed&&!rn(this.doc,l)&&e&&In(l,qe(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var a=Qr(this.lines[o]),u=f(a);u>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&dt(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&he(e.doc)),e&&ni(e,"markerCleared",e,this),t&&et(e),this.parent&&this.parent.clear()}},Yo.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var r,n,i=0;i<this.lines.length;++i){var o=this.lines[i],l=Ir(o.markedSpans,this);if(null!=l.from&&(r=mo(t?o:En(o),l.from),e==-1))return r;if(null!=l.to&&(n=mo(t?o:En(o),l.to),1==e))return n}return r&&{from:r,to:n}},Yo.prototype.changed=function(){var e=this.find(-1,!0),t=this,r=this.doc.cm;e&&r&&st(r,function(){var n=e.line,i=En(e.line),o=Oe(r,i);if(o&&(ze(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!rn(t.doc,n)&&null!=t.height){var l=t.height;t.height=null;var s=ln(t)-l;s&&In(n,n.height+s)}})},Yo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&di(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Yo.prototype.detachLine=function(e){if(this.lines.splice(di(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var $o=0,qo=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};ai(qo),qo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ni(this,"clear")}},qo.prototype.find=function(e,t){return this.primary.find(e,t)};var Zo=e.LineWidget=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=e,this.node=t};ai(Zo),Zo.prototype.clear=function(){var e=this.cm,t=this.line.widgets,r=this.line,n=En(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=ln(this);st(e,function(){on(e,r,-o),pt(e,n,"widget"),In(r,Math.max(0,r.height-o))})}},Zo.prototype.changed=function(){var e=this.height,t=this.cm,r=this.line;this.height=null;var n=ln(this)-e;n&&st(t,function(){t.curOp.forceUpdate=!0,on(t,r,n),In(r,r.height+n)})};var Qo=e.Line=function(e,t,r){this.text=e,Kr(this,t),this.height=r?r(this):1};ai(Qo),Qo.prototype.lineNo=function(){return En(this)};var Jo={},el={};Tn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,un(i),ni(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},Nn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var o=Math.min(t,i-e),l=n.height;if(n.removeInner(e,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Tn))){var s=[];this.collapse(s),this.children=[new Tn(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var l=i.lines.splice(i.lines.length-25,25),s=new Tn(l);i.height-=s.height,this.children.splice(n+1,0,s),s.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Nn(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=di(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Nn(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e);if(i.iterN(e,l,r))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var tl=0,rl=e.Doc=function(e,t,r){if(!(this instanceof rl))return new rl(e,t,r);null==r&&(r=0),Nn.call(this,[new Tn([new Qo("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var n=mo(r,0);this.sel=q(n),this.history=new Fn(null),this.id=++tl,this.modeOption=t,"string"==typeof e&&(e=Wl(e)),Mn(this,{from:n,to:n,text:e}),ue(this,q(n),pl)};rl.prototype=gi(Nn.prototype,{constructor:rl,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Dn(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:ct(function(e){var t=mo(this.first,0),r=this.first+this.size-1;lr(this,{from:t,to:mo(r,Wn(this,r).text.length),text:Wl(e),origin:"setValue"},!0),ue(this,q(t))}),replaceRange:function(e,t,r,n){t=Q(this,t),r=r?Q(this,r):t,hr(this,e,t,r,n)},getRange:function(e,t,r){var n=On(this,Q(this,e),Q(this,t));return r===!1?n:n.join(r||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ee(this,e))return Wn(this,e)},getLineNumber:function(e){return En(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Wn(this,e)),Qr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Q(this,e)},getCursor:function(e){var t,r=this.sel.primary();return t=null==e||"head"==e?r.head:"anchor"==e?r.anchor:"end"==e||"to"==e||e===!1?r.to():r.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ct(function(e,t,r){le(this,Q(this,"number"==typeof e?mo(e,t||0):e),null,r)}),setSelection:ct(function(e,t,r){le(this,Q(this,e),Q(this,t||e),r)}),extendSelection:ct(function(e,t,r){ne(this,Q(this,e),t&&Q(this,t),r)}),extendSelections:ct(function(e,t){ie(this,te(this,e,t))}),extendSelectionsBy:ct(function(e,t){ie(this,pi(this.sel.ranges,e),t)}),setSelections:ct(function(e,t,r){if(e.length){for(var n=0,i=[];n<e.length;n++)i[n]=new Y(Q(this,e[n].anchor),Q(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ue(this,$(i,t),r)}}),addSelection:ct(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new Y(Q(this,e),Q(this,t||e))),ue(this,$(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=On(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=On(this,r[n].from(),r[n].to());e!==!1&&(i=i.join(e||"\n")),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:ct(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];n[o]={from:l.from(),to:l.to(),text:Wl(e[o]),origin:r}}for(var s=t&&"end"!=t&&ir(this,n,t),o=n.length-1;o>=0;o--)lr(this,n[o]);s?ae(this,s):this.cm&&yr(this.cm)}),undo:ct(function(){ar(this,"undo")}),redo:ct(function(){ar(this,"redo")}),undoSelection:ct(function(){ar(this,"undo",!0)}),redoSelection:ct(function(){ar(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new Fn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:qn(this.history.done),undone:qn(this.history.undone)}},setHistory:function(e){var t=this.history=new Fn(this.history.maxGeneration);t.done=qn(e.done.slice(0),null,!0),t.undone=qn(e.undone.slice(0),null,!0)},addLineClass:ct(function(e,t,r){return xr(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(new RegExp("(?:^|\\s)"+r+"(?:$|\\s)").test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:ct(function(e,t,r){return xr(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+r+"(?:$|\\s+)"));if(!o)return!1;var l=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&l!=i.length?" ":"")+i.slice(l)||null}return!0})}),markText:function(e,t,r){return Nr(this,Q(this,e),Q(this,t),r,"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Q(this,e),Nr(this,e,e,r,"bookmark")},findMarksAt:function(e){e=Q(this,e);var t=[],r=Wn(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=Q(this,e),t=Q(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var a=l[s];i==e.line&&e.ch>a.to||null==a.from&&i!=e.line||i==t.line&&a.from>t.ch||r&&!r(a.marker)||n.push(a.marker.parent||a.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first;return this.iter(function(n){var i=n.text.length+1;return i>e?(t=e,!0):(e-=i,void++r)}),Q(this,mo(r,t))},indexFromPos:function(e){e=Q(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new rl(Dn(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new rl(Dn(this,t,r),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Wr(n,Ar(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var r=0;r<this.linked.length;++r){var n=this.linked[r];if(n.doc==t){this.linked.splice(r,1),t.unlinkDoc(this),Or(Ar(this));break}}if(t.history==this.history){var i=[t.id];Hn(t,function(e){i.push(e.id)},!0),t.history=new Fn(null),t.history.done=qn(this.history.done,i),t.history.undone=qn(this.history.undone,i)}},iterLinkedDocs:function(e){Hn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),rl.prototype.eachLine=rl.prototype.iter;var nl="iter insert remove copy getEditor".split(" ");for(var il in rl.prototype)rl.prototype.hasOwnProperty(il)&&di(nl,il)<0&&(e.prototype[il]=function(e){return function(){return e.apply(this.doc,arguments)}}(rl.prototype[il]));ai(rl);var ol=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},ll=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},sl=e.e_stop=function(e){ol(e),ll(e)},al=e.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}},ul=e.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}},cl=e.signal=function(e,t){var r=e._handlers&&e._handlers[t];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)},fl=null,hl=30,dl=e.Pass={toString:function(){
return"CodeMirror.Pass"}},pl={scroll:!1},gl={origin:"*mouse"},vl={origin:"+move"};ui.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var ml=e.countColumn=function(e,t,r,n,i){null==t&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var o=n||0,l=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}},yl=[""],bl=function(e){e.select()};so?bl=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Zi&&(bl=function(e){try{e.select()}catch(e){}}),[].indexOf&&(di=function(e,t){return e.indexOf(t)}),[].map&&(pi=function(e,t){return e.map(t)});var wl,xl=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Cl=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||xl.test(e))},Ll=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;wl=document.createRange?function(e,t,r){var n=document.createRange();return n.setEnd(e,r),n.setStart(e,t),n}:function(e,t,r){var n=document.body.createTextRange();return n.moveToElementText(e.parentNode),n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n},Zi&&Qi<11&&(ki=function(){try{return document.activeElement}catch(e){return document.body}});var Sl,kl,Ml,Tl=e.rmClass=function(e,t){var r=Mi(t);r.test(e.className)&&(e.className=e.className.replace(r,""))},Nl=e.addClass=function(e,t){Mi(t).test(e.className)||(e.className+=" "+t)},Hl=!1,Al=function(){if(Zi&&Qi<9)return!1;var e=xi("div");return"draggable"in e||"dragDrop"in e}(),Wl=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");l!=-1?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Ol=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Dl=function(){var e=xi("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Il=null,El={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=El,function(){for(var e=0;e<10;e++)El[e+48]=El[e+96]=String(e);for(var e=65;e<=90;e++)El[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)El[e+111]=El[e+63235]="F"+e}();var Pl,zl=function(){function e(e){return e<=247?r.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1773?n.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,r){this.level=e,this.from=t,this.to=r}var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,l=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,u="L";return function(r){if(!i.test(r))return!1;for(var n,c=r.length,f=[],h=0;h<c;++h)f.push(n=e(r.charCodeAt(h)));for(var h=0,d=u;h<c;++h){var n=f[h];"m"==n?f[h]=d:d=n}for(var h=0,p=u;h<c;++h){var n=f[h];"1"==n&&"r"==p?f[h]="n":l.test(n)&&(p=n,"r"==n&&(f[h]="R"))}for(var h=1,d=f[0];h<c-1;++h){var n=f[h];"+"==n&&"1"==d&&"1"==f[h+1]?f[h]="1":","!=n||d!=f[h+1]||"1"!=d&&"n"!=d||(f[h]=d),d=n}for(var h=0;h<c;++h){var n=f[h];if(","==n)f[h]="N";else if("%"==n){for(var g=h+1;g<c&&"%"==f[g];++g);for(var v=h&&"!"==f[h-1]||g<c&&"1"==f[g]?"1":"N",m=h;m<g;++m)f[m]=v;h=g-1}}for(var h=0,p=u;h<c;++h){var n=f[h];"L"==p&&"1"==n?f[h]="L":l.test(n)&&(p=n)}for(var h=0;h<c;++h)if(o.test(f[h])){for(var g=h+1;g<c&&o.test(f[g]);++g);for(var y="L"==(h?f[h-1]:u),b="L"==(g<c?f[g]:u),v=y||b?"L":"R",m=h;m<g;++m)f[m]=v;h=g-1}for(var w,x=[],h=0;h<c;)if(s.test(f[h])){var C=h;for(++h;h<c&&s.test(f[h]);++h);x.push(new t(0,C,h))}else{var L=h,S=x.length;for(++h;h<c&&"L"!=f[h];++h);for(var m=L;m<h;)if(a.test(f[m])){L<m&&x.splice(S,0,new t(1,L,m));var k=m;for(++m;m<h&&a.test(f[m]);++m);x.splice(S,0,new t(2,k,m)),L=m}else++m;L<h&&x.splice(S,0,new t(1,L,h))}return 1==x[0].level&&(w=r.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==hi(x).level&&(w=r.match(/\s+$/))&&(hi(x).to-=w[0].length,x.push(new t(0,c-w[0].length,c))),x[0].level!=hi(x).level&&x.push(new t(x[0].level,c,c)),x}}();return e.version="4.7.1",e});</script>
  <script>"use strict";!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){t.defineMode("light-program",function(t,e){function i(t,e){var i,r=!1;for(i=t.next();void 0!==i;){if(i===e&&!r)return!1;r=!r&&"\\"===i,i=t.next()}return r}function r(t){var e,i,r;return r=t.next(),/[\w\-_]/.test(r)&&(t.eatWhile(/[\w\-_]/),i=t.current(),e=p[i])?e:"error"}function n(t){return t.next(),"error"}function o(t,e){var i,r,o;return o=t.next(),/[\w\-_]/.test(o)&&(t.eatWhile(/[\w\-_]/),r=t.current(),i=d[r])?i:(e.tokenize=n,"error")}function u(t,e){var i,r,u;return u=t.next(),/[\w\-_]/.test(u)&&(t.eatWhile(/[\w\-_]/),r=t.current(),i=w[r],"when"===r?e.tokenize=o:e.tokenize=n,i)?i:(e.tokenize=n,"error")}function a(t,e){var i;return i=t.next(),!/\d/.test(i)&&/[\w\-_]/.test(i)?(t.eatWhile(/[\w\-_]/),e.tokenize=n,"atom"):(t.skipToEnd(),e.tokenize=h,"error")}function s(t,e){var i,r,o;return o=t.next(),/[\w\-_]/.test(o)&&(t.eatWhile(/[\w\-_]/),r=t.current(),i=p[r])?(e.tokenize=n,i):(e.tokenize=n,"error")}function b(t,e){var i,o,u;return u=t.next(),!/\d/.test(u)&&/[\w\-_]/.test(u)?(t.eatWhile(/[\w\-_]/),o=t.current(),(i=k[o])?(e.tokenize=r,i):(i=g[o])?(e.tokenize=s,i):(e.tokenize=h,i=c[o],i||"variable")):(e.tokenize=n,"error")}function l(t,e){var i,r;return r=t.next(),/[\w\-_]/.test(r)&&(t.eatWhile(/[\w\-_]/),i=t.current(),"if"===i)?(e.tokenize=b,c[i]):(e.tokenize=n,"error")}function h(t,e){var i,r,n;return n=t.next(),/\d/.test(n)?"0"===n&&t.eat("x")?(t.eatWhile(/[0-9a-fA-F]/),"number"):(t.eatWhile(/\d/),"number"):/[\w\-_]/.test(n)?(t.eatWhile(/[\w\-_]/),t.eat(":")?"atom":(r=t.current(),"run"===r&&(e.tokenize=u),"skip"===r&&(e.tokenize=l),"goto"===r&&(e.tokenize=a),i=c[r],i||"variable")):void 0}var c={abs:"operator",all:"qualifier",const:"def",clicks:"built-in",end:"keyword",fade:"keyword",gear:"built-in",global:"keyword",goto:"keyword",if:"keyword",led:"def",leds:"qualifier",master:"qualifier",or:"keyword",random:"built-in",run:"keyword",skip:"keyword",slave:"qualifier",sleep:"keyword",steering:"built-in",stepsize:"keyword",throttle:"built-in",use:"keyword",var:"def",when:"keyword"},w={always:"attribute",when:"keyword"},d={"blink-flag":"attribute","blink-left":"attribute","blink-right":"attribute",braking:"attribute",forward:"attribute","gear-changed":"attribute",hazard:"attribute","indicator-left":"attribute","indicator-right":"attribute",initializing:"attribute","light-switch-position-0":"attribute","light-switch-position-1":"attribute","light-switch-position-2":"attribute","light-switch-position-3":"attribute","light-switch-position-4":"attribute","light-switch-position-5":"attribute","light-switch-position-6":"attribute","light-switch-position-7":"attribute","light-switch-position-8":"attribute",neutral:"attribute","no-signal":"attribute",or:"keyword",reversing:"attribute","reversing-setup-steering":"attribute","reversing-setup-throttle":"attribute","servo-output-setup-centre":"attribute","servo-output-setup-left":"attribute","servo-output-setup-right":"attribute","winch-disabled":"attribute","winch-idle":"attribute","winch-in":"attribute","winch-out":"attribute"},k={any:"keyword",all:"keyword",none:"keyword"},g={is:"keyword",not:"keyword"},p={"blink-flag":"attribute","blink-left":"attribute","blink-right":"attribute",braking:"attribute",forward:"attribute",hazard:"attribute","indicator-left":"attribute","indicator-right":"attribute",initializing:"attribute","light-switch-position-0":"attribute","light-switch-position-1":"attribute","light-switch-position-2":"attribute","light-switch-position-3":"attribute","light-switch-position-4":"attribute","light-switch-position-5":"attribute","light-switch-position-6":"attribute","light-switch-position-7":"attribute","light-switch-position-8":"attribute",neutral:"attribute","no-signal":"attribute",reversing:"attribute","reversing-setup-steering":"attribute","reversing-setup-throttle":"attribute","servo-output-setup-centre":"attribute","servo-output-setup-left":"attribute","servo-output-setup-right":"attribute","winch-disabled":"attribute","winch-idle":"attribute","winch-in":"attribute","winch-out":"attribute"};return{startState:function(){return{tokenize:h}},token:function(t,e){var r;return t.sol()&&(e.tokenize=h),t.eatSpace()?null:(r=t.next(),"/"===r&&t.eat("/")?(t.skipToEnd(),"comment"):";"===r?(t.skipToEnd(),"comment"):'"'===r?(i(t,'"'),"string"):(t.backUp(1),e.tokenize(t,e)))},lineComment:"//"}})});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function o(e,o,n){var t,i=e.getWrapperElement();return t=i.appendChild(document.createElement("div")),n?t.className="CodeMirror-dialog CodeMirror-dialog-bottom":t.className="CodeMirror-dialog CodeMirror-dialog-top","string"==typeof o?t.innerHTML=o:t.appendChild(o),t}function n(e,o){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=o}e.defineExtension("openDialog",function(t,i,r){function u(e){if("string"==typeof e)s.value=e;else{if(f)return;f=!0,c.parentNode.removeChild(c),a.focus(),r.onClose&&r.onClose(c)}}r||(r={}),n(this,null);var l,c=o(this,t,r.bottom),f=!1,a=this,s=c.getElementsByTagName("input")[0];return s?(r.value&&(s.value=r.value,s.select()),r.onInput&&e.on(s,"input",function(e){r.onInput(e,s.value,u)}),r.onKeyUp&&e.on(s,"keyup",function(e){r.onKeyUp(e,s.value,u)}),e.on(s,"keydown",function(o){r&&r.onKeyDown&&r.onKeyDown(o,s.value,u)||((27==o.keyCode||r.closeOnEnter!==!1&&13==o.keyCode)&&(s.blur(),e.e_stop(o),u()),13==o.keyCode&&i(s.value))}),r.closeOnBlur!==!1&&e.on(s,"blur",u),s.focus()):(l=c.getElementsByTagName("button")[0])&&(e.on(l,"click",function(){u(),a.focus()}),r.closeOnBlur!==!1&&e.on(l,"blur",u),l.focus()),u}),e.defineExtension("openConfirm",function(t,i,r){function u(){f||(f=!0,l.parentNode.removeChild(l),a.focus())}n(this,null);var l=o(this,t,r&&r.bottom),c=l.getElementsByTagName("button"),f=!1,a=this,s=1;c[0].focus();for(var d=0;d<c.length;++d){var p=c[d];!function(o){e.on(p,"click",function(n){e.e_preventDefault(n),u(),o&&o(a)})}(i[d]),e.on(p,"blur",function(){--s,setTimeout(function(){s<=0&&u()},200)}),e.on(p,"focus",function(){++s})}}),e.defineExtension("openNotification",function(t,i){function r(){c||(c=!0,clearTimeout(u),l.parentNode.removeChild(l))}n(this,r);var u,l=o(this,t,i&&i.bottom),c=!1,f=i&&"undefined"!=typeof i.duration?i.duration:5e3;return e.on(l,"click",function(o){e.e_preventDefault(o),r()}),f&&(u=setTimeout(r,f)),r})});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",o),e.removeLineClass(e.state.activeLines[t],"background",a)}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function i(e,i){for(var r=[],s=0;s<i.length;s++){var c=i[s];if(c.empty()){var f=e.getLineHandleVisualStart(c.head.line);r[r.length-1]!=f&&r.push(f)}}n(e.state.activeLines,r)||e.operation(function(){t(e);for(var n=0;n<r.length;n++)e.addLineClass(r[n],"wrap",o),e.addLineClass(r[n],"background",a);e.state.activeLines=r})}function r(e,t){i(e,t.ranges)}var o="CodeMirror-activeline",a="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(n,o,a){var s=a&&a!=e.Init;o&&!s?(n.state.activeLines=[],i(n,n.listSelections()),n.on("beforeSelectionChange",r)):!o&&s&&(n.off("beforeSelectionChange",r),t(n),delete n.state.activeLines)})});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function n(e,n){var t=e.getRange(l(n.line,n.ch-1),l(n.line,n.ch+1));return 2==t.length?t:null}function t(n,t,r){var i=n.getLine(t.line),o=n.getTokenAt(t);if(/\bstring2?\b/.test(o.type))return!1;var a=new e.StringStream(i.slice(0,t.ch)+r+i.slice(t.ch),4);for(a.pos=a.start=o.start;;){var s=n.getMode().token(a,o.state);if(a.pos>=t.ch+1)return/\bstring2?\b/.test(s);a.start=a.pos}}function r(r){for(var i={name:"autoCloseBrackets",Backspace:function(t){if(t.getOption("disableInput"))return e.Pass;for(var i=t.listSelections(),o=0;o<i.length;o++){if(!i[o].empty())return e.Pass;var a=n(t,i[o].head);if(!a||r.indexOf(a)%2!=0)return e.Pass}for(var o=i.length-1;o>=0;o--){var s=i[o].head;t.replaceRange("",l(s.line,s.ch-1),l(s.line,s.ch+1))}}},o="",a=0;a<r.length;a+=2)(function(n,r){o+=r,i["'"+n+"'"]=function(i){if(i.getOption("disableInput"))return e.Pass;for(var a,c,f=i.listSelections(),u=0;u<f.length;u++){var h,g=f[u],d=g.head,c=i.getRange(d,l(d.line,d.ch+1));if(g.empty())if(n==r&&c==r)h=i.getRange(d,l(d.line,d.ch+3))==n+n+n?"skipThree":"skip";else if(n==r&&d.ch>1&&i.getRange(l(d.line,d.ch-2),d)==n+n&&(d.ch<=2||i.getRange(l(d.line,d.ch-3),l(d.line,d.ch-2))!=n))h="addFour";else if('"'==n||"'"==n){if(e.isWordChar(c)||!t(i,d,n))return e.Pass;h="both"}else{if(!(i.getLine(d.line).length==d.ch||o.indexOf(c)>=0||s.test(c)))return e.Pass;h="both"}else h="surround";if(a){if(a!=h)return e.Pass}else a=h}i.operation(function(){if("skip"==a)i.execCommand("goCharRight");else if("skipThree"==a)for(var e=0;e<3;e++)i.execCommand("goCharRight");else if("surround"==a){for(var t=i.getSelections(),e=0;e<t.length;e++)t[e]=n+t[e]+r;i.replaceSelections(t,"around")}else"both"==a?(i.replaceSelection(n+r,null),i.execCommand("goCharLeft")):"addFour"==a&&(i.replaceSelection(n+n+n+n,"before"),i.execCommand("goCharRight"))})},n!=r&&(i["'"+r+"'"]=function(n){for(var t=n.listSelections(),i=0;i<t.length;i++){var o=t[i];if(!o.empty()||n.getRange(o.head,l(o.head.line,o.head.ch+1))!=r)return e.Pass}n.execCommand("goCharRight")})})(r.charAt(a),r.charAt(a+1));return i}function i(t){return function(r){if(r.getOption("disableInput"))return e.Pass;for(var i=r.listSelections(),o=0;o<i.length;o++){if(!i[o].empty())return e.Pass;var a=n(r,i[o].head);if(!a||t.indexOf(a)%2!=0)return e.Pass}r.operation(function(){r.replaceSelection("\n\n",null),r.execCommand("goCharLeft"),i=r.listSelections();for(var e=0;e<i.length;e++){var n=i[e].head.line;r.indentLine(n,null,!0),r.indentLine(n+1,null,!0)}})}}var o="()[]{}''\"\"",a="[]{}",s=/\s/,l=e.Pos;e.defineOption("autoCloseBrackets",!1,function(n,t,s){if(s!=e.Init&&s&&n.removeKeyMap("autoCloseBrackets"),t){var l=o,c=a;"string"==typeof t?l=t:"object"==typeof t&&(null!=t.pairs&&(l=t.pairs),null!=t.explode&&(c=t.explode));var f=r(l);c&&(f.Enter=i(c)),n.addKeyMap(f)}})});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function o(e,o){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),o?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(o){e.lastIndex=o.pos;var r=e.exec(o.string);return r&&r.index==o.pos?(o.pos+=r[0].length,"searching"):void(r?o.pos=r.index:o.skipToEnd())}}}function r(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function n(e){return e.state.search||(e.state.search=new r)}function t(e){return"string"==typeof e&&e==e.toLowerCase()}function i(e,o,r){return e.getSearchCursor(o,r,t(o))}function c(e,o,r,n,t){e.openDialog?e.openDialog(o,t,{value:n}):t(prompt(r,n))}function a(e,o,r,n){e.openConfirm?e.openConfirm(o,n):confirm(r)&&n[0]()}function s(e){var o=e.match(/^\/(.*)\/([a-z]*)$/);return o?(e=new RegExp(o[1],o[2].indexOf("i")==-1?"":"i"),e.test("")&&(e=/x^/)):""==e&&(e=/x^/),e}function u(e,r){var i=n(e);return i.query?f(e,r):void c(e,d,"Search for:",e.getSelection(),function(n){e.operation(function(){n&&!i.query&&(i.query=s(n),e.removeOverlay(i.overlay,t(i.query)),i.overlay=o(i.query,t(i.query)),e.addOverlay(i.overlay),i.posFrom=i.posTo=e.getCursor(),f(e,r))})})}function f(o,r){o.operation(function(){var t=n(o),c=i(o,t.query,r?t.posFrom:t.posTo);(c.find(r)||(c=i(o,t.query,r?e.Pos(o.lastLine()):e.Pos(o.firstLine(),0)),c.find(r)))&&(o.setSelection(c.from(),c.to()),o.scrollIntoView({from:c.from(),to:c.to()}),t.posFrom=c.from(),t.posTo=c.to())})}function l(e){e.operation(function(){var o=n(e);o.query&&(o.query=null,e.removeOverlay(o.overlay))})}function p(e,o){e.getOption("readOnly")||c(e,m,"Replace:",e.getSelection(),function(r){r&&(r=s(r),c(e,y,"Replace with:","",function(n){if(o)e.operation(function(){for(var o=i(e,r);o.findNext();)if("string"!=typeof r){var t=e.getRange(o.from(),o.to()).match(r);o.replace(n.replace(/\$(\d)/g,function(e,o){return t[o]}))}else o.replace(n)});else{l(e);var t=i(e,r,e.getCursor()),c=function(){var o,n=t.from();!(o=t.findNext())&&(t=i(e,r),!(o=t.findNext())||n&&t.from().line==n.line&&t.from().ch==n.ch)||(e.setSelection(t.from(),t.to()),e.scrollIntoView({from:t.from(),to:t.to()}),a(e,g,"Replace?",[function(){s(o)},c]))},s=function(e){t.replace("string"==typeof r?n:n.replace(/\$(\d)/g,function(o,r){return e[r]})),c()};c()}}))})}var d='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',m='Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',y='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',g="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";e.commands.find=function(e){l(e),u(e)},e.commands.findNext=u,e.commands.findPrev=function(e){u(e,!0)},e.commands.clearSearch=l,e.commands.replace=p,e.commands.replaceAll=function(e){p(e,!0)}});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,r,o){if(this.atOccurrence=!1,this.doc=e,null==o&&"string"==typeof t&&(o=!1),r=r?e.clipPos(r):i(0,0),this.pos={from:r,to:r},"string"!=typeof t)t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(n,r){if(n){t.lastIndex=0;for(var o,s,l=e.getLine(r.line).slice(0,r.ch),f=0;;){t.lastIndex=f;var h=t.exec(l);if(!h)break;if(o=h,s=o.index,f=o.index+(o[0].length||1),f==l.length)break}var c=o&&o[0].length||0;c||(0==s&&0==l.length?o=void 0:s!=e.getLine(r.line).length&&c++)}else{t.lastIndex=r.ch;var l=e.getLine(r.line),o=t.exec(l),c=o&&o[0].length||0,s=o&&o.index;s+c==l.length||c||(c=1)}if(o&&c)return{from:i(r.line,s),to:i(r.line,s+c),match:o}};else{var s=t;o&&(t=t.toLowerCase());var l=o?function(e){return e.toLowerCase()}:function(e){return e},f=t.split("\n");if(1==f.length)t.length?this.matches=function(r,o){if(r){var f=e.getLine(o.line).slice(0,o.ch),h=l(f),c=h.lastIndexOf(t);if(c>-1)return c=n(f,h,c),{from:i(o.line,c),to:i(o.line,c+s.length)}}else{var f=e.getLine(o.line).slice(o.ch),h=l(f),c=h.indexOf(t);if(c>-1)return c=n(f,h,c)+o.ch,{from:i(o.line,c),to:i(o.line,c+s.length)}}}:this.matches=function(){};else{var h=s.split("\n");this.matches=function(t,n){var r=f.length-1;if(t){if(n.line-(f.length-1)<e.firstLine())return;if(l(e.getLine(n.line).slice(0,h[r].length))!=f[f.length-1])return;for(var o=i(n.line,h[r].length),s=n.line-1,c=r-1;c>=1;--c,--s)if(f[c]!=l(e.getLine(s)))return;var u=e.getLine(s),a=u.length-h[0].length;if(l(u.slice(a))!=f[0])return;return{from:i(s,a),to:o}}if(!(n.line+(f.length-1)>e.lastLine())){var u=e.getLine(n.line),a=u.length-h[0].length;if(l(u.slice(a))==f[0]){for(var g=i(n.line,a),s=n.line+1,c=1;c<r;++c,++s)if(f[c]!=l(e.getLine(s)))return;if(l(e.getLine(s).slice(0,h[r].length))==f[r])return{from:g,to:i(s,h[r].length)}}}}}}}function n(e,t,n){if(e.length==t.length)return n;for(var i=Math.min(n,e.length);;){var r=e.slice(0,i).toLowerCase().length;if(r<n)++i;else{if(!(r>n))return i;--i}}}var i=e.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=i(e,0);return n.pos={from:t,to:t},n.atOccurrence=!1,!1}for(var n=this,r=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,r))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!r.line)return t(0);r=i(r.line-1,this.doc.getLine(r.line-1).length)}else{var o=this.doc.lineCount();if(r.line==o-1)return t(o);r=i(r.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t){if(this.atOccurrence){var n=e.splitLines(t);this.doc.replaceRange(n,this.pos.from,this.pos.to),this.pos.to=i(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,n,i){return new t(this.doc,e,n,i)}),e.defineDocExtension("getSearchCursor",function(e,n,i){return new t(this,e,n,i)}),e.defineExtension("selectMatches",function(t,n){for(var i,r=[],o=this.getSearchCursor(t,this.getCursor("from"),n);(i=o.findNext())&&!(e.cmpPos(o.to(),this.getCursor("to"))>0);)r.push({anchor:o.from(),head:o.to()});r.length&&this.setSelections(r,0)})});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function o(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var o=e.state.fullScreenRestore;t.style.width=o.width,t.style.height=o.height,window.scrollTo(o.scrollLeft,o.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(r,l,i){i==e.Init&&(i=!1),!i!=!l&&(l?t(r):o(r))})});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function r(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function o(e){r(e);var o=e.state.placeholder=document.createElement("pre");o.style.cssText="height: 0; overflow: visible",o.className="CodeMirror-placeholder",o.appendChild(document.createTextNode(e.getOption("placeholder"))),e.display.lineSpace.insertBefore(o,e.display.lineSpace.firstChild)}function t(e){n(e)&&o(e)}function l(e){var t=e.getWrapperElement(),l=n(e);t.className=t.className.replace(" CodeMirror-empty","")+(l?" CodeMirror-empty":""),l?o(e):r(e)}function n(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(o,n,a){var i=a&&a!=e.Init;if(n&&!i)o.on("blur",t),o.on("change",l),l(o);else if(!n&&i){o.off("blur",t),o.off("change",l),r(o);var c=o.getWrapperElement();c.className=c.className.replace(" CodeMirror-empty","")}n&&!o.hasFocus()&&t(o)})});</script>
  <script>!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(e,n){function o(e){return r.parentNode?(r.style.top=Math.max(0,e.clientY-r.offsetHeight-5)+"px",void(r.style.left=e.clientX+5+"px")):t.off(document,"mousemove",o)}var r=document.createElement("div");return r.className="CodeMirror-lint-tooltip",r.appendChild(n.cloneNode(!0)),document.body.appendChild(r),t.on(document,"mousemove",o),o(e),null!=r.style.opacity&&(r.style.opacity=1),r}function n(t){t.parentNode&&t.parentNode.removeChild(t)}function o(t){t.parentNode&&(null==t.style.opacity&&n(t),t.style.opacity=0,setTimeout(function(){n(t)},600))}function r(n,r,i){function a(){t.off(i,"mouseout",a),u&&(o(u),u=null)}var u=e(n,r),l=setInterval(function(){if(u)for(var t=i;;t=t.parentNode){if(t==document.body)return;if(!t){a();break}}if(!u)return clearInterval(l)},400);t.on(i,"mouseout",a)}function i(t,e,n){this.marked=[],this.options=e,this.timeout=null,this.hasGutter=n,this.onMouseOver=function(e){g(t,e)}}function a(e,n){if(n instanceof Function)return{getAnnotations:n};if(n&&n!==!0||(n={}),n.getAnnotations||(n.getAnnotations=e.getHelper(t.Pos(0,0),"lint")),!n.getAnnotations)throw new Error("Required option 'getAnnotations' missing (lint addon)");return n}function u(t){var e=t.state.lint;e.hasGutter&&t.clearGutter(h);for(var n=0;n<e.marked.length;++n)e.marked[n].clear();e.marked.length=0}function l(e,n,o,i){var a=document.createElement("div"),u=a;return a.className="CodeMirror-lint-marker-"+n,o&&(u=a.appendChild(document.createElement("div")),u.className="CodeMirror-lint-marker-multiple"),0!=i&&t.on(u,"mouseover",function(t){r(t,e,u)}),a}function s(t,e){return"error"==t?t:e}function c(t){for(var e=[],n=0;n<t.length;++n){var o=t[n],r=o.from.line;(e[r]||(e[r]=[])).push(o)}return e}function f(t){var e=t.severity;e||(e="error");var n=document.createElement("div");return n.className="CodeMirror-lint-message-"+e,n.appendChild(document.createTextNode(t.message)),n}function m(t){var e=t.state.lint,n=e.options,o=n.options||n;n.async?n.getAnnotations(t.getValue(),d,o,t):d(t,n.getAnnotations(t.getValue(),o,t))}function d(t,e){u(t);for(var n=t.state.lint,o=n.options,r=c(e),i=0;i<r.length;++i){var a=r[i];if(a){for(var m=null,d=n.hasGutter&&document.createDocumentFragment(),p=0;p<a.length;++p){var v=a[p],g=v.severity;g||(g="error"),m=s(m,g),o.formatAnnotation&&(v=o.formatAnnotation(v)),n.hasGutter&&d.appendChild(f(v)),v.to&&n.marked.push(t.markText(v.from,v.to,{className:"CodeMirror-lint-mark-"+g,__annotation:v}))}n.hasGutter&&t.setGutterMarker(i,h,l(d,m,a.length>1,n.options.tooltips))}}o.onUpdateLinting&&o.onUpdateLinting(e,r,t)}function p(t){var e=t.state.lint;clearTimeout(e.timeout),e.timeout=setTimeout(function(){m(t)},e.options.delay||500)}function v(t,e){var n=e.target||e.srcElement;r(e,f(t),n)}function g(t,e){var n=e.target||e.srcElement;if(/\bCodeMirror-lint-mark-/.test(n.className))for(var o=n.getBoundingClientRect(),r=(o.left+o.right)/2,i=(o.top+o.bottom)/2,a=t.findMarksAt(t.coordsChar({left:r,top:i},"client")),u=0;u<a.length;++u){var l=a[u].__annotation;if(l)return v(l,e)}}var h="CodeMirror-lint-markers";t.defineOption("lint",!1,function(e,n,o){if(o&&o!=t.Init&&(u(e),e.off("change",p),t.off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),delete e.state.lint),n){for(var r=e.getOption("gutters"),l=!1,s=0;s<r.length;++s)r[s]==h&&(l=!0);var c=e.state.lint=new i(e,a(e,n),l);e.on("change",p),0!=c.options.tooltips&&t.on(e.getWrapperElement(),"mouseover",c.onMouseOver),m(e)}})});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function n(e){var n=e.search(i);return n==-1?0:n}var t={},i=/[^\s\u00a0]/,l=e.Pos;e.commands.toggleComment=function(e){for(var n=1/0,t=e.listSelections(),i=null,o=t.length-1;o>=0;o--){var r=t[o].from(),a=t[o].to();r.line>=n||(a.line>=n&&(a=l(n,0)),n=r.line,null==i?e.uncomment(r,a)?i="un":(e.lineComment(r,a),i="line"):"un"==i?e.uncomment(r,a):e.lineComment(r,a))}},e.defineExtension("lineComment",function(e,o,r){r||(r=t);var a=this,m=a.getModeAt(e),c=r.lineComment||m.lineComment;if(!c)return void((r.blockCommentStart||m.blockCommentStart)&&(r.fullLines=!0,a.blockComment(e,o,r)));var f=a.getLine(e.line);if(null!=f){var g=Math.min(0!=o.ch||o.line==e.line?o.line+1:o.line,a.lastLine()+1),s=null==r.padding?" ":r.padding,d=r.commentBlankLines||e.line==o.line;a.operation(function(){if(r.indent)for(var t=f.slice(0,n(f)),o=e.line;o<g;++o){var m=a.getLine(o),u=t.length;(d||i.test(m))&&(m.slice(0,u)!=t&&(u=n(m)),a.replaceRange(t+c+s,l(o,0),l(o,u)))}else for(var o=e.line;o<g;++o)(d||i.test(a.getLine(o)))&&a.replaceRange(c+s,l(o,0))})}}),e.defineExtension("blockComment",function(e,n,o){o||(o=t);var r=this,a=r.getModeAt(e),m=o.blockCommentStart||a.blockCommentStart,c=o.blockCommentEnd||a.blockCommentEnd;if(!m||!c)return void((o.lineComment||a.lineComment)&&0!=o.fullLines&&r.lineComment(e,n,o));var f=Math.min(n.line,r.lastLine());f!=e.line&&0==n.ch&&i.test(r.getLine(f))&&--f;var g=null==o.padding?" ":o.padding;e.line>f||r.operation(function(){if(0!=o.fullLines){var t=i.test(r.getLine(f));r.replaceRange(g+c,l(f)),r.replaceRange(m+g,l(e.line,0));var s=o.blockCommentLead||a.blockCommentLead;if(null!=s)for(var d=e.line+1;d<=f;++d)(d!=f||t)&&r.replaceRange(s+g,l(d,0))}else r.replaceRange(c,n),r.replaceRange(m,e)})}),e.defineExtension("uncomment",function(e,n,o){o||(o=t);var r,a=this,m=a.getModeAt(e),c=Math.min(0!=n.ch||n.line==e.line?n.line:n.line-1,a.lastLine()),f=Math.min(e.line,c),g=o.lineComment||m.lineComment,s=[],d=null==o.padding?" ":o.padding;e:if(g){for(var u=f;u<=c;++u){var h=a.getLine(u),v=h.indexOf(g);if(v>-1&&!/comment/.test(a.getTokenTypeAt(l(u,v+1)))&&(v=-1),v==-1&&(u!=c||u==f)&&i.test(h))break e;if(v>-1&&i.test(h.slice(0,v)))break e;s.push(h)}if(a.operation(function(){for(var e=f;e<=c;++e){var n=s[e-f],t=n.indexOf(g),i=t+g.length;t<0||(n.slice(i,i+d.length)==d&&(i+=d.length),r=!0,a.replaceRange("",l(e,t),l(e,i)))}}),r)return!0}var p=o.blockCommentStart||m.blockCommentStart,C=o.blockCommentEnd||m.blockCommentEnd;if(!p||!C)return!1;var b=o.blockCommentLead||m.blockCommentLead,k=a.getLine(f),L=c==f?k:a.getLine(c),x=k.indexOf(p),R=L.lastIndexOf(C);if(R==-1&&f!=c&&(L=a.getLine(--c),R=L.lastIndexOf(C)),x==-1||R==-1||!/comment/.test(a.getTokenTypeAt(l(f,x+1)))||!/comment/.test(a.getTokenTypeAt(l(c,R+1))))return!1;var O=k.lastIndexOf(p,e.ch),M=O==-1?-1:k.slice(0,e.ch).indexOf(C,O+p.length);if(O!=-1&&M!=-1&&M+C.length!=e.ch)return!1;M=L.indexOf(C,n.ch);var E=L.slice(n.ch).lastIndexOf(p,M-n.ch);return O=M==-1||E==-1?-1:n.ch+E,(M==-1||O==-1||O==n.ch)&&(a.operation(function(){a.replaceRange("",l(c,R-(d&&L.slice(R-d.length,R)==d?d.length:0)),l(c,R+C.length));var e=x+p.length;if(d&&k.slice(e,e+d.length)==d&&(e+=d.length),a.replaceRange("",l(f,x),l(f,e)),b)for(var n=f+1;n<=c;++n){var t=a.getLine(n),o=t.indexOf(b);if(o!=-1&&!i.test(t.slice(0,o))){var r=o+b.length;d&&t.slice(r,r+d.length)==d&&(r+=d.length),a.replaceRange("",l(n,o),l(n,r))}}}),!0)})});</script>
  <script>!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n,o){if(o<0&&0==n.ch)return t.clipPos(h(n.line-1));var r=t.getLine(n.line);if(o>0&&n.ch>=r.length)return t.clipPos(h(n.line+1,0));for(var i,l="start",a=n.ch,s=o<0?0:r.length,c=0;a!=s;a+=o,c++){var f=r.charAt(o<0?a-1:a),u="_"!=f&&e.isWordChar(f)?"w":"o";if("w"==u&&f.toUpperCase()==f&&(u="W"),"start"==l)"o"!=u&&(l="in",i=u);else if("in"==l&&i!=u){if("w"==i&&"W"==u&&o<0&&a--,"W"==i&&"w"==u&&o>0){i="w";continue}break}}return h(n.line,a)}function n(e,n){e.extendSelectionsBy(function(o){return e.display.shift||e.doc.extend||o.empty()?t(e.doc,o.head,n):n<0?o.from():o.to()})}function o(e,t){e.operation(function(){for(var n=e.listSelections().length,o=[],r=-1,i=0;i<n;i++){var l=e.listSelections()[i].head;if(!(l.line<=r)){var a=h(l.line+(t?0:1),0);e.replaceRange("\n",a,null,"+insertLine"),e.indentLine(a.line,null,!0),o.push({head:a,anchor:a}),r=l.line+1}}e.setSelections(o)})}function r(t,n){for(var o=n.ch,r=o,i=t.getLine(n.line);o&&e.isWordChar(i.charAt(o-1));)--o;for(;r<i.length&&e.isWordChar(i.charAt(r));)++r;return{from:h(n.line,o),to:h(n.line,r),word:i.slice(o,r)}}function i(e){var t=e.getCursor(),n=e.scanForBracket(t,-1);if(n)for(;;){var o=e.scanForBracket(t,1);if(!o)return;if(o.ch==m.charAt(m.indexOf(n.ch)+1))return e.setSelection(h(n.pos.line,n.pos.ch+1),o.pos,!1),!0;t=h(o.pos.line,o.pos.ch+1)}}function l(e,t){for(var n,o=e.listSelections(),r=[],i=0;i<o.length;i++){var l=o[i];if(!l.empty()){for(var a=l.from().line,s=l.to().line;i<o.length-1&&o[i+1].from().line==s;)s=l[++i].to().line;r.push(a,s)}}r.length?n=!0:r.push(e.firstLine(),e.lastLine()),e.operation(function(){for(var o=[],i=0;i<r.length;i+=2){var l=r[i],a=r[i+1],s=h(l,0),c=h(a),f=e.getRange(s,c,!1);t?f.sort():f.sort(function(e,t){var n=e.toUpperCase(),o=t.toUpperCase();return n!=o&&(e=n,t=o),e<t?-1:e==t?0:1}),e.replaceRange(f,s,c),n&&o.push({anchor:s,head:c})}n&&e.setSelections(o,0)})}function a(t,n){t.operation(function(){for(var o=t.listSelections(),i=[],l=[],a=0;a<o.length;a++){var s=o[a];s.empty()?(i.push(a),l.push("")):l.push(n(t.getRange(s.from(),s.to())))}t.replaceSelections(l,"around","case");for(var c,a=i.length-1;a>=0;a--){var s=o[i[a]];if(!(c&&e.cmpPos(s.head,c)>0)){var f=r(t,s.head);c=f.from,t.replaceRange(n(f.word),f.from,f.to)}}})}function s(t){var n=t.getCursor("from"),o=t.getCursor("to");if(0==e.cmpPos(n,o)){var i=r(t,n);if(!i.word)return;n=i.from,o=i.to}return{from:n,to:o,query:t.getRange(n,o),word:i}}function c(e,t){var n=s(e);if(n){var o=n.query,r=e.getSearchCursor(o,t?n.to:n.from);(t?r.findNext():r.findPrevious())?e.setSelection(r.from(),r.to()):(r=e.getSearchCursor(o,t?h(e.firstLine(),0):e.clipPos(h(e.lastLine()))),(t?r.findNext():r.findPrevious())?e.setSelection(r.from(),r.to()):n.word&&e.setSelection(n.from,n.to))}}var f=e.keyMap.sublime={fallthrough:"default"},u=e.commands,h=e.Pos,d=e.keyMap.default==e.keyMap.macDefault,p=d?"Cmd-":"Ctrl-";u[f["Alt-Left"]="goSubwordLeft"]=function(e){n(e,-1)},u[f["Alt-Right"]="goSubwordRight"]=function(e){n(e,1)},u[f[p+"Up"]="scrollLineUp"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top+t.clientHeight,"local");e.getCursor().line>=n&&e.execCommand("goLineUp")}e.scrollTo(null,t.top-e.defaultTextHeight())},u[f[p+"Down"]="scrollLineDown"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top,"local")+1;e.getCursor().line<=n&&e.execCommand("goLineDown")}e.scrollTo(null,t.top+e.defaultTextHeight())},u[f["Shift-"+p+"L"]="splitSelectionByLine"]=function(e){for(var t=e.listSelections(),n=[],o=0;o<t.length;o++)for(var r=t[o].from(),i=t[o].to(),l=r.line;l<=i.line;++l)i.line>r.line&&l==i.line&&0==i.ch||n.push({anchor:l==r.line?r:h(l,0),head:l==i.line?i:h(l)});e.setSelections(n,0)},f["Shift-Tab"]="indentLess",u[f.Esc="singleSelectionTop"]=function(e){var t=e.listSelections()[0];e.setSelection(t.anchor,t.head,{scroll:!1})},u[f[p+"L"]="selectLine"]=function(e){for(var t=e.listSelections(),n=[],o=0;o<t.length;o++){var r=t[o];n.push({anchor:h(r.from().line,0),head:h(r.to().line+1,0)})}e.setSelections(n)},f["Shift-"+p+"K"]="deleteLine",u[f[p+"Enter"]="insertLineAfter"]=function(e){o(e,!1)},u[f["Shift-"+p+"Enter"]="insertLineBefore"]=function(e){o(e,!0)},u[f[p+"D"]="selectNextOccurrence"]=function(t){var n=t.getCursor("from"),o=t.getCursor("to"),i=t.state.sublimeFindFullWord==t.doc.sel;if(0==e.cmpPos(n,o)){var l=r(t,n);if(!l.word)return;t.setSelection(l.from,l.to),i=!0}else{var a=t.getRange(n,o),s=i?new RegExp("\\b"+a+"\\b"):a,c=t.getSearchCursor(s,o);c.findNext()?t.addSelection(c.from(),c.to()):(c=t.getSearchCursor(s,h(t.firstLine(),0)),c.findNext()&&t.addSelection(c.from(),c.to()))}i&&(t.state.sublimeFindFullWord=t.doc.sel)};var m="(){}[]";u[f["Shift-"+p+"Space"]="selectScope"]=function(e){i(e)||e.execCommand("selectAll")},u[f["Shift-"+p+"M"]="selectBetweenBrackets"]=function(t){if(!i(t))return e.Pass},u[f[p+"M"]="goToBracket"]=function(t){t.extendSelectionsBy(function(n){var o=t.scanForBracket(n.head,1);if(o&&0!=e.cmpPos(o.pos,n.head))return o.pos;var r=t.scanForBracket(n.head,-1);return r&&h(r.pos.line,r.pos.ch+1)||n.head})};var g=d?"Cmd-Ctrl-":"Shift-Ctrl-";u[f[g+"Up"]="swapLineUp"]=function(e){for(var t=e.listSelections(),n=[],o=e.firstLine()-1,r=[],i=0;i<t.length;i++){var l=t[i],a=l.from().line-1,s=l.to().line;r.push({anchor:h(l.anchor.line-1,l.anchor.ch),head:h(l.head.line-1,l.head.ch)}),0!=l.to().ch||l.empty()||--s,a>o?n.push(a,s):n.length&&(n[n.length-1]=s),o=s}e.operation(function(){for(var t=0;t<n.length;t+=2){var o=n[t],i=n[t+1],l=e.getLine(o);e.replaceRange("",h(o,0),h(o+1,0),"+swapLine"),i>e.lastLine()?e.replaceRange("\n"+l,h(e.lastLine()),null,"+swapLine"):e.replaceRange(l+"\n",h(i,0),null,"+swapLine")}e.setSelections(r),e.scrollIntoView()})},u[f[g+"Down"]="swapLineDown"]=function(e){for(var t=e.listSelections(),n=[],o=e.lastLine()+1,r=t.length-1;r>=0;r--){var i=t[r],l=i.to().line+1,a=i.from().line;0!=i.to().ch||i.empty()||l--,l<o?n.push(l,a):n.length&&(n[n.length-1]=a),o=a}e.operation(function(){for(var t=n.length-2;t>=0;t-=2){var o=n[t],r=n[t+1],i=e.getLine(o);o==e.lastLine()?e.replaceRange("",h(o-1),h(o),"+swapLine"):e.replaceRange("",h(o,0),h(o+1,0),"+swapLine"),e.replaceRange(i+"\n",h(r,0),null,"+swapLine")}e.scrollIntoView()})},f[p+"/"]="toggleComment",u[f[p+"J"]="joinLines"]=function(e){for(var t=e.listSelections(),n=[],o=0;o<t.length;o++){for(var r=t[o],i=r.from(),l=i.line,a=r.to().line;o<t.length-1&&t[o+1].from().line==a;)a=t[++o].to().line;n.push({start:l,end:a,anchor:!r.empty()&&i})}e.operation(function(){for(var t=0,o=[],r=0;r<n.length;r++){for(var i,l=n[r],a=l.anchor&&h(l.anchor.line-t,l.anchor.ch),s=l.start;s<=l.end;s++){var c=s-t;s==l.end&&(i=h(c,e.getLine(c).length+1)),c<e.lastLine()&&(e.replaceRange(" ",h(c),h(c+1,/^\s*/.exec(e.getLine(c+1))[0].length)),++t)}o.push({anchor:a||i,head:i})}e.setSelections(o,0)})},u[f["Shift-"+p+"D"]="duplicateLine"]=function(e){e.operation(function(){for(var t=e.listSelections().length,n=0;n<t;n++){var o=e.listSelections()[n];o.empty()?e.replaceRange(e.getLine(o.head.line)+"\n",h(o.head.line,0)):e.replaceRange(e.getRange(o.from(),o.to()),o.from())}e.scrollIntoView()})},f[p+"T"]="transposeChars",u[f.F9="sortLines"]=function(e){l(e,!0)},u[f[p+"F9"]="sortLinesInsensitive"]=function(e){l(e,!1)},u[f.F2="nextBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){var n=t.shift(),o=n.find();if(o)return t.push(n),e.setSelection(o.from,o.to)}},u[f["Shift-F2"]="prevBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){t.unshift(t.pop());var n=t[t.length-1].find();if(n)return e.setSelection(n.from,n.to);t.pop()}},u[f[p+"F2"]="toggleBookmark"]=function(e){for(var t=e.listSelections(),n=e.state.sublimeBookmarks||(e.state.sublimeBookmarks=[]),o=0;o<t.length;o++){for(var r=t[o].from(),i=t[o].to(),l=e.findMarks(r,i),a=0;a<l.length;a++)if(l[a].sublimeBookmark){l[a].clear();for(var s=0;s<n.length;s++)n[s]==l[a]&&n.splice(s--,1);break}a==l.length&&n.push(e.markText(r,i,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},u[f["Shift-"+p+"F2"]="clearBookmarks"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();t.length=0},u[f["Alt-F2"]="selectBookmarks"]=function(e){var t=e.state.sublimeBookmarks,n=[];if(t)for(var o=0;o<t.length;o++){var r=t[o].find();r?n.push({anchor:r.from,head:r.to}):t.splice(o--,0)}n.length&&e.setSelections(n,0)},f["Alt-Q"]="wrapLines";var v=p+"K ";f[v+p+"Backspace"]="delLineLeft",u[f[v+p+"K"]="delLineRight"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange("",t[n].anchor,h(t[n].to().line),"+delete");e.scrollIntoView()})},u[f[v+p+"U"]="upcaseAtCursor"]=function(e){a(e,function(e){return e.toUpperCase()})},u[f[v+p+"L"]="downcaseAtCursor"]=function(e){a(e,function(e){return e.toLowerCase()})},u[f[v+p+"Space"]="setSublimeMark"]=function(e){e.state.sublimeMark&&e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor())},u[f[v+p+"A"]="selectToSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&e.setSelection(e.getCursor(),t)},u[f[v+p+"W"]="deleteToSublimeMark"]=function(t){var n=t.state.sublimeMark&&t.state.sublimeMark.find();if(n){var o=t.getCursor(),r=n;if(e.cmpPos(o,r)>0){var i=r;r=o,o=i}t.state.sublimeKilled=t.getRange(o,r),t.replaceRange("",o,r)}},u[f[v+p+"X"]="swapWithSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&(e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor()),e.setCursor(t))},u[f[v+p+"Y"]="sublimeYank"]=function(e){null!=e.state.sublimeKilled&&e.replaceSelection(e.state.sublimeKilled,null,"paste")},f[v+p+"G"]="clearBookmarks",u[f[v+p+"C"]="showInCenter"]=function(e){var t=e.cursorCoords(null,"local");e.scrollTo(null,(t.top+t.bottom)/2-e.getScrollInfo().clientHeight/2)},u[f["Shift-Alt-Up"]="selectLinesUpward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var o=t[n];o.head.line>e.firstLine()&&e.addSelection(h(o.head.line-1,o.head.ch))}})},u[f["Shift-Alt-Down"]="selectLinesDownward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var o=t[n];o.head.line<e.lastLine()&&e.addSelection(h(o.head.line+1,o.head.ch))}})},u[f[p+"F3"]="findUnder"]=function(e){c(e,!0)},u[f["Shift-"+p+"F3"]="findUnderPrevious"]=function(e){c(e,!1)},u[f["Alt-F3"]="findAllUnder"]=function(e){var t=s(e);if(t){for(var n=e.getSearchCursor(t.query),o=[],r=-1;n.findNext();)o.push({anchor:n.from(),head:n.to()}),n.from().line<=t.from.line&&n.from().ch<=t.from.ch&&r++;e.setSelections(o,r)}},f["Shift-"+p+"["]="fold",f["Shift-"+p+"]"]="unfold",f[v+p+"0"]=f[v+p+"j"]="unfoldAll",f[p+"I"]="findIncremental",f["Shift-"+p+"I"]="findIncrementalReverse",f[p+"H"]="replace",f.F3="findNext",f["Shift-F3"]="findPrev",e.normalizeKeyMap(f)});</script>

  <script>var parser=function(){function e(){this.yy={}}var t=function(e,t,s,r){for(s=s||{},r=e.length;r--;s[e[r]]=t);return s},s=[1,10],r=[1,18],i=[1,23],o=[1,20],n=[1,34],l=[1,24],a=[1,25],c=[1,26],h=[1,27],y=[1,36],_=[1,21],m=[1,28],p=[1,29],u=[1,33],g=[1,30],d=[1,31],b=[1,38],E=[2,27,28,29,30,33,34,37,38,42,44,45,48,51,53,58],f=[2,16,27,28,29,30,33,34,37,38,42,44,45,48,51,53,58],N=[1,50],k=[2,7,28,29,38,42,44,45,48,51,53,58],I=[1,51],A=[1,74],S=[1,71],x=[1,73],T=[1,72],O=[1,75],L=[1,76],R=[1,77],v=[1,78],D=[1,79],G=[1,82],U=[1,83],w=[1,84],C=[1,85],B=[1,86],P=[1,87],$=[1,88],X=[1,89],F=[1,90],M=[31,47],V=[31,47,74],W=[1,100],Y=[1,101],j=[5,16],z=[29,32,48,50,58,75,76,77,78],H=[8,19,20],q=[8,20,23],K=[1,143],Z=[1,144],Q=[1,145],J=[1,146],ee=[1,147],te=[1,148],se=[1,152],re=[1,165],ie=[8,63],oe={trace:function(){},yy:{},symbols_:{error:2,parse_entity:3,programs:4,EOF:5,program:6,END:7,NEWLINE:8,condition_lines:9,decleration_lines:10,code_lines:11,priority_run_condition_lines:12,run_condition_lines:13,run_always_condition_line:14,priority_run_condition_line:15,RUN:16,WHEN:17,priority_run_conditions:18,PRIORITY_RUN_CONDITION:19,OR:20,run_condition_line:21,run_conditions:22,RUN_CONDITION:23,RUN_CONDITION_ALWAYS:24,decleration_line:25,decleration:26,VAR:27,UNDECLARED_SYMBOL:28,GLOBAL_VARIABLE:29,CONST:30,"=":31,NUMBER:32,GLOBAL:33,LED:34,"[":35,"]":36,USE:37,ALL:38,LEDS:39,code_line:40,":":41,LABEL:42,command:43,GOTO:44,FADE:45,leds:46,STEPSIZE:47,VARIABLE:48,"%":49,CONSTANT:50,SLEEP:51,parameter:52,SKIP:53,IF:54,test_expression:55,expression:56,test_operator:57,LED_ID:58,ANY:59,car_state_list:60,NONE:61,IS:62,CAR_STATE:63,NOT:64,EQ:65,NE:66,GT:67,LT:68,GE:69,LE:70,assignment_operator:71,led_assignment_parameter:72,led_list:73,",":74,STEERING:75,THROTTLE:76,GEAR:77,RANDOM:78,ADD_ASSIGN:79,SUB_ASSIGN:80,MUL_ASSIGN:81,DIV_ASSIGN:82,AND_ASSIGN:83,OR_ASSIGN:84,XOR_ASSIGN:85,ABS:86,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"END",8:"NEWLINE",16:"RUN",17:"WHEN",19:"PRIORITY_RUN_CONDITION",20:"OR",23:"RUN_CONDITION",24:"RUN_CONDITION_ALWAYS",27:"VAR",28:"UNDECLARED_SYMBOL",29:"GLOBAL_VARIABLE",30:"CONST",31:"=",32:"NUMBER",33:"GLOBAL",34:"LED",35:"[",36:"]",37:"USE",38:"ALL",39:"LEDS",41:":",42:"LABEL",44:"GOTO",45:"FADE",47:"STEPSIZE",48:"VARIABLE",49:"%",50:"CONSTANT",51:"SLEEP",53:"SKIP",54:"IF",58:"LED_ID",59:"ANY",61:"NONE",62:"IS",63:"CAR_STATE",64:"NOT",65:"EQ",66:"NE",67:"GT",68:"LT",69:"GE",70:"LE",74:",",75:"STEERING",76:"THROTTLE",77:"GEAR",78:"RANDOM",79:"ADD_ASSIGN",80:"SUB_ASSIGN",81:"MUL_ASSIGN",82:"DIV_ASSIGN",83:"AND_ASSIGN",84:"OR_ASSIGN",85:"XOR_ASSIGN",86:"ABS"},productions_:[0,[3,2],[4,3],[4,4],[6,3],[6,2],[9,1],[9,1],[9,1],[12,1],[12,2],[15,4],[18,1],[18,2],[18,3],[13,1],[13,2],[21,4],[22,1],[22,2],[22,3],[14,3],[10,1],[10,2],[25,2],[26,2],[26,2],[26,2],[26,4],[26,2],[26,3],[26,3],[26,3],[26,7],[26,2],[26,3],[11,1],[11,2],[11,1],[40,3],[40,2],[40,3],[40,2],[40,2],[40,2],[43,2],[43,2],[43,4],[43,4],[43,4],[43,5],[43,4],[43,2],[43,3],[43,1],[55,3],[55,3],[55,3],[55,2],[55,2],[55,2],[55,2],[55,2],[57,1],[57,1],[57,1],[57,1],[57,1],[57,1],[60,1],[60,2],[56,3],[56,3],[56,3],[46,2],[46,1],[73,1],[73,3],[72,1],[72,2],[72,1],[72,1],[72,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[71,1],[71,1],[71,1],[71,1],[71,1],[71,1],[71,1],[71,1],[71,2]],performAction:function(e,t,s,r,i,o,n){var l=o.length-1;switch(i){case 1:return r.emitter.output_programs();case 4:case 5:r.emitter.emit_end_of_program();break;case 6:r.emitter.emit_run_condition(o[l],0);break;case 7:case 8:r.emitter.emit_run_condition(0,o[l]);break;case 10:case 16:this.$=o[l-1]|o[l];break;case 11:case 17:this.$=o[l-1];break;case 12:case 18:this.$=r.symbols.get_symbol(o[l],"EXPECTING_RUN_CONDITION").opcode;break;case 13:this.$=o[l-1]+r.symbols.get_symbol(o[l],"EXPECTING_RUN_CONDITION").opcode;break;case 14:this.$=o[l-2]+r.symbols.get_symbol(o[l],"EXPECTING_RUN_CONDITION").opcode;break;case 19:this.$=o[l-1]|r.symbols.get_symbol(o[l],"EXPECTING_RUN_CONDITION").opcode;break;case 20:this.$=o[l-2]|r.symbols.get_symbol(o[l],"EXPECTING_RUN_CONDITION").opcode;break;case 21:this.$=r.symbols.get_symbol(o[l-1],"EXPECTING_RUN_CONDITION").opcode;break;case 25:case 26:r.symbols.add_symbol(o[l],"VARIABLE",-1,n[l]);break;case 28:r.symbols.add_symbol(o[l-2],"CONSTANT",o[l],n[l-2]);break;case 30:r.symbols.add_symbol(o[l],"GLOBAL_VARIABLE",-1,n[l]);break;case 31:break;case 33:r.symbols.add_symbol(o[l-5],"LED_ID",o[l-1],n[l-5]);break;case 35:r.symbols.set_leds_used(4294967295);break;case 39:r.symbols.add_symbol(o[l-2],"LABEL",r.emitter.pc(),n[l-2]);break;case 41:r.symbols.set_symbol(o[l-2],"LABEL",r.emitter.pc(),n[l-2]);break;case 45:r.emitter.emit(r.symbols.get_reserved_word(o[l-1]).opcode+(16777215&r.symbols.get_symbol(o[l]).opcode),n[l-1]);break;case 46:r.symbols.add_symbol(o[l],"LABEL",-1,n[l]),r.emitter.emit(r.symbols.get_reserved_word(o[l-1]).opcode,n[l-1]);break;case 47:case 48:r.emitter.emit_led_instruction(r.symbols.get_reserved_word(o[l-3]).opcode+r.symbols.get_symbol(o[l]).opcode,n[l-3]);break;case 49:r.emitter.emit_led_instruction(r.symbols.get_reserved_word(o[l-3]).opcode+me+(255&o[l]),n[l-3]);break;case 50:r.emitter.emit_led_instruction(r.symbols.get_reserved_word(o[l-4]).opcode+me+(255&o[l-1]),n[l-4]);break;case 51:r.emitter.emit_led_instruction(r.symbols.get_reserved_word(o[l-3]).opcode+me+(255&r.symbols.get_symbol(o[l]).opcode),n[l-3]);break;case 52:r.emitter.emit(r.symbols.get_reserved_word(o[l-1]).opcode+o[l],n[l-1]);break;case 53:r.emitter.emit(o[l],n[l-2]);break;case 55:case 56:this.$=r.symbols.get_reserved_word(o[l-1]).opcode+65536*r.symbols.get_symbol(o[l-2]).opcode+o[l];break;case 57:this.$=r.symbols.get_reserved_word(o[l-1]).opcode+_e+65536*r.symbols.get_symbol(o[l-2]).opcode+o[l];break;case 58:case 59:case 60:this.$=r.symbols.get_reserved_word(o[l-1]).opcode+o[l];break;case 61:case 62:this.$=r.symbols.get_reserved_word(o[l-1]).opcode+r.symbols.get_symbol(o[l],"EXPECTING_CAR_STATE").opcode;break;case 69:this.$=r.symbols.get_symbol(o[l],"EXPECTING_CAR_STATE").opcode;break;case 70:this.$=o[l-1]+r.symbols.get_symbol(o[l],"EXPECTING_CAR_STATE").opcode;break;case 71:r.emitter.emit(r.symbols.get_reserved_word(o[l-1]).opcode+65536*r.symbols.get_symbol(o[l-2]).opcode+o[l]);break;case 72:r.emitter.emit(r.symbols.get_reserved_word(o[l-1]).opcode+65536*r.symbols.get_symbol(o[l-2]).opcode|o[l]);break;case 73:r.emitter.emit_led_instruction(33554432+o[l],n[l-2]);break;case 74:r.parse_state="UNKNOWN_PARSE_STATE",r.emitter.add_led_to_list(-1);break;case 76:case 77:r.emitter.add_led_to_list(r.symbols.get_symbol(o[l]).opcode);break;case 78:this.$=me+(255&Number(o[l]));break;case 79:this.$=me+(255&Number(o[l-1]));break;case 80:this.$=me+(255&r.symbols.get_symbol(o[l]).opcode);break;case 81:case 82:this.$=r.symbols.get_symbol(o[l]).opcode;break;case 83:this.$=me+(65535&Number(o[l]));break;case 84:this.$=me+(65535&r.symbols.get_symbol(o[l]).opcode);break;case 85:case 86:this.$=256*ne+r.symbols.get_symbol(o[l]).opcode;break;case 87:this.$=256*le+r.symbols.get_symbol(o[l]).opcode;break;case 88:this.$=256*ce;break;case 89:this.$=256*he;break;case 90:this.$=256*ye;break;case 91:this.$=256*ae;break;case 100:this.$="ABS"}},table:[{3:1,4:2,6:3,9:4,12:5,13:6,14:7,15:8,16:s,21:9},{1:[3]},{5:[1,11],6:12,9:4,12:5,13:6,14:7,15:8,16:s,21:9},{7:[1,13]},{2:r,10:14,11:15,25:16,26:19,27:i,28:o,29:n,30:l,33:a,34:c,37:h,38:y,40:17,42:_,43:22,44:m,45:p,46:35,48:u,51:g,53:d,56:32,58:b,73:37},t(E,[2,6],{15:39,16:[1,40]}),t(E,[2,7],{21:41,16:[1,42]}),t(E,[2,8]),t(f,[2,9]),t(f,[2,15]),{17:[1,44],24:[1,43]},{1:[2,1]},{7:[1,45]},{8:[1,46]},{2:r,11:47,25:48,26:19,27:i,28:o,29:n,30:l,33:a,34:c,37:h,38:y,40:17,42:_,43:22,44:m,45:p,46:35,48:u,51:g,53:d,56:32,58:b,73:37},{2:N,7:[2,5],28:o,29:n,38:y,40:49,42:_,43:22,44:m,45:p,46:35,48:u,51:g,53:d,56:32,58:b,73:37},t(E,[2,22]),t(k,[2,36]),t(k,[2,38],{8:I}),{8:[1,52]},{2:[1,54],41:[1,53]},{2:[1,56],41:[1,55]},{8:[1,57]},{2:[1,60],28:[1,58],29:[1,59]},{2:[1,62],28:[1,61]},{27:[1,63]},{2:[1,65],28:[1,64]},{38:[1,66]},{28:[1,68],42:[1,67]},{38:y,46:69,58:b,73:37},{29:A,32:S,48:x,50:T,52:70,58:O,75:L,76:R,77:v,78:D},{54:[1,80]},{8:[2,54]},{31:G,71:81,79:U,80:w,81:C,82:B,83:P,84:$,85:X,86:F},{31:G,71:91,79:U,80:w,81:C,82:B,83:P,84:$,85:X,86:F},{31:[1,92]},{39:[1,93]},t(M,[2,75],{74:[1,94]}),t(V,[2,76]),t(f,[2,10]),{17:[1,95]},t(f,[2,16]),{17:[1,96]},{8:[1,97]},{18:98,19:W,22:99,23:Y},{8:[1,102]},t(j,[2,2]),{2:N,7:[2,4],28:o,29:n,38:y,40:49,42:_,43:22,44:m,45:p,46:35,48:u,51:g,53:d,56:32,58:b,73:37},t(E,[2,23]),t(k,[2,37]),{8:I},t(k,[2,44]),t(E,[2,24]),{8:[1,103]},t(k,[2,40]),{8:[1,104]},t(k,[2,42]),t(k,[2,43]),{8:[2,25]},{8:[2,26]},{8:[2,27]},{31:[1,105]},{8:[2,29]},{2:[1,108],28:[1,106],29:[1,107]},{31:[1,109]},{8:[2,34]},{39:[1,110]},{8:[2,45]},{8:[2,46]},{47:[1,111]},{8:[2,52]},{8:[2,83]},{8:[2,84]},{8:[2,85]},{8:[2,86]},{8:[2,87]},{8:[2,88]},{8:[2,89]},{8:[2,90]},{8:[2,91]},{29:[1,114],38:[1,117],48:[1,113],55:112,58:[1,115],59:[1,116],61:[1,118],62:[1,119],64:[1,120]},{29:A,32:S,48:x,50:T,52:121,58:O,75:L,76:R,77:v,78:D},t(z,[2,92]),t(z,[2,93]),t(z,[2,94]),t(z,[2,95]),t(z,[2,96]),t(z,[2,97]),t(z,[2,98]),t(z,[2,99]),{31:[1,122]},{29:A,32:S,48:x,50:T,52:123,58:O,75:L,76:R,77:v,78:D},{29:[1,128],32:[1,125],48:[1,127],50:[1,126],72:124},t(M,[2,74]),{58:[1,129]},{18:98,19:W},{22:99,23:Y},t(E,[2,21]),{8:[1,130],19:[1,131],20:[1,132]},{8:[1,133],20:[1,135],23:[1,134]},t(H,[2,12]),t(q,[2,18]),t(j,[2,3]),t(k,[2,39]),t(k,[2,41]),{32:[1,136]},{8:[2,30]},{8:[2,31]},{8:[2,32]},{34:[1,137]},{8:[2,35]},{29:[1,139],32:[1,140],48:[1,138],50:[1,141]},{8:[2,53]},{57:142,65:K,66:Z,67:Q,68:J,69:ee,70:te},{57:149,65:K,66:Z,67:Q,68:J,69:ee,70:te},{57:150,65:K,66:Z,67:Q,68:J,69:ee,70:te},{60:151,63:se},{60:153,63:se},{60:154,63:se},{63:[1,155]},{63:[1,156]},{8:[2,71]},t(z,[2,100]),{8:[2,72]},{8:[2,73]},{8:[2,78],49:[1,157]},{8:[2,80]},{8:[2,81]},{8:[2,82]},t(V,[2,77]),t(f,[2,11]),t(H,[2,13]),{19:[1,158]},t(f,[2,17]),t(q,[2,19]),{23:[1,159]},{8:[2,28]},{35:[1,160]},{8:[2,47]},{8:[2,48]},{8:[2,49],49:[1,161]},{8:[2,51]},{29:A,32:S,48:x,50:T,52:162,58:O,75:L,76:R,77:v,78:D},t(z,[2,63]),t(z,[2,64]),t(z,[2,65]),t(z,[2,66]),t(z,[2,67]),t(z,[2,68]),{29:A,32:S,48:x,50:T,52:163,58:O,75:L,76:R,77:v,78:D},{29:A,32:S,48:x,50:T,52:164,58:O,75:L,76:R,77:v,78:D},{8:[2,58],63:re},t(ie,[2,69]),{8:[2,59],63:re},{8:[2,60],63:re},{8:[2,61]},{8:[2,62]},{8:[2,79]},t(H,[2,14]),t(q,[2,20]),{32:[1,166]},{8:[2,50]},{8:[2,55]},{8:[2,56]},{8:[2,57]},t(ie,[2,70]),{36:[1,167]},{8:[2,33]}],defaultActions:{11:[2,1],32:[2,54],58:[2,25],59:[2,26],60:[2,27],62:[2,29],65:[2,34],67:[2,45],68:[2,46],70:[2,52],71:[2,83],72:[2,84],73:[2,85],74:[2,86],75:[2,87],76:[2,88],77:[2,89],78:[2,90],79:[2,91],106:[2,30],107:[2,31],108:[2,32],110:[2,35],112:[2,53],121:[2,71],123:[2,72],124:[2,73],126:[2,80],127:[2,81],128:[2,82],136:[2,28],138:[2,47],139:[2,48],141:[2,51],155:[2,61],156:[2,62],157:[2,79],161:[2,50],162:[2,55],163:[2,56],164:[2,57],167:[2,33]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){function t(e){o.length=o.length-2*e,n.length=n.length-e,l.length=l.length-e}function s(){var e;return e=g.lex()||p,"number"!=typeof e&&(e=i.symbols_[e]||e),e}function r(e){for(var t=o.length-1,s=0;;){if(m.toString()in a[e])return s;if(0===e||t<2)return!1;t-=2,e=o[t],++s}}var i=this,o=[0],n=[null],l=[],a=this.table,c="",h=0,y=0,_=0,m=2,p=1,u=l.slice.call(arguments,1),g=Object.create(this.lexer),d={yy:{}};for(var b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(d.yy[b]=this.yy[b]);g.setInput(e,d.yy),d.yy.lexer=g,d.yy.parser=this,"undefined"==typeof g.yylloc&&(g.yylloc={});var E=g.yylloc;l.push(E);var f=g.options&&g.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var N,k,I,A,S,x,T,O,L,R={};;){if(I=o[o.length-1],this.defaultActions[I]?A=this.defaultActions[I]:(null!==N&&"undefined"!=typeof N||(N=s()),A=a[I]&&a[I][N]),"undefined"==typeof A||!A.length||!A[0]){var v,D="";if(_)k!==p&&(v=r(I));else{v=r(I),L=[];for(x in a[I])this.terminals_[x]&&x>m&&L.push("'"+this.terminals_[x]+"'");D=g.showPosition?"Parse error on line "+(h+1)+":\n"+g.showPosition()+"\nExpecting "+L.join(", ")+", got '"+(this.terminals_[N]||N)+"'":"Parse error on line "+(h+1)+": Unexpected "+(N==p?"end of input":"'"+(this.terminals_[N]||N)+"'"),this.parseError(D,{text:g.match,token:this.terminals_[N]||N,line:g.yylineno,loc:E,expected:L,recoverable:v!==!1})}if(3==_){if(N===p||k===p)throw new Error(D||"Parsing halted while starting to recover from another error.");y=g.yyleng,c=g.yytext,h=g.yylineno,E=g.yylloc,N=s()}if(v===!1)throw new Error(D||"Parsing halted. No suitable error recovery rule available.");t(v),k=N==m?null:N,N=m,I=o[o.length-1],A=a[I]&&a[I][m],_=3}if(A[0]instanceof Array&&A.length>1)throw new Error("Parse Error: multiple actions possible at state: "+I+", token: "+N);switch(A[0]){case 1:o.push(N),n.push(g.yytext),l.push(g.yylloc),o.push(A[1]),N=null,k?(N=k,k=null):(y=g.yyleng,c=g.yytext,h=g.yylineno,E=g.yylloc,_>0&&_--);break;case 2:if(T=this.productions_[A[1]][1],R.$=n[n.length-T],R._$={first_line:l[l.length-(T||1)].first_line,last_line:l[l.length-1].last_line,first_column:l[l.length-(T||1)].first_column,last_column:l[l.length-1].last_column},f&&(R._$.range=[l[l.length-(T||1)].range[0],l[l.length-1].range[1]]),S=this.performAction.apply(R,[c,y,h,d.yy,A[1],n,l].concat(u)),"undefined"!=typeof S)return S;T&&(o=o.slice(0,-1*T*2),n=n.slice(0,-1*T),l=l.slice(0,-1*T)),o.push(this.productions_[A[1]][0]),n.push(R.$),l.push(R._$),O=a[o[o.length-2]][o[o.length-1]],o.push(O);break;case 3:return!0}}return!0}},ne=0,le=1,ae=2,ce=3,he=4,ye=5,_e=33554432,me=16777216,pe="LEX",ue=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,s=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),s.length-1&&(this.yylineno-=s.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:s?(s.length===r.length?this.yylloc.first_column:0)+r[r.length-s.length].length-s[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var s,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],s=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,s,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if(s=this._input.match(this.rules[i[o]]),s&&(!t||s[0].length>t[0].length)){if(t=s,r=o,this.options.backtrack_lexer){if(e=this.test_match(s,i[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,i[r]),e!==!1&&e):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0},performAction:function(e,t,s,r){switch(s){case 0:return e.line_is_empty=!1,e.logger.log(pe,"DEBUG","Hex-number: "+t.yytext),t.yytext=parseInt(t.yytext,16),"NUMBER";case 1:return e.line_is_empty=!1,e.logger.log(pe,"DEBUG","Number: "+t.yytext),t.yytext=parseInt(t.yytext,10),"NUMBER";case 2:return e.line_is_empty=!1,e.parse_state="EXPECTING_RUN_CONDITION",e.logger.log(pe,"DEBUG","Reserved word: "+t.yytext),t.yytext.toUpperCase();case 3:return e.line_is_empty=!1,e.parse_state="EXPECTING_CAR_STATE",e.logger.log(pe,"DEBUG","Reserved word: "+t.yytext),t.yytext.toUpperCase();case 4:return e.line_is_empty=!1,e.logger.log(pe,"DEBUG","Reserved word: "+t.yytext),t.yytext.toUpperCase();case 5:e.line_is_empty=!1;var i=e.symbols.get_symbol(t.yytext,e.parse_state);return e.logger.log(pe,"DEBUG","Identifier: "+t.yytext+" ("+i.token+"=0x"+i.opcode.toString(16)+") parse_state="+e.parse_state),i.token;case 6:e.line_is_empty=!1;var i=e.symbols.get_reserved_word(t.yytext);return e.logger.log(pe,"DEBUG","Assignment "+t.yytext+" ("+i.token+"=0x"+i.opcode.toString(16)+")"),i.token;case 7:e.line_is_empty=!1;var i=e.symbols.get_reserved_word(t.yytext);return e.logger.log(pe,"DEBUG","Comparison "+t.yytext+" ("+i.token+"=0x"+i.opcode.toString(16)+")"),i.token;case 8:return e.line_is_empty=!1,e.logger.log(pe,"DEBUG","'"+t.yytext+"'"),t.yytext;case 9:break;case 10:break;case 11:break;case 12:e.logger.log(pe,"DEBUG","emtpy line");break;case 13:if(e.parse_state="UNKNOWN_PARSE_STATE",!e.line_is_empty)return e.line_is_empty=!0,e.logger.log(pe,"DEBUG","NEWLINE"),"NEWLINE";break;case 14:return e.logger.log(pe,"DEBUG","Unrecognized character "+t.yytext),t.yytext;case 15:return 5;case 16:console.log(t.yytext)}},rules:[/^(?:0[xX][\da-fA-F]+)/,/^(?:(-?)[\d]+)/,/^(?:run)/,/^(?:is|any|all|none|not)/,/^(?:goto|const|var|leds|led|sleep|skip|if|fade|stepsize|when|or|global|random|steering|throttle|gear|abs|end|use)/,/^(?:[a-zA-Z][a-zA-Z0-9_\-]*)/,/^(?:=|\+=|-=|\*=|\/=|&=|\|=|\^=)/,/^(?:==|!=|>=|<=|>|<)/,/^(?:\[|\]|,|:|%)/,/^(?:\/\/[^\n]*)/,/^(?:;[^\n]*)/,/^(?:[ \t]+)/,/^(?:\\[ \t]*((\/\/|)[^\n]*)*\n)/,/^(?:\n)/,/^(?:.)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],inclusive:!0}}};return e}();return oe.lexer=ue,e.prototype=oe,oe.Parser=e,new e}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=parser,exports.Parser=parser.Parser,exports.parse=function(){return parser.parse.apply(parser,arguments)},exports.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var t=require("fs").readFileSync(require("path").normalize(e[1]),"utf8");return exports.parser.parse(t)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1)));</script>
  <script>var symbols=function(){"use strict";var o,e=[],t=[],n=0,i=0,c=0,p={token:"UNDECLARED_SYMBOL",opcode:0},d={always:{token:"RUN_CONDITION_ALWAYS",opcode:2147483648},"light-switch-position-0":{token:"RUN_CONDITION",opcode:1},"light-switch-position-1":{token:"RUN_CONDITION",opcode:2},"light-switch-position-2":{token:"RUN_CONDITION",opcode:4},"light-switch-position-3":{token:"RUN_CONDITION",opcode:8},"light-switch-position-4":{token:"RUN_CONDITION",opcode:16},"light-switch-position-5":{token:"RUN_CONDITION",opcode:32},"light-switch-position-6":{token:"RUN_CONDITION",opcode:64},"light-switch-position-7":{token:"RUN_CONDITION",opcode:128},"light-switch-position-8":{token:"RUN_CONDITION",opcode:256},neutral:{token:"RUN_CONDITION",opcode:512},forward:{token:"RUN_CONDITION",opcode:1024},reversing:{token:"RUN_CONDITION",opcode:2048},braking:{token:"RUN_CONDITION",opcode:4096},"indicator-left":{token:"RUN_CONDITION",opcode:8192},"indicator-right":{token:"RUN_CONDITION",opcode:16384},hazard:{token:"RUN_CONDITION",opcode:32768},"blink-flag":{token:"RUN_CONDITION",opcode:65536},"blink-left":{token:"RUN_CONDITION",opcode:1<<17},"blink-right":{token:"RUN_CONDITION",opcode:1<<18},"winch-disabled":{token:"RUN_CONDITION",opcode:1<<19},"winch-idle":{token:"RUN_CONDITION",opcode:1<<20},"winch-in":{token:"RUN_CONDITION",opcode:1<<21},"winch-out":{token:"RUN_CONDITION",opcode:1<<22},"no-signal":{token:"PRIORITY_RUN_CONDITION",opcode:1},initializing:{token:"PRIORITY_RUN_CONDITION",opcode:2},"servo-output-setup-centre":{token:"PRIORITY_RUN_CONDITION",opcode:4},"servo-output-setup-left":{token:"PRIORITY_RUN_CONDITION",opcode:8},"servo-output-setup-right":{token:"PRIORITY_RUN_CONDITION",opcode:16},"reversing-setup-steering":{token:"PRIORITY_RUN_CONDITION",opcode:32},"reversing-setup-throttle":{token:"PRIORITY_RUN_CONDITION",opcode:64},"gear-changed":{token:"PRIORITY_RUN_CONDITION",opcode:128}},s={"light-switch-position-0":{token:"CAR_STATE",opcode:1},"light-switch-position-1":{token:"CAR_STATE",opcode:2},"light-switch-position-2":{token:"CAR_STATE",opcode:4},"light-switch-position-3":{token:"CAR_STATE",opcode:8},"light-switch-position-4":{token:"CAR_STATE",opcode:16},"light-switch-position-5":{token:"CAR_STATE",opcode:32},"light-switch-position-6":{token:"CAR_STATE",opcode:64},"light-switch-position-7":{token:"CAR_STATE",opcode:128},"light-switch-position-8":{token:"CAR_STATE",opcode:256},neutral:{token:"CAR_STATE",opcode:512},forward:{token:"CAR_STATE",opcode:1024},reversing:{token:"CAR_STATE",opcode:2048},braking:{token:"CAR_STATE",opcode:4096},"indicator-left":{token:"CAR_STATE",opcode:8192},"indicator-right":{token:"CAR_STATE",opcode:16384},hazard:{token:"CAR_STATE",opcode:32768},"blink-flag":{token:"CAR_STATE",opcode:65536},"blink-left":{token:"CAR_STATE",opcode:1<<17},"blink-right":{token:"CAR_STATE",opcode:1<<18},"winch-disabled":{token:"CAR_STATE",opcode:1<<19},"winch-idle":{token:"CAR_STATE",opcode:1<<20},"winch-in":{token:"CAR_STATE",opcode:1<<21},"winch-out":{token:"CAR_STATE",opcode:1<<22},"servo-output-setup-centre":{token:"CAR_STATE",opcode:1<<24},"servo-output-setup-left":{token:"CAR_STATE",opcode:1<<25},"servo-output-setup-right":{token:"CAR_STATE",opcode:1<<26},"reversing-setup-steering":{token:"CAR_STATE",opcode:1<<27},"reversing-setup-throttle":{token:"CAR_STATE",opcode:1<<28}},r={goto:{token:"GOTO",opcode:16777216},const:{token:"CONST"},var:{token:"VAR"},led:{token:"LED"},leds:{token:"LEDS"},fade:{token:"FADE",opcode:67108864},stepsize:{token:"STEPSIZE"},sleep:{token:"SLEEP",opcode:100663296},skip:{token:"SKIP"},if:{token:"IF"},any:{token:"ANY",opcode:1610612736},all:{token:"ALL",opcode:2147483648},none:{token:"NONE",opcode:2684354560},not:{token:"NOT",opcode:2684354560},is:{token:"IS",opcode:1610612736},run:{token:"RUN"},when:{token:"WHEN"},or:{token:"OR"},global:{token:"GLOBAL"},random:{token:"RANDOM"},steering:{token:"STEERING"},throttle:{token:"THROTTLE"},gear:{token:"GEAR"},abs:{token:"ABS",opcode:1073741824},end:{token:"END",opcode:4261412864},use:{token:"USE"},"=":{token:"=",opcode:268435456},">":{token:"GT",opcode:738197504},"<":{token:"LT",opcode:872415232},"+=":{token:"ADD_ASSIGN",opcode:301989888},"-=":{token:"SUB_ASSIGN",opcode:335544320},"*=":{token:"MUL_ASSIGN",opcode:369098752},"/=":{token:"DIV_ASSIGN",opcode:402653184},"&=":{token:"AND_ASSIGN",opcode:436207616},"|=":{token:"OR_ASSIGN",opcode:469762048},"^=":{token:"XOR_ASSIGN",opcode:503316480},"==":{token:"EQ",opcode:536870912},"!=":{token:"NE",opcode:603979776},">=":{token:"GE",opcode:671088640},"<=":{token:"LE",opcode:805306368}},N="SYMBOL",l=function(){var n,i,c,p="\n";for(p+="Symbol table:\n",n=0;n<e.length;n+=1)i=e[n],p+="name='"+i.name+"', token="+i.token+" opcode="+i.opcode+"\n";if(p+="\n",p+="Forward declarations to resolve:\n",0===t.length)p+="(none)\n";else for(n=0;n<t.length;n+=1)c=t[n],p+="label='"+c.symbol.name+"' pc="+c.pc+" opcode="+c.symbol.opcode+"\n";p+="\n",o.yy.logger.log(N,"INFO",p)},k=function(o){var e={"light-switch-position-0":1,"light-switch-position-1":2,"light-switch-position-2":3,"light-switch-position-3":4,"light-switch-position-4":5,"light-switch-position-5":6,"light-switch-position-6":7,"light-switch-position-7":8,"light-switch-position-8":9};e[o]&&c<e[o]&&(c=e[o])},T=function(o,e,n){var i={symbol:o,pc:e,location:n};t.push(i)},_=function(){return t},I=function(){var o;for(i=0,t=[],o=e.length-1;o>=0;o-=1)"GLOBAL_VARIABLE"!==e[o].token&&e.splice(o,1)},A=function(t,n,i,c){var p,d;for(p=0;p<e.length;p+=1)if(d=e[p],d.name===t)return d.opcode!==-1&&o.yy.emitter.yyerror("Redefinition of symbol "+t,{loc:c}),e[p].token=n,e[p].opcode=i,void o.yy.logger.log(N,"INFO","Set '"+t+"' as token="+n+" opcode="+i);o.yy.logger.log(N,"ERROR","Could not find '"+t+"'")},R=function(t,n,i){var c,r;if("EXPECTING_RUN_CONDITION"===n)return k(t),d[t]||p;if("EXPECTING_CAR_STATE"===n)return k(t),s[t]||p;for(c=0;c<e.length;c+=1)if(r=e[c],"GLOBAL_VARIABLE"!==r.token&&r.name===t)return"LABEL"===r.token&&r.opcode===-1&&(T(r,o.yy.emitter.pc(),i),o.yy.logger.log(N,"INFO","Using forward declared label "+t)),r;for(c=0;c<e.length;c+=1)if(r=e[c],"GLOBAL_VARIABLE"===r.token&&r.name===t)return r;return o.yy.logger.log(N,"INFO","Undeclared symbol "+t),p},O=function(t,c,p,d){var s,r={name:t,token:c,opcode:p};"GLOBAL_VARIABLE"!==c&&"VARIABLE"!==c||p===-1&&(r.opcode=n,n+=1),"LED_ID"===c&&(p<0||p>31?o.yy.emitter.yyerror("LED index out of range (must be 0..15)",{loc:d}):(s=Math.pow(2,p),i&s||(i+=s))),e.push(r),"LABEL"===c&&p===-1&&(T(r,o.yy.emitter.pc(),d),o.yy.logger.log(N,"INFO","Forward declaration of label "+t))},g=function(e){return r[e]||o.yy.logger.log(N,"FATAL","ASSERT: reserved word "+e+" is not in the table")},h=function(){return i},a=function(o){i=o},E=function(){return c},C=function(){e=[],t=[],n=0,i=0,c=0,void 0!==o&&(o.yy.line_is_empty=!0,o.yy.parse_state="UNKNOWN_PARSE_STATE"),O("clicks","GLOBAL_VARIABLE",n),n+=1,O("light-switch-position","GLOBAL_VARIABLE",n),n+=1},u=function(e){o=e,C()};return{set_parser:u,add_symbol:O,get_symbol:R,set_symbol:A,get_reserved_word:g,get_number_of_light_switch_positions:E,set_leds_used:a,get_leds_used:h,get_forward_declerations:_,remove_local_symbols:I,dump_symbol_table:l,reset:C}}();"undefined"!=typeof exports&&(exports.symbols=symbols);</script>
  <script>var emitter=function(){"use strict";var o,r,t=25,e=32,n=32,s=55,l=96,i=128,g=160,u=2,y=3,a=0,f=[],c=[],p=0,_=[],h=[],m="EMIT",d=function(o){for(var r=o.toString(16).toUpperCase();r.length<8;)r="0"+r;return"0x"+r},b=function(o,t){r.yy.logger.log(m,"ERROR",o),h.push({str:o,hash:t})},v=function(o){var r=o>>24;return r>=n&&r<=s||((224&r)===l||(224&r)===i||(224&r)===g)},I=function(){var o,t,e,n=r.yy.symbols.get_forward_declerations();for(o=0;o<n.length;o+=1)t=n[o],t.symbol.opcode<0?b("Label '"+t.symbol.name+"' used but not defined.",{loc:t.location}):t.symbol.opcode!==t.pc&&(e=f[a],e+=y,e+=t.pc,c[e]=4278190080&c[e]|16777215&t.symbol.opcode)},N=function(o){var t;if(o<0){var n=r.yy.symbols.get_leds_used();for(_=[],r.yy.logger.log(m,"INFO","Adding all LEDs: "+d(n)),t=0;t<e;t+=1)n&Math.pow(2,t)&&_.push(t)}else{for(t=0;t<_.length;t+=1)if(_[t]===o)return void r.yy.logger.log(m,"WARNING","Duplicate LED "+o+" in list");if(!(_.length<e))throw new Error("led_list is full");_.push(o)}},w=function(t,e){r.yy.logger.log(m,"INFO","INSTRUCTION: "+d(t)),o=e,c.push(t),p+=1},E=function(o,t){var e,n,s;if(r.yy.logger.log(m,"INFO","LED instruction: "+d(o)+" ("+_.length+" leds)"),0===_.length)throw new Error("Internal parser error: led_list.length is 0");for(_.length>1&&p>0&&v(c[c.length-1])&&b("Commands using multiple LEDs can not follow 'skip if'",{loc:t}),_.sort(function(o,r){return o-r}),e=n=_[0],s=1;s<_.length;s+=1)_[s]!==n+1?(w(o|n<<16|e<<8),e=n=_[s]):n+=1;w(o|n<<16|e<<8),_=[]},O=function(o,t){r.yy.logger.log(m,"INFO","PRIORITY code: "+d(o)),r.yy.logger.log(m,"INFO","RUN code: "+d(t)),c.push(o),c.push(t),c.push(0)},R=function(){r.yy.logger.log(m,"INFO","emit_end_of_program()"),p>0&&v(c[c.length-1])&&b("Last operation in a program can not be 'skip if'.",{loc:o}),c.push(4261412864),r.yy.symbols.dump_symbol_table(),c[f[a]+u]=r.yy.symbols.get_leds_used(),I(),r.yy.symbols.remove_local_symbols(),a+=1,p=0,f[a]=c.length},F=function(){return p},L=function(){var o;c.push(4278190080);var t="\n";for(t+="Number of programs: "+a+"\n",t+="Start offset locations:\n",o=0;o<a;o+=1)t+=o+": "+f[o]+"\n";if(t+="\n",r.yy.logger.log(m,"INFO",t),0!==h.length)throw new Error("Errors occured while processing the light programs:");var e=r.yy.symbols.get_number_of_light_switch_positions(),n={number_of_programs:a,start_offset:f,instructions:c,light_switch_positions:e};return n},D=function(){return h},T=function(){var o;for(a=0,f=[],o=0;o<t;o+=1)f.push(0);c=[],h=[]},x=function(o){r=o,r.yy.parseError=b,T()};return T(),{set_parser:x,get_errors:D,yyerror:b,emit:w,emit_run_condition:O,emit_led_instruction:E,emit_end_of_program:R,add_led_to_list:N,pc:F,output_programs:L,reset:T}}();"undefined"!=typeof exports&&(exports.emitter=emitter);</script>
  <script>var logger=function(){"use strict";var e,o={DEBUG:0,INFO:1,WARNING:2,ERROR:3,FATAL:4},r=o.DEBUG,s=["DEBUG  ","INFO   ","WARNING","ERROR  ","FATAL  "],t=function(e){console.log(e)},n=function(e){process.stderr.write(e+"\n")},i=function(t,n,i){if(n=isNaN(n)?o[n]||0:n,!(n<r)){for(;t.length<8;)t+=" ";e(t+" ["+s[n]+"] "+i)}},c=function(e){e=isNaN(e)?o[e]||0:e,r=e};return e="undefined"!=typeof process&&void 0!==process.stderr&&void 0!==process.stderr.write?n:t,{log:i,set_log_level:c}}();"undefined"!=typeof exports&&(exports.logger=logger);</script>

  <script>"use strict";var disassembler=function(){var e=4096,n=32,r=[];!function(){var n;for(n=0;n<e;n+=1)r.push(0)}();var t,i=0,a={},c=[],o=1,s=0,_=0,l=0,I=1,u=2,d=3,h=4,w=5,p=l,S={GOTO:1,SET:2,SET_I:3,FADE:4,FADE_I:5,SLEEP:6,SLEEP_I:7,ASSIGN:16,ASSIGN_I:17,ADD:18,ADD_I:19,SUBTRACT:20,SUBTRACT_I:21,MULTIPLY:22,MULTIPLY_I:23,DIVIDE:24,DIVIDE_I:25,AND:26,AND_I:27,OR:28,OR_I:29,XOR:30,XOR_I:31,ABS:64,SKIP_IF_EQ_V:32,SKIP_IF_EQ_VI:33,SKIP_IF_EQ_L:34,SKIP_IF_EQ_LI:35,SKIP_IF_NE_V:36,SKIP_IF_NE_VI:37,SKIP_IF_NE_L:38,SKIP_IF_NE_LI:39,SKIP_IF_GE_V:40,SKIP_IF_GE_VI:41,SKIP_IF_GE_L:42,SKIP_IF_GE_LI:43,SKIP_IF_GT_V:44,SKIP_IF_GT_VI:45,SKIP_IF_GT_L:46,SKIP_IF_GT_LI:47,SKIP_IF_LE_V:48,SKIP_IF_LE_VI:49,SKIP_IF_LE_L:50,SKIP_IF_LE_LI:51,SKIP_IF_LT_V:52,SKIP_IF_LT_VI:53,SKIP_IF_LT_L:54,SKIP_IF_LT_LI:55,END_OF_PROGRAM:254,END_OF_PROGRAMS:255},f=32,P=55,E=96,g=128,F=160,L=16777216,K=0,b=1,v=2,k=3,T=4,D=5,R=0,O=1,V=2,A=4,G=8,N=16,M=32,y=64,U=128,m=1,Q=2,x=4,z=8,B=16,C=32,X=64,Y=128,j=256,q=512,H=1024,J=2048,W=4096,Z=8192,$=16384,ee=32768,ne=65536,re=1<<17,te=1<<18,ie=1<<19,ae=1<<20,ce=1<<21,oe=1<<22,se=2147483648,_e=1,le=2,Ie=4,ue=8,de=16,he=32,we=64,pe=128,Se=256,fe=512,Pe=1024,Ee=2048,ge=4096,Fe=8192,Le=16384,Ke=32768,be=65536,ve=1<<17,ke=1<<18,Te=1<<19,De=1<<20,Re=1<<21,Oe=1<<22,Ve=1<<24,Ae=1<<25,Ge=1<<26,Ne=1<<27,Me=1<<28,ye=function(e,n){void 0===a[e]&&(a[e]={}),a[e][n]=1},Ue=function(e){e!==R&&(e&O&&(r[s++].decleration="run when no-signal"),e&V&&(r[s++].decleration="run when initializing"),e&A&&(r[s++].decleration="run when servo-output-setup-centre"),e&G&&(r[s++].decleration="run when servo-output-setup-left"),e&N&&(r[s++].decleration="run when servo-output-setup-right"),e&M&&(r[s++].decleration="run when reversing-setup-steering"),e&y&&(r[s++].decleration="run when reversing-setup-throttle"),e&U&&(r[s++].decleration="run when gear-changed"))},me=function(e){if(0!==e){if(e&se)return void(r[s++].decleration="run always");e&m&&(r[s++].decleration="run when light-switch-position-0"),e&Q&&(r[s++].decleration="run when light-switch-position-1"),e&x&&(r[s++].decleration="run when light-switch-position-2"),e&z&&(r[s++].decleration="run when light-switch-position-3"),e&B&&(r[s++].decleration="run when light-switch-position-4"),e&C&&(r[s++].decleration="run when light-switch-position-5"),e&X&&(r[s++].decleration="run when light-switch-position-6"),e&Y&&(r[s++].decleration="run when light-switch-position-7"),e&j&&(r[s++].decleration="run when light-switch-position-8"),e&q&&(r[s++].decleration="run when neutral"),e&H&&(r[s++].decleration="run when forward"),e&J&&(r[s++].decleration="run when reversing"),e&W&&(r[s++].decleration="run when braking"),e&Z&&(r[s++].decleration="run when indicator-left"),e&$&&(r[s++].decleration="run when indicator-right"),e&ee&&(r[s++].decleration="run when hazard"),e&ne&&(r[s++].decleration="run when blink-flag"),e&re&&(r[s++].decleration="run when blink-left"),e&te&&(r[s++].decleration="run when blink-right"),e&ie&&(r[s++].decleration="run when winch-disabled"),e&ae&&(r[s++].decleration="run when winch-idle"),e&ce&&(r[s++].decleration="run when winch-in"),e&oe&&(r[s++].decleration="run when winch-out")}},Qe=function(e){var a,c=!1;for(i=parseInt(e,16),t=s++,r[t].leds_to_declare=i,i===Math.pow(2,n)-1&&(r[t].leds_to_declare=0,r[s++].decleration="use all leds",r[s++].decleration=""),a=0;a<n;a++)e&Math.pow(2,a)&&(r[s].led=a,r[s++].decleration="led led"+a+" = led["+a+"]",c=!0);c&&(r[s++].decleration="")},xe=function(e){var i=(16711680&e)>>16,a=(65280&e)>>8,c="",o=0;if(0===a&&i===n-1)return"all leds";for(;a<=i;)o=Math.pow(2,a),r[t].leds_to_declare&o||(r[t].leds_to_declare+=o),""!==c&&(c+=", "),c+="led"+a++;return c},ze=function(e){var n,r;switch(n=e>>8&255,r=255&e,n){case K:return 0===r?"clicks":1===r?"light-switch-position":(ye(r,o),"var"+r);case b:return"led"+r;case v:return"random";case k:return"steering";case T:return"throttle";case D:return"gear";default:return"ERROR: unknown parameter type "+n}},Be=function(e,n){var r,t="";if(r=e>>16&255,0===r?t="clicks "+n+" ":1===r?t="light-switch-position "+n+" ":(ye(r,o),t="var"+r+" "+n+" "),e&L){var i=65535&e,a=i;return a>=32768&&(a=-65536+a),t+a+"   // 0x"+i.toString(16).toUpperCase()}return t+ze(e)},Ce=function(e){var n,r;if(e&L){var t=65535&e,i=t;return i>=32768&&(i=-65536+i),i+"   // 0x"+t.toString(16).toUpperCase()}switch(n=e>>8&255,r=255&e,ye(r,o),n){case K:return 0===r?"clicks":1===r?"light-switch-position":(ye(r,o),"var"+r);case b:return"led"+r;case k:return"steering";case T:return"throttle";case D:return"gear";default:return"ERROR: unknown parameter type "+n}},Xe=function(e,n){var r,t;if(2&e)r="led"+(n>>16&255);else{var i=n>>16&255;0===i?r="clicks":1===i?r="light-switch-position":(ye(i,o),r="var"+i)}switch(t=Ce(n),e){case S.SKIP_IF_EQ_V:case S.SKIP_IF_EQ_VI:case S.SKIP_IF_EQ_L:case S.SKIP_IF_EQ_LI:return r+" == "+t;case S.SKIP_IF_NE_V:case S.SKIP_IF_NE_VI:case S.SKIP_IF_NE_L:case S.SKIP_IF_NE_LI:return r+" != "+t;case S.SKIP_IF_GE_V:case S.SKIP_IF_GE_VI:case S.SKIP_IF_GE_L:case S.SKIP_IF_GE_LI:return r+" >= "+t;case S.SKIP_IF_GT_V:case S.SKIP_IF_GT_VI:case S.SKIP_IF_GT_L:case S.SKIP_IF_GT_LI:return r+" > "+t;case S.SKIP_IF_LE_V:case S.SKIP_IF_LE_VI:case S.SKIP_IF_LE_L:case S.SKIP_IF_LE_LI:return r+" <= "+t;case S.SKIP_IF_LT_V:case S.SKIP_IF_LT_VI:case S.SKIP_IF_LT_L:case S.SKIP_IF_LT_LI:return r+" < "+t;default:return"ERROR: unknown 'skip if' opcode "+e}},Ye=function(e,n,r){var t="",i=0;return e&_e&&(t+=" light-switch-position0",++i),e&le&&(t+=" light-switch-position1",++i),e&Ie&&(t+=" light-switch-position2",++i),e&ue&&(t+=" light-switch-position3",++i),e&de&&(t+=" light-switch-position4",++i),e&he&&(t+=" light-switch-position5",++i),e&we&&(t+=" light-switch-position6",++i),e&pe&&(t+=" light-switch-position7",++i),e&Se&&(t+=" light-switch-position8",++i),e&fe&&(t+=" neutral",++i),e&Pe&&(t+=" forward",++i),e&Ee&&(t+=" reversing",++i),e&ge&&(t+=" braking",++i),e&Fe&&(t+=" indicator-left",++i),e&Le&&(t+=" indicator-right",++i),e&Ke&&(t+=" hazard",++i),e&be&&(t+=" blink-flag",++i),e&ve&&(t+=" blink-left",++i),e&ke&&(t+=" blink-right",++i),e&Te&&(t+=" winch-disabled",++i),e&De&&(t+=" winch-idle",++i),e&Re&&(t+=" winch-in",++i),e&Oe&&(t+=" winch-out",++i),e&Ve&&(t+=" servo-output-setup-centre",++i),e&Ae&&(t+=" servo-output-setup-left",++i),e&Ge&&(t+=" servo-output-setup-right",++i),e&Ne&&(t+=" reversing-setup-steering",++i),e&Me&&(t+=" reversing-setup-throttle",++i)," "+(i>1?r:n)+t},je=function(e,n){if((224&e)===E)return r[s+_++].code="skip if"+Ye(n,"is","any"),d;if((224&e)===g)return r[s+_++].code="skip if"+Ye(n,"all","all"),d;if((224&e)===F)return r[s+_++].code="skip if"+Ye(n,"not","none"),d;if(e>=f&&e<=P)return r[s+_++].code="skip if "+Xe(e,n),d;switch(e){case S.END_OF_PROGRAM:return r[s+_++].decleration="",r[s+_++].decleration="end",r[s+_++].decleration="",h;case S.GOTO:var t=16777215&n;null===r[s+t].label&&(r[s+t].label="label"+t),r[s+_++].code="goto "+r[s+t].label;break;case S.SET:r[s+_++].code=xe(n)+" = "+ze(255&n);break;case S.SET_I:r[s+_++].code=xe(n)+" = "+(255&n)+"%";break;case S.SLEEP:r[s+_++].code="sleep "+ze(n);break;case S.SLEEP_I:r[s+_++].code="sleep "+(65535&n);break;case S.FADE:r[s+_++].code="fade "+xe(n)+" stepsize "+ze(255&n);break;case S.FADE_I:0!==(255&n)?r[s+_++].code="fade "+xe(n)+" stepsize "+(255&n)+"%":r[s+_++].code="fade "+xe(n)+" stepsize 0   // (no fading)";break;case S.ASSIGN:case S.ASSIGN_I:r[s+_++].code=Be(n,"=");break;case S.ADD:case S.ADD_I:r[s+_++].code=Be(n,"+=");break;case S.SUBTRACT:case S.SUBTRACT_I:r[s+_++].code=Be(n,"-=");break;case S.MULTIPLY:case S.MULTIPLY_I:r[s+_++].code=Be(n,"*=");break;case S.DIVIDE:case S.DIVIDE_I:r[s+_++].code=Be(n,"/=");break;case S.AND:case S.AND_I:r[s+_++].code=Be(n,"&=");break;case S.OR:case S.OR_I:r[s+_++].code=Be(n,"|=");break;case S.XOR:case S.XOR_I:r[s+_++].code=Be(n,"^=");break;case S.ABS:r[s+_++].code=Be(n,"= abs");break;default:r[s+_++].code="TODO 0x"+n.toString(16)}return d},qe=function(e){var n=e>>24&255;switch(p){case l:Ue(e),p=I;break;case I:me(e),r[s++].decleration="",p=u;break;case u:Qe(e),c.push(s),p=d;break;case d:p=je(n,e);break;case h:n===S.END_OF_PROGRAMS?p=w:(s+=_,_=0,++o,Ue(e),p=I);break;case w:}},He=function(){var e,n,r;for(e in a)if(a.hasOwnProperty(e)){n=0;for(r in a[e])a[e].hasOwnProperty(r)&&++n;a[e].type=n>1?"global var":"var"}},Je=function(e){var n,r,t=[],i="";for(r in a)a.hasOwnProperty(r)&&t.push(r);for(t=t.sort(),n=0;n<t.length;n+=1)r=t[n],void 0!==a[r][e]&&(i+=a[r].type+" var"+r+"\n");return""!==i&&(i+="\n"),i},We=function(){var e,n,t,i="",a=1;for(e=0;e<s+_;e++)e===c[a-1]&&(i+=Je(a),++a),null!==r[e].leds_to_declare&&(t=r[e].leds_to_declare),null!==r[e].decleration&&(null===r[e].led?i+=r[e].decleration+"\n":(n=Math.pow(2,r[e].led),t&n&&(i+=r[e].decleration+"\n"))),null!==r[e].label&&(i+=r[e].label+":\n"),null!==r[e].code&&(i+="    "+r[e].code+"\n");return i},Ze=function(e){var n;for(n=0;n<r.length;n++)r[n]={decleration:null,label:null,code:null,led:null,leds_to_declare:null};return a={},c=[],o=1,s=0,_=0,p=l,e.forEach(function(e){qe(e)}),He(),We()},$e=function(e){var n,r,t,i=[],a=e.split("\n");for(n=0;n<a.length;n+=1)r=a[n],t=r.match(/(0x[0-9a-fA-F]{8})/),t&&i.push(t[0]);return i};return{disassemble:Ze,parse_c_code:$e}}();"undefined"!=typeof exports&&(exports.disassembler=disassembler);</script>

  <script>var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,i=function(n){var o=t.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(o)},a=e.webkitRequestFileSystem,c=e.requestFileSystem||a||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u="application/octet-stream",d=0,s=10,l=function(t){var o=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?o():setTimeout(o,s)},v=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){f(e)}}},w=function(t,f){var s,w,p,y=this,m=t.type,O=!1,h=function(){v(y,"writestart progress write writeend".split(" "))},E=function(){if(!O&&s||(s=n().createObjectURL(t)),w)w.location.href=s;else{var o=e.open(s,"_blank");void 0==o&&"undefined"!=typeof safari&&(e.location.href=s)}y.readyState=y.DONE,h(),l(s)},R=function(e){return function(){if(y.readyState!==y.DONE)return e.apply(this,arguments)}},S={create:!0,exclusive:!1};return y.readyState=y.INIT,f||(f="download"),r?(s=n().createObjectURL(t),o.href=s,o.download=f,i(o),y.readyState=y.DONE,h(),void l(s)):(e.chrome&&m&&m!==u&&(p=t.slice||t.webkitSlice,t=p.call(t,0,t.size,u),O=!0),a&&"download"!==f&&(f+=".download"),(m===u||a)&&(w=e),c?(d+=t.size,void c(e.TEMPORARY,d,R(function(e){e.root.getDirectory("saved",S,R(function(e){var n=function(){e.getFile(f,S,R(function(e){e.createWriter(R(function(n){n.onwriteend=function(t){w.location.href=e.toURL(),y.readyState=y.DONE,v(y,"writeend",t),l(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&E()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=y["on"+e]}),n.write(t),y.abort=function(){n.abort(),y.readyState=y.DONE},y.readyState=y.WRITING}),E)}),E)};e.getFile(f,{create:!1},R(function(e){e.remove(),n()}),R(function(e){e.code===e.NOT_FOUND_ERR?n():E()}))}),E)}),E)):void E())},p=w.prototype,y=function(e,t){return new w(e,t)};return p.abort=function(){var e=this;e.readyState=e.DONE,v(e,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,y}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs});</script>

  <script>var intel_hex=function(){"use strict";var r=0,e=1,t=2,n=3,o=4,s=5,a=255,i=11,d=16,h=function(d){for(var h,l,p,c,u,f,w,I,g,b=[],v=0,E=null,m=null,x=0,k=0;k+i<=d.length;){if(":"!==d.charAt(k++))throw new Error("Line "+(x+1)+" does not start with a colon (:).");for(++x,h=parseInt(d.substr(k,2),16),k+=2,l=parseInt(d.substr(k,4),16),k+=4,p=parseInt(d.substr(k,2),16),k+=2,c=d.substr(k,2*h),u=[],g=0;g<c.length;g+=2)u.push(parseInt(c.substr(g,2),16));for(k+=2*h,f=parseInt(d.substr(k,2),16),k+=2,w=h+(l>>8)+l+p&255,g=0;g<h;g++)w=w+u[g]&255;if(w=256-w&255,f!==w)throw new Error("Invalid checksum on line "+x+": got "+f+", but expected "+w);switch(p){case r:for(I=v+l;I>b.length;)b.push(a);b=b.concat(u);break;case e:if(0!==h)throw new Error("Invalid EOF record on line "+x+".");return{data:b,startSegmentAddress:E,startLinearAddress:m};case t:if(2!==h||0!==l)throw new Error("Invalid extended segment address record on line "+x+".");v=parseInt(c,16)<<4;break;case n:if(4!==h||0!==l)throw new Error("Invalid start segment address record on line "+x+".");E=parseInt(c,16);break;case o:if(2!==h||0!==l)throw new Error("Invalid extended linear address record on line "+x+".");v=parseInt(c,16)<<16;break;case s:if(4!==h||0!==l)throw new Error("Invalid start linear address record on line "+x+".");m=parseInt(c,16);break;default:throw new Error("Invalid record type ("+p+") on line "+x)}for(;"\r"===d.charAt(k)||"\n"===d.charAt(k);)k++}throw new Error("Unexpected end of input: missing or invalid EOF record.")},l=function(e,t){var n,o,s,a,i,h="";if(void 0===t&&(t=0),0!==t)throw new Error("Start address other than 0 not implemented yet");if(e.length>65536)throw new Error("Support for more than 64 Kbytes of data not implemented yet");for(n=0;n<e.length;n+=d){for(s=[],a=e.slice(n,n+d),s.push(a.length),s.push(n>>8&255),s.push(255&n),s.push(r),o=0;o<a.length;o++)s.push(a[o]);for(i=0,o=0;o<s.length;o++)i=i+s[o]&255;for(i=256-i&255,s.push(i),h+=":",o=0;o<s.length;o++)s[o]<16&&(h+="0"),h+=s[o].toString(16).toUpperCase();h+="\n"}return h+=":00000001FF\n"};return{parse:h,fromArray:l}}();"undefined"!=typeof exports&&(exports.intel_hex=intel_hex);</script>

  <script>"use strict";function hasClass(s,a){return s.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))}function addClass(s,a){hasClass(s,a)||(s.className+=" "+a)}function removeClass(s,a){if(hasClass(s,a)){var e=new RegExp("(\\s|^)"+a+"(\\s|$)");s.className=s.className.replace(e," ")}}</script>
  <script>"use strict";var gamma=function(){var a=function(a,r){return Math.round(255*Math.pow(a/255,r))},r=function(r){var t,e=[];for(r=parseFloat(r),t=0;t<256;t+=1)e.push(a(t,r));return e};return{make_table:r}}();"undefined"!=typeof exports&&(exports.gamma=gamma);</script>
  <script>var default_firmware_image=":10000000E00F00105102000001010000010100009A\n:1000100000000000000000000000000000000000E0\n:1000200000000000000000000000000001010000CE\n:10003000000000000000000001010000B91D0000E8\n:10004000010100000101000000000000E9160000AD\n:10005000010100000101000000000000000000009C\n:1000600001010000950400000101000001010000F1\n:10007000010100000101000000000000010100007A\n:100080000000000000000000000000000000000070\n:100090000000000000000000000000000000000060\n:1000A0000101000001010000010100000101000048\n:1000B0000101000001010000010100000101000038\n:1000C0000000000000000000000000000000000030\n:1000D0000000000000000000000000000000000020\n:1000E0000000000000000000000000000000000010\n:1000F0000000000000000000000000000000000000\n:10010000FEE70000002386B001930293FA239B00D0\n:1001100003930E4A0E4B11680493F533FF33059396\n:100120006B46012900D113005A680A49501E8241CA\n:100130008A739A68501E82418A77D968064A11806C\n:1001400019695B695180938006B07047C000000058\n:10015000DC050000080000109E0200100123F0B52D\n:100160008FB00893324B08AC9A7B324D62609B7F14\n:10017000A360314B1A88E2605A8822619B886361D0\n:1001800006232A68012A4ED03223AF0A039304972C\n:10019000059772B603A9294E0800B04762B6039BC3\n:1001A000002B08D001F016FE002802D0244801F0F0\n:1001B00059FA0FB0F0BD3B230393AB0904930593A9\n:1001C000204B069372B603A90800B04762B6039BA2\n:1001D000002B05D001F0FEFD0028EAD01A48E6E722\n:1001E000322304970393059772B603A90800B0471A\n:1001F00062B6039B0193002BD4D1332303930D33B9\n:100200000693104B04950594079372B603A9080052\n:10021000B04762B6039B002BCBD001F0DBFD00287A\n:10022000C7D00A48C3E7013B002BAAD1C1E7C046AB\n:1002300008000010C00000009E020010F11FFF1F08\n:1002400018270000E02E000036270000502700008D\n:1002500070B5134A134B14498B4217D380231348AC\n:1002600013495B0501C38B42FCD10023114C12489A\n:10027000124D191981420CD30020114B11498B42A8\n:100280000BD3114B1A6001F0ABFDFEE701CB4240EE\n:10029000E2E7EE5804330E60EBE701C3EFE7C04638\n:1002A000170800000000001000100010BEBAFECABF\n:1002B0000010001000000010400000101C2C000076\n:1002C00040000010C802001040000010294B0268D6\n:1002D000991CC98F70B504008A4203D30433DB8FA5\n:1002E0009A4203D900236381A38170BD224B9A42B5\n:1002F00001D801330360214B22689A4200D9236060\n:100300002368E1888B4202D10023638129E06520C4\n:10031000A57B8B4215D2A288934200D2A380CB1A30\n:100320005843A388C91A02F075F800B2642805DCA6\n:100330006081002D15D163895B42E6E76423638108\n:10034000F7E72289934200D923815B1A5843238916\n:10035000591A02F05FF800B2642808DC6081002DB1\n:10036000E9D10A22A35E002BBEDA5B42BCE764231C\n:100370006381F4E7742700001F030000FC080000FD\n:100380000B4B0C4A198849081160598849081161BA\n:100390000949097B490602D499884908116200225B\n:1003A0001A809A805A80054B01321A707047C046F5\n:1003B00048000010080000107427000046000010DC\n:1003C0002A4BF0B55D7A02222B0093433AD128499B\n:1003D00008330878274C03430B70A821264B9888D4\n:1003E000014399802548002D2DD1013A01219140EA\n:1003F0002588214F0D43ADB22580D500ED19C027CA\n:100400001F4EBF00EE5190269701B6013743C1261B\n:10041000B600AF518DB2AC46150066468035AD00D2\n:100420005E530568013229430160042ADED1154973\n:10043000154A916104219A888A439A808022134B3D\n:1004400092001A60F0BD218811432180C2210C4C1A\n:1004500089005C50A1240431A4015C500939FF39A2\n:100460005A5201680A4302600949E1E77427000013\n:10047000B00200104C40005000400050F0400050CE\n:10048000FFFF000000040DFF00C0004000E100E09D\n:1004900000FFFFFFF7B5494A494F537A002B42D17D\n:1004A00001240125A5403B681D422AD02300454A6E\n:1004B000403344499B00D35AE2005218C1218900BD\n:1004C0005058019262009BB23F49023A40051CD548\n:1004D0003E4E8B52337801222341134202D0FFF764\n:1004E0004FFF357033782B433370C122019B92004C\n:1004F0009A58C023C1211B015340019A89005350CF\n:100500003D600134042CCCD1F7BD885A834206D219\n:1005100080212C4E8900715A01315B189BB22C4905\n:100520001B1A8B52E1E72B4B274CD988208889B2C4\n:1005300061800B00814206D28023224D9B00EB5A42\n:100540000133CB189BB22180234C2178002932D073\n:1005500004321B1AD28F9BB2520093420CD91B4D0E\n:100560002B78002B03D0FFF70BFF00232B70022307\n:10057000237002233B60C7E703290CD0042913D062\n:10058000022918D1124A13800123104A11780B4313\n:1005900013700323ECE70E4A538002230B4A1178B1\n:1005A0000B4313700423E3E7094A9380FFF7E8FE47\n:1005B0000022064B1A700123DAE7C04674270000B8\n:1005C000F44000500040005054000010440000105F\n:1005D00048000010FE400050450000100222F8B50F\n:1005E0002A4D6B7A934323D1294C2378DB0705D519\n:1005F000284A1368002B01D0013B1360022723789F\n:10060000BB432370244B1A78002A11D00022234EBA\n:100610001A703378012B0CD0934203D0BB4227D001\n:10062000327005E006351B4BEA8F1A6001233370E8\n:10063000F8BD184B1B68002B15D1194BE88D198894\n:100640000A1A9A801A8AD98009181981DA82111A2D\n:1006500012181A8399821348FFF738FE082223786C\n:100660003770934323700223227813432370DFE70C\n:100670000B48FFF72BFE0C48FFF728FE2B7B5B0691\n:10068000F1D40848FFF722FEEDE7C04674270000CA\n:10069000B002001050000010460000104E00001084\n:1006A000080000102800001018000010144B1B7BDD\n:1006B0005B0710D502280FD0052814D001280AD1D5\n:1006C000382210498B7893431A00102313438B7000\n:1006D00000220D4B1A80704738220A498B789343C9\n:1006E0001A002023F2E7074B382298780100914343\n:1006F000104203D1303A0A439A70E9E79970E7E76C\n:1007000074270000B00200105A0000100B4B30B5E7\n:100710001B7B00205B070FD5094938248B78E8251F\n:100720001A002240103A2A4206D10822A34313435A\n:100730008B70044B1880013030BDC0467427000018\n:10074000B00200105A000010144810B5037B5B077C\n:100750001CD51349134B0A78D20704D51A88002AEE\n:1007600001D0013A1A801A88002A0FD1428E887867\n:100770001A808006400F042808D801F041FE0C03BF\n:1007800008070A00812040B200F062FF10BD8220FD\n:10079000F9E78320F7E78020F5E7C04674270000DB\n:1007A000B00200105A000010154A13B58021130042\n:1007B000490090680842FCD00F2202211148124CD7\n:1007C0000192019A002A0EDA80229A6092189968A2\n:1007D0001142FCD00D4BA021DB7B09065A1E934130\n:1007E0000B4A8B5013BD9A680A42FCD0019AA25C56\n:1007F0008218127B9208DA61019A013A0192E0E7CD\n:1008000000800540BC2700005C0000107C00001048\n:1008100024100000030000B50E480E290BD8080074\n:1008200001F0EEFD080A0A0A0A0A0A0A0A0A0D106D\n:1008300012141600181D00BD081D1818FBE70E3312\n:100840001800F8E70F33FBE71033F9E71133F7E748\n:100850001233F5E7C400001010B5FFF7DBFF007896\n:1008600043425841C0B210BD10B504000800110049\n:10087000FFF7D0FF227801780B1C914200D2131CA5\n:10088000237010BD70B5094B04001B780D00002BC0\n:1008900002D00A22FFF7E8FF054B5B785B0604D520\n:1008A0000B2229002000FFF7DFFF70BD9C00001025\n:1008B000B0020010F0B50378724E137087B0327832\n:1008C00004ABDD1D01320379039104000100D2B2B3\n:1008D00028002B70FFF7C8FF6B4F7B787F2B04D964\n:1008E0000C2221002800FFF7BFFF0A212000FFF79C\n:1008F000B3FF002800D0B0E00B212000FFF7ACFFD1\n:10090000002800D0A9E00D212000FFF7A5FF0290EC\n:10091000002806D00E212000FFF79EFF002800D0FF\n:100920009BE07B7801935B0710D4019B1B0702D5EA\n:10093000029B002B0AD0019BDB0600D488E00E212D\n:100940002000FFF789FF002800D081E0019B9B0772\n:1009500000D474E0019B0B225B0603D43378002B98\n:100960005ED00A2221002800FFF77EFF6278002A6D\n:1009700051D0A378D90703D53178002900D179E087\n:10098000990703D53178012900D173E0590703D5C0\n:100990003178022900D16DE0190702D53178032999\n:1009A00068D0D90602D53178042963D0990602D5DA\n:1009B000317805295ED0590602D53178062959D0FB\n:1009C0005BB2002B02DA3378072B53D0E378D907D8\n:1009D00002D5317808294DD0990702D53178002900\n:1009E00048D1590702D57978490643D4190702D569\n:1009F00079787F293ED8D90605D57978880702D538\n:100A00000C20014236D19B0605D57B78990702D58B\n:100A100014210B422ED12B78039A137007B0F0BD2E\n:100A20000C23019A1A4204D00D2221002800FFF75E\n:100A30001BFF14237A781A4298D00E2292E733785B\n:100A4000002B00D192E7019B5B0600D48EE788E77C\n:100A500021002800FFF716FF88E721002800FFF794\n:100A600011FF7B789A0700D480E70C221342E0D074\n:100A70000132DAE764212B78881A584301F054FDDB\n:100A80002870C8E79C000010B0020010F8B5A02440\n:100A900000250126124F134B24068022E651E55013\n:100AA000114B9201E550CE23A1580B43A3500522D0\n:100AB0000E4B5A621A60AC22D2041A620C4B0D4AD9\n:100AC000DA600D4A1A61FFF76FFEE55100F00EFB88\n:100AD000044BE650094B9A8D094B1A70F8BDC0467D\n:100AE00018100000041000000C10000000800540E9\n:100AF00000C00040FFFFFF0207FF03FF7427000054\n:100B00009C000010044A0549528D0B78013A93422B\n:100B100001DA01330B707047742700009C0000104D\n:100B2000034A1378002B01D0013B13707047C04675\n:100B30009C000010054B064A5B8D1178013B9942E1\n:100B400001DA137070470023FBE7C04674270000EA\n:100B50009C000010F7B55A4F01247B7A032B4BD031\n:100B600000F0DCFA574B1B78DB0749D500F0FCFAA4\n:100B7000050001F02FF900280ED0534C534B22787A\n:100B80001978914208D052481A7000F06BFD207815\n:100B900000F085FD00F0A3FD002401264D4B1A7ADC\n:100BA000944242DB3B7B3340009306D00024012675\n:100BB0001427494B1A7A944248DB484B00229C4642\n:100BC000FF27474E6346D55C464C002D00D175E0AB\n:100BD000A35CB05C83424CD2F91AA94200DD290023\n:100BE0003940CB1883424CDD03004AE000F0D4FDCD\n:100BF0003D4A872805D1146000F096FD0028F5D104\n:100C0000F7BD1368002BF7DD354D8000591EC0B2CB\n:100C10006854344D01336854102B01DC1360EBE74A\n:100C200000231360FFF7C0FDE6E73200A240154243\n:100C30000AD114206043DB68284A2949121909198E\n:100C400018180093FFF736FE0134A7E721003200A1\n:100C500010318A4015420AD12148204ADB685218D7\n:100C600041183800604318180193FFF723FE013440\n:100C70009FE7291C9D4200D9191CC9B25B1A834207\n:100C8000B2DBDBB2A3540132202A9BD1FFF78CFDEB\n:100C9000009B002BB4D079200025404200F0D8FC06\n:100CA0000D4B1E7AB542ABDA63191A7C0F4B013536\n:100CB0009B18187B800800F0CBFCF3E7B35CE1E7FE\n:100CC00074270000B00200109C000010000000100B\n:100CD000C8280000602B0000702B00009D00001051\n:100CE0007C0000105C000010C0000010BC27000059\n:100CF000C100084A0230800010184268064B0C32CE\n:100D0000CA5000225B1801219A809A798A439A710D\n:100D10007047C0465C2C0000CC000010074B02213D\n:100D20005A5E002A01DA00225A80054A0220195E22\n:100D3000528D914200DD5A807047C046A2010010DA\n:100D40007427000070B5802464040300044002D0BE\n:100D500004B2200070BDFF22050A1540052D26D8DB\n:100D6000280001F04DFB030812171B1F13405C0005\n:100D7000154BE45EEDE764201A40144BFF219B5CA9\n:100D8000584301F0D1FB04B2E3E71149012001F01F\n:100D9000FFFAF8E70F4B0A241C5FDAE70D4B1A2421\n:100DA0001C5FD6E70C4B9C786407A40FD1E701F0D9\n:100DB00011F80028CDD0094800F054FC280000F0BC\n:100DC0006EFC00F08CFCC4E7A20100105C00001077\n:100DD000FFFF000008000010B0020010922B00007E\n:100DE000F0B50D00136885B00193019983680390F5\n:100DF00000930B431360AB88002B26D11E23029374\n:100E00002B68A54F18681A1D040E2A602200203A8C\n:100E10003C70172A3ED8FF22030C134082011BD5D9\n:100E20009E4AD65CFFF78EFF03002000243813286B\n:100E300016D801F0E5FA1B1B1B1B262626262323AA\n:100E400023232C2C2C2C29292929013B9BB2AB8054\n:100E5000002BD3D005B0F0BD914A5B009E5EE1E768\n:100E6000B34205D12B6804332B6001E0B342F9D1C2\n:100E7000029B013B0293002BC2D1EBE7B342F1DBB3\n:100E8000F6E7B342EEDDF3E7B342EBDCF0E7B34263\n:100E9000E8DAEDE722001F218A43602A06D1814A61\n:100EA00012681040C200E3D00833DDE7802A05D184\n:100EB0007C4A12689043C200DAD1F5E7A02A03D138\n:100EC000784A12681040F6E7020C00926A46764EA5\n:100ED0001278764932700870020A152C4AD8142C00\n:100EE00000D3B3E0072C38D8062C00D393E0032CB2\n:100EF0006DD013D8012C00D19AE0022C60D000F004\n:100F000069FF002807D06A4800F0ACFB387800F091\n:100F1000DCFB00F0E4FB039B0C334BE0042C72D0B1\n:100F2000052CECD1FF24614B14401B78FF20632B70\n:100F300003DC5843642101F0F7FAFF22009B5D496E\n:100F40001340C0B2FE3A9C4292DC1600A640019FBC\n:100F5000374200D108550134F5E7102CCFD3504F5C\n:100F6000112C6CD8FFF7EEFEFF22009B13405B00B4\n:100F7000F8527DE71B2C0CD8494F1A2C00D37DE08A\n:100F8000172C6CD8FFF7DEFE33785B00FA5A50431B\n:100F9000EEE71F2C09D8424F1E2C76D3FFF7D2FE66\n:100FA00033785B00FA5A5040E2E7402C00D189E0E8\n:100FB000FE2CA4D101222B60AB799343AB7149E79E\n:100FC000FF231840364B4000C15A384B1970FF249C\n:100FD000364B14401B78FF20632B03DC58436421FD\n:100FE00001F0A2FAFF22009B33491340C0B2FE3A3F\n:100FF0009C4200DD3CE71600A640019F374200D12D\n:1010000008550134F4E7FF231840254B4000C15A2E\n:10101000264B197086E7FFF795FE284B80B21880A3\n:10102000002803D0142101F0F5F980B2A88011E75F\n:1010300000028009039B0C301818286018E7FFF79E\n:1010400081FE33785B00FA5A101891E7FFF77AFEB9\n:10105000337813495B005A5A101A585208E7FFF7C1\n:1010600071FE347801006400002802D1144B3B5318\n:10107000FEE6385F01F058FA3853F9E6FFF762FEF2\n:1010800033785B00FA5A104072E7FFF75BFE337863\n:101090005B00FA5A10436BE7940100105C000010EB\n:1010A000A2010010C80000106A020010A001001088\n:1010B000802B00009D0000107C00001096010010A5\n:1010C000FF7F0000FFF73EFE064A83B2002806DBE2\n:1010D000138033781188044A5B009952C8E65B425A\n:1010E000F6E7C04696010010A201001013B50024D7\n:1010F000054B9B680193019B9C4200DB13BD2000C4\n:10110000FFF7F6FD0134F6E75C2C0000024A138875\n:10111000013313807047C046A20100100F4B13B576\n:101120009B78DB0717D5002480210D4A9368019333\n:10113000019B9C420FDAA300D318DB681B680B42AB\n:101140000AD02000FFF7D4FD064BE4001C19012350\n:10115000A2791343A37113BD0134E9E7B002001073\n:101160005C2C0000CC0000100023F0B57D497E4CC3\n:1011700085B0039323600B785A0701D501222260C2\n:101180001A0703D50222206802432260702213400E\n:101190006C3A102B05D00822202B02D0402B03D113\n:1011A000102220680243226001260A88D205920F8D\n:1011B000164003D0202120680143216002210A400B\n:1011C000009203D020683E3101432160012067492D\n:1011D000674D097801918840624949788A063BD574\n:1011E000644F384328604A0605D58020604D400191\n:1011F0002F68384328600220084005D080255C4FC6\n:101200006D023A6815433D600A0707D5584D2A68B4\n:10121000002828D18027BF0117432F60CA0607D5B1\n:10122000534D2A68002821D18027FF0117432F60E2\n:101230004F4D4A0706D52F6800281AD18021090290\n:10124000394329602A684C4950004008102B13D1BB\n:1012500080235B04184316E04FB2002F01DA474F9A\n:10126000BFE7474FBDE78827BF02D5E78827FF02C2\n:10127000DCE7D021C902E3E7202B02D180239B04C5\n:10128000E8E7402B28D00860002E04D080230A68AD\n:101290001B0513430B60009B002B04D080230A68BE\n:1012A0005B0513430B606A460026364B92885A80D2\n:1012B000354FBB6800939E4211DB0026009B9E4287\n:1012C0001DDB0024009B9C4233DB2E4B274A5B88AE\n:1012D0000398137005B0F0BD8023DB04BAE72B49F7\n:1012E000F300C9188B79DB0707D5B300DB1903AA14\n:1012F000D868FFF775FDFFF711FD0136D8E7B30099\n:10130000FB18D8680368002B0DD02049F20089181B\n:101310008A79D20707D422681A4206D003AAFFF7B7\n:101320005FFDFFF7FBFC0136C8E73000FFF7E0FC8C\n:10133000F9E7154AA3009B18D8680368002B0BD166\n:101340002B684268134209D01049E300C91803AA68\n:10135000FFF746FDFFF7E2FC0134B3E72000FFF79B\n:10136000C7FCF9E7B0020010980100109C000010C3\n:101370009C01001000040080C800001000080080DC\n:1013800000020080A20100105C2C0000CC000010C4\n:1013900010B500F01FFD002802D00E4800F062F9E1\n:1013A000FFF7B4F9002802D063220B4B1A700B49E7\n:1013B0000B4A4B7B5B0706D51388002B03D1094BE7\n:1013C0001B78DB0703D504480378013303700B8EC9\n:1013D000138010BDAA2B00006E02001074270000BD\n:1013E0006C020010700200100121F8B5564CA37871\n:1013F00022788B43A3700A4205D054490B88002BF6\n:1014000001D0013B0B80524B1D7B6B0608D5A02100\n:10141000504B0906CB58002B1DD164334E494B85E8\n:10142000130704D504204D490B7883430B70022623\n:1014300032420FD004224949474F0B7813420DD155\n:101440002A203C5E1343E017001B033AC00F93436E\n:1014500003430B70F8BD64235B42DFE73F222800A3\n:1014600090430200D807002A27D02A22BF5EC00F6F\n:10147000FA17D21BD20F824206D0334206D1334331\n:101480000B70FFF785FF01E0B3430B70344E3378E8\n:10149000002BDFD02D4B1B88002BDBD100F09AFCFA\n:1014A000002802D02F4800F0DDF8702322781A427D\n:1014B0000FD0307800F0C2FB2AE02A22BE5EC00FB7\n:1014C000F217921BD20F9042E0D0012083431343C6\n:1014D000D6E73823A2781A4203D03078FFF7E6F82F\n:1014E00016E0C02322885B0030781A4202D000F058\n:1014F00041FA0DE0013807280AD800F081FF040CFA\n:1015000015181B1D20220120EB0607D4FFF7FAFA5D\n:10151000002333709EE7EB0603D5022000F05EFB4C\n:10152000F6E7FFF7FDFAF3E7FFF704FBF0E700F05B\n:10153000C3FDEDE70520D1E7FFF7E8FDE8E7072069\n:10154000D5E70820B6E7C046B00200106C020010D4\n:101550007427000034100000080000107002001012\n:101560006E020010B52B0000F0B5060087B01F001A\n:1015700002AB019100925D1D0099300000F0D0FF98\n:101580002C00092916D8303149B26B1E1970300071\n:10159000009900F03FFF013F061E09D1002F07DC34\n:1015A000019B03AA944207D800221A7007B0F0BD2D\n:1015B0000135E1E75731E7E7013C21781970013344\n:1015C000F0E7000080221649D201C86F154B024394\n:1015D000CA670822596882B09143596059680A4322\n:1015E0005A600122104B1A60104BFE321A60104BE9\n:1015F000E93A1A60E1220F4B52025B6B01930199A9\n:101600000D4B91420AD105221A6205221A60043A52\n:10161000DA600A4B07321A6002B070471122F3E712\n:10162000048004400080044094800440F080044022\n:10163000F4800440742700000040064000E100E010\n:10164000024B98684007C00F7047C04600400640F4\n:101650000422034B99681142FCD0D8617047C04600\n:101660000040064010B5040000202056002800D19C\n:1016700010BDFFF7EDFF0134F6E71FB501AC210007\n:10168000002804DA2D2323706B464042591D0023A5\n:101690000A22FFF769FF2000FFF7E4FF1FBD1FB517\n:1016A00000230A2201A9FFF75FFF01A8FFF7DAFF75\n:1016B00005B000BD1FB50823102201A9FFF754FF94\n:1016C00001A8FFF7CFFF05B000BD07B50423102226\n:1016D00001A9FFF749FF01A8FFF7C4FF07BD10B537\n:1016E0000A20FFF7B5FF10BD0B4B1A8892B2511CB0\n:1016F00089B2198009494869094988540F20198815\n:10170000084A0140198019881288914203D11A8829\n:10171000013A02401A8070478602001000400640DD\n:10172000760200107402001070B58025144C6D0014\n:10173000A3682B4205D01348FFF794FFA3681D430D\n:10174000A5608025A368AD012B4205D00E48FFF7A8\n:1017500089FFA3681D43A5608025A3682D022B4245\n:1017600005D00A48FFF77EFFA3681D43A560084B1C\n:101770001888084B1B88C01A431E9841C0B270BD20\n:1017800000400640C42B0000CD2B0000D72B0000EA\n:10179000740200108602001010B5FFF7C5FF002884\n:1017A000FBD0064B1A8892B2511C89B219800449A9\n:1017B000885C0F211A880A401A8010BD740200103C\n:1017C0007602001070B50125614C2178294230D095\n:1017D000604B1A782A420AD05F4E3088013880B2B6\n:1017E0003080002803D1AA43083082431A700225B2\n:1017F000187828420CD0594E3288013A92B2328081\n:10180000002A05D1A8431870402062788243627094\n:101810000425187828420CD0514E3288013A92B2F1\n:101820003280002A05D1A843187063787F321340B4\n:1018300063708B0731D54B4B4B4A19884B4D914206\n:1018400001D1EA8C1A804A491A88888B904250D27A\n:10185000EA8C1A802022637813421FD0934363706E\n:10186000AB7A002B07D13B4A013311780B4313703D\n:10187000AB8B394A13806B7BDB070ED54023627834\n:10188000288A134363700223324A11780B43698A12\n:10189000137000F07DFD314B188070BD5AB2002AE4\n:1018A0001ADA04232B4E32781A42F6D11343698B8D\n:1018B000288B337000F06CFD294B6A7B1880022363\n:1018C0001A42EAD040226178A88A0A4362703278CC\n:1018D000E98A13433370DCE740210B42DDD01D4819\n:1018E00002789507D9D40825AA4302708B43637008\n:1018F000D3E7FC20AA8C1A80164B1A7802401A7083\n:101900001A228A5EA97A002A15DA032902D01978E8\n:101910000A0705D54023627813435F221340E6E7A8\n:1019200080226078524202439F200240627004226B\n:1019300091431970B1E72022607802433F200240B2\n:1019400062700229A9D0082219780A431A70A4E704\n:10195000B0020010900200108C02001088020010EB\n:101960008A02001002000010FFFF00007427000030\n:1019700008000010C022054952000B88134202D112\n:1019800013430B807047024A1340FAE7B00200107D\n:101990007FFEFFFF214A70B513789B073CD5C0211D\n:1019A000138849000B4237D00120DB059B0F03420F\n:1019B00012D01B498C89322C0ED90A254C5F002C81\n:1019C00002DD8C7B60408873022116480B40118831\n:1019D000DB0101400B4313801188C9058B0F0029DF\n:1019E00013DA0F49888B14280FD91A24085F0028AE\n:1019F00003DA01208C7F6040887701210948194073\n:101A00001388C90103400B431380C02312885B0075\n:101A10001A4201D1FEF7A2FB70BDC046B002001011\n:101A2000080000107FFEFFFF02221D4B70B51B7BDC\n:101A300013422DD01B4B1C4C1B7813421AD01B4950\n:101A40001B480A78002A24D02A25425F053201DA91\n:101A500000220A708725174A097815701B074589E7\n:101A6000DB0F49B21B010B435570408BD370002331\n:101A7000907023702378032B0AD8FFF7E1FD00282C\n:101A800006D023785A1C22700A4AD056FFF7E0FD90\n:101A900070BD2A25425F052ADCDD0122D9E7C04658\n:101AA00074270000B002001004000010940200101F\n:101AB0000800001095020010034B187B18231840F3\n:101AC00043425841C0B27047742700000123054AC1\n:101AD0001370054A918F054A1180A1220449D20052\n:101AE0008B50704799020010742700009A02001072\n:101AF0000040005070B50C4A0C4D0A23D15E0C4BCF\n:101B000092895C88002909DA642118884942201AE0\n:101B1000504300F009FD24182C8070BD9888642182\n:101B2000001B5043F5E7C04608000010A402001057\n:101B30009E02001010B5FFF7BFFF002836D18022AB\n:101B40001B4BD20219681B480A431A60B422D98879\n:101B500052000A43DA801849184A99521849194A1A\n:101B60009952C021184A89005A50043158501C31EA\n:101B70005A50C9221549920099500121E532FF328D\n:101B80009950134A0F319950124A0539FF39D161E2\n:101B9000DA88F8318A43DA8006220F498B7893433A\n:101BA0001A00022313438B70FFF790FF10BDC0464D\n:101BB00000400050101000001F4E00000202000004\n:101BC000DC05000012020000FFFF000014100000FE\n:101BD0000C05000000C00040B0020010154B10B50D\n:101BE0001A7BD20612D55A8F134B022A0FD1012825\n:101BF00015D106219A788A43110002220A439A706D\n:101C0000012299780A439A70FFF760FF10BD0622FF\n:101C10009978012809D1080010400228EED1062148\n:101C20009A788A4311000422E8E70A40062AE0D1A4\n:101C3000F5E7C04674270000B002001010B504009C\n:101C4000FFF73AFF002810D170210D4A13780B429C\n:101C50000CD1E1240B48A40004800B4C8B4344803E\n:101C600050390A4C0B438480137010BD012C02D1F3\n:101C7000074B1C70F9E78B431370FEF743FAF4E748\n:101C8000B00200109E020010DC05000034080000C5\n:101C90009C020010F8B5FFF70FFF071E33D1702626\n:101CA0003B4C3C4D227832423DD0FFF723FF3A4B6C\n:101CB0001A78002A23D022781F7053065B0F022B5C\n:101CC00016D0042B28D0012B19D1344B2988344A43\n:101CD000187B5180C00617D55B8F022B14D1314B76\n:101CE000128859801A80FEF739FA2378B34311E03D\n:101CF0002B4B2988B243198010231A4322702A885B\n:101D0000294B2A49CA52F8BD7022237893431A00FE\n:101D1000402313432370F2E72988224B204A9980FD\n:101D200091805188DCE71D490B7BD8062BD5C88FE5\n:101D3000002807D0D30705D51D4A1388002B0AD0E9\n:101D4000013B13800622A3781340022B11D1154BBF\n:101D50001B882B80D3E717490E78002E06D0A126CA\n:101D6000124FF600BB5110800B70EBE7FFF7AEFE91\n:101D7000E8E7042B02D10B4B5B88EAE7062BBED1C8\n:101D8000084B9B88E5E71B07B9D5FFF7B3FEB6E71D\n:101D9000B0020010A40200109C0200107427000082\n:101DA000A60200109E020010120200000040005027\n:101DB0009A02001099020010044B1B68DB0303D544\n:101DC000034A1368013313607047C04610E000E017\n:101DD000B8020010014B18787047C046AC020010E2\n:101DE000F8B50423854C00212278854E13432370D7\n:101DF0001723844A41255365834B6D421961F06F67\n:101E0000824B0343E020F367814B40001D50C038F4\n:101E1000804DFF3828708048007B450701D07D4DFC\n:101E200029707D49497A002900D0CEE01825284242\n:101E300000D1C6E0774B1970A0210023774809062E\n:101E40000B50774880250B507648AD010B50E020B1\n:101E50004F59000138434851FF211165FE39D164C3\n:101E6000714A7249506C724D084350641069714F49\n:101E7000084310615068014351606F4A13606F4A14\n:101E80006A60AA6007222A603A68042AFCD93B608B\n:101E9000FFF798FBFEF736F9FEF792FA00F000FA2A\n:101EA000FFF748FEFEF7F2FDF36F654A1340F36754\n:101EB000584B1B78002B02D06248FFF7D3FB624AD5\n:101EC0001368013313603B68002B00D07FE00122D0\n:101ED000237893432370FEF781FB00F0EFF9FFF7BF\n:101EE00083FAFFF76FFC00F0F9F8FFF753FD0222C9\n:101EF0002378134206D0921893432370464B534ADB\n:101F00001B8F1380012322781A4209D04F490B8876\n:101F1000013B9BB20B80002B02D10433134323708F\n:101F2000FFF7B8FEFEF710FCFEF714FEFFF77CFD8E\n:101F3000384B1B78002B28D002222378134224D060\n:101F4000434E0A23F25E434B0020195E9C469142A9\n:101F500006D11A21705E40490023C95E884214D020\n:101F600063461A80728B3C4B3C481A80FFF77AFB21\n:101F70000A23F05EFFF781FB3948FFF773FB1A2352\n:101F8000F05EFFF77AFBFFF7AAFB224B1B78002BD2\n:101F900095D08021334A490513688B428FD032484F\n:101FA0001E0084463068604524D1B34287D02F4854\n:101FB0001660FFF757FB3000FFF77CFBFFF78FFB46\n:101FC0007DE7F4214942196036E72949FBE7012200\n:101FD0002378134323702B68921893432B60BFF32D\n:101FE0004F8FBFF36F8F3B68013B3B602B68134300\n:101FF0002B6070E78E42D8D9043ED3E7B0020010C0\n:1020000004800440FC8004400000044000090400F7\n:1020100000C00040AC020010742700002410000033\n:10202000281000002C100000004004402028000070\n:1020300010E000E0B80200100040005080A903004A\n:102040007FFFFBFFDE2B000040000010B4020010F9\n:10205000080000103C0000103E000010FC2B0000A7\n:10206000012C000038000010BEBAFECA092C000086\n:102070000400FFFF0022E721034B1A70034A537844\n:102080000B4053707047C046BE020010B0020010F3\n:102090001C23064A5178194206D1054BD88B054BB3\n:1020A000188002230B4353707047C046B0020010E3\n:1020B00074270000BC02001010B5FFF7E9FF0122F1\n:1020C000054843785907C90F8A43042192008B437E\n:1020D0001343437010BDC046B002001070B5604D90\n:1020E0002978CB0716D55F4A1388002B01D0013B16\n:1020F00013805D4A1388002B1CD15C4BDB8B138053\n:1021000001226B789807C00F82430220520083435C\n:1021100013436B708B0726D5554C2078082800D9BF\n:102120009BE0524B534A00F06BF9081525364D6180\n:102130006E7E8D00013B1380ECE7998C908B88427A\n:1021400011D892898A420ED81A8C464B1A800123E4\n:10215000237008E0DB8C918B994202D892899A42D5\n:1021600002D9FFF787FF70BD3E4B1B88002BFAD1C9\n:102170000223EDE7908BD98C8842F2D89089198D93\n:102180008842F0D3198C374B19800A23D35EDB4386\n:10219000DB0F0333DCE7908BD98C8842E1D81B8DB1\n:1021A0000A21525E5B429A42E2DC2E4B1B88002BD6\n:1021B000D9D0FFF76DFF05236A78237003331343EB\n:1021C0006B70D0E7908BD98C8842CAD80A21525EB6\n:1021D0001B8D9A42CCDB234B1B88002BC3D1FFF70E\n:1021E00057FF07236A7823700933E8E70A21515E15\n:1021F0001A8D9142B5DC52429142B4DD5A8C194B92\n:102200001A800623A4E70A21525E1B8D9A42A8DC9D\n:102210005B429A4201DA05239AE7124B1B88002B96\n:1022200000D19EE79FE70A21515E1A8D50428142FC\n:1022300000DA96E7914200DB95E75A8C094B1A8049\n:10224000082385E71B8D0A21525E59428A4200DA33\n:1022500087E79A42E1DD07237AE7002378E7C04663\n:10226000B0020010C0020010BC0200107427000071\n:10227000BE020010080000104BB2002B01DA013939\n:10228000FF39837B4181002B02D043895B4243812C\n:102290000A22835E002B00DA5B42838170470000D4\n:1022A000044B5B7A012B04D1034A073311780B43AB\n:1022B0001370704774270000B0020010F8B5254B6A\n:1022C0005E7A012E10D10222234C2378934323708F\n:1022D000FFF72AFA002807D0FFF75EFA1F4D030028\n:1022E000872802D1863B2B70F8BD287803282ED88A\n:1022F00000F07CF8EE02070B194A137002232B70D2\n:10230000E6E7174A53700323F9E7154F1548397864\n:10231000BB70FFF7B1FF79781348FFF7ADFF0821D5\n:10232000B87803093340DA0023788B4313432370D2\n:10233000084B1B7B5B0606D45C31304200D1383140\n:102340000A48FFF799FF02232278134323700023E2\n:10235000D5E7C04674270000B0020010C502001087\n:10236000C202001008000010180000102800001021\n:1023700006490A88D0089308434053405009434017\n:102380005208DB0313430B807047C046C60200109F\n:10239000F8B504000D00002800D10134AC421CD275\n:1023A000104E3388002B0FD10F4F3B683A881B0C1F\n:1023B0009A4214D053403380FFF7DAFF3B683288EB\n:1023C0001B0C1B0413433B60FFF7D2FF291B308813\n:1023D000013100F08FF96418A4B22000F8BD012388\n:1023E000E9E7C046C60200104000001002B4714682\n:1023F00049084900095649008E4402BC7047C0464E\n:1024000002B4714649084900095C49008E4402BC87\n:102410007047C046002243088B4274D303098B42A5\n:102420005FD3030A8B4244D3030B8B4228D3030CA4\n:102430008B420DD3FF22090212BA030C8B4202D346\n:102440001212090265D0030B8B4219D300E0090A6E\n:10245000C30B8B4201D3CB03C01A5241830B8B4277\n:1024600001D38B03C01A5241430B8B4201D34B0360\n:10247000C01A5241030B8B4201D30B03C01A5241C5\n:10248000C30A8B4201D3CB02C01A5241830A8B424A\n:1024900001D38B02C01A5241430A8B4201D34B0233\n:1024A000C01A5241030A8B4201D30B02C01A524197\n:1024B000CDD2C3098B4201D3CB01C01A524183094B\n:1024C0008B4201D38B01C01A524143098B4201D385\n:1024D0004B01C01A524103098B4201D30B01C01AB0\n:1024E0005241C3088B4201D3CB00C01A524183082A\n:1024F0008B4201D38B00C01A524143088B4201D357\n:102500004B00C01A5241411A00D2014652411046B6\n:102510007047FFE701B5002000F0F0F802BDC046AB\n:102520000029F7D076E7704703460B437FD400229B\n:1025300043088B4274D303098B425FD3030A8B4257\n:1025400044D3030B8B4228D3030C8B420DD3FF22C1\n:10255000090212BA030C8B4202D31212090265D08F\n:10256000030B8B4219D300E0090AC30B8B4201D342\n:10257000CB03C01A5241830B8B4201D38B03C01A89\n:102580005241430B8B4201D34B03C01A5241030B00\n:102590008B4201D30B03C01A5241C30A8B4201D3B1\n:1025A000CB02C01A5241830A8B4201D38B02C01A5C\n:1025B0005241430A8B4201D34B02C01A5241030AD3\n:1025C0008B4201D30B02C01A5241CDD2C3098B42B8\n:1025D00001D3CB01C01A524183098B4201D38B0135\n:1025E000C01A524143098B4201D34B01C01A5241D8\n:1025F00003098B4201D30B01C01A5241C3088B421D\n:1026000001D3CB00C01A524183088B4201D38B0007\n:10261000C01A524143088B4201D34B00C01A5241A9\n:10262000411A00D201465241104670475DE0CA0F80\n:1026300000D04942031000D34042534000229C4640\n:1026400003098B422DD3030A8B4212D3FC2289014A\n:1026500012BA030A8B420CD3890192118B4208D320\n:10266000890192118B4204D389013AD0921100E082\n:102670008909C3098B4201D3CB01C01A5241830996\n:102680008B4201D38B01C01A524143098B4201D3C3\n:102690004B01C01A524103098B4201D30B01C01AEE\n:1026A0005241C3088B4201D3CB00C01A5241830868\n:1026B0008B4201D38B00C01A5241D9D243088B42BE\n:1026C00001D34B00C01A5241411A00D20146634661\n:1026D00052415B10104601D34042002B00D54942C5\n:1026E000704763465B1000D3404201B5002000F004\n:1026F00005F802BD0029F8D016E770477047C046BC\n:10270000F8B5C046F8BC08BC9E467047F8B5C04650\n:10271000F8BC08BC9E4670474552524F523A207052\n:1027200072657061726520736563746F7220666193\n:10273000696C65640A004552524F523A20657261D5\n:1027400073652070616765206661696C65640A0065\n:102750004552524F523A20636F70792052414D20BA\n:10276000746F20666C617368206661696C65640AC9\n:10277000000000004C4272630100010009000000EB\n:102780000803000019007D0019007D002800640086\n:10279000320011001900640008000C001E00050042\n:1027A0000000FA000F00320000C201001900020010\n:1027B0003200C2015802C409640000004C42726336\n:1027C00002000100312E380000000000000000006F\n:1027D00001010101010101020202020203030303DC\n:1027E0000404040405050506060607070808080989\n:1027F000090A0A0A0B0B0C0C0D0D0E0E0F0F101010\n:102800001111121213131415151616171818191A78\n:102810001A1B1C1C1D1E1E1F2020212223232425C1\n:102820002626272829292A2B2C2D2E2E2F303132EF\n:1028300033343535363738393A3B3C3D3E3F4041FD\n:1028400042434445464748494A4B4C4D4E4F5051F0\n:10285000525354565758595A5B5C5D5F60616263CE\n:1028600064666768696B6C6D6E6F7172737476778E\n:10287000787A7B7C7E7F808183848687888A8B8C34\n:102880008E8F919293959698999A9C9D9FA0A2A3C2\n:10289000A5A6A8A9ABACAEAFB1B2B4B5B7B8BABC37\n:1028A000BDBFC0C2C3C5C7C8CACCCDCFD0D2D4D596\n:1028B000D7D9DADCDEE0E1E3E5E6E8EAECEDEFF1DA\n:1028C000F3F4F6F8FAFBFDFF6C696768745F7377E1\n:1028D000697463685F706F736974696F6E2000005C\n:1028E000000000000000FFFFFFFF000000000000EC\n:1028F00000000000000000000000FFFFFFFF0000DC\n:10290000000000000000000000000000000000FFC8\n:10291000FFFF0000000000000000000000000000B9\n:10292000000000FFFFFF00000000000000000000AA\n:102930000000000000000000FFFF00000000000099\n:10294000000000000000000000000000FFFF000089\n:102950000000000000000000000000000000000077\n:10296000000000000000000000FF00000000000068\n:102970000000000000000000000000000000FF0058\n:10298000000000000000000000000000000054FFF4\n:102990000000000000000000000000000000000037\n:1029A000000054FF000000000000000000000000D4\n:1029B0000000000000000000FF0000000000000018\n:1029C000000000000000000000000000FF00000008\n:1029D00000000000000000000000000000000000F7\n:1029E00000FF0000000000000000000000000000E8\n:1029F000000000000000FF000000000000000000D8\n:102A000000000000000000FF0000000000000000C7\n:102A10000000000000FF00000000000000000000B7\n:102A200000000000000000000000000000000000A6\n:102A30000000000000000000000000000000000096\n:102A40000000000000000000000000000000000086\n:102A50000000000000000000000000000000000076\n:102A60000000000000000000000000000000000066\n:102A70000000000000000000000000000000000056\n:102A80000000000000000000000000000000000046\n:102A90000000000000000000000000000000000036\n:102AA0000000000000000000000000000000000026\n:102AB0000000000000000000000000000000000016\n:102AC0000000000000000000000000000000000006\n:102AD00000000000000000000000000000000000F6\n:102AE00000000000000000000000000000000000E6\n:102AF00000000000000000000000000000000000D6\n:102B000000000000000000000000000000000000C5\n:102B100000000000000000000000000000000000B5\n:102B200000000000000000000000000000000000A5\n:102B30000000000000000000000000000000000095\n:102B40000000000000000000000000000000000085\n:102B50000000000000000000000000000000000075\n:102B60004C4272631000010010000000E0280000D9\n:102B70004C4272632000010010000000202A000077\n:102B8000554E4B4E4F574E204F50434F44452030EB\n:102B90007800554E4B4E4F574E20504152414D45B7\n:102BA000544552205459504520006164645F636C61\n:102BB00069636B0A00636C69636B5F74696D656F51\n:102BC00075740A006F76657272756E0A00667261BE\n:102BD0006D656572720A006E6F6973650A004C69F3\n:102BE00067687420636F6E74726F6C6C65722069B5\n:102BF0006E697469616C697A65640A0053543A209D\n:102C00000020202054483A2000537461636B2064F4\n:0C2C10006F776E20746F20307800000099\n:102C1C00FF00FFFFFF00000000000000E204DC05E5\n:102C2C00D60600000000000000000000E204DC05F5\n:102C3C00D60600000000000000000000E204DC05E5\n:102C4C00D606000000000000D00F0010E703E703D9\n:102C5C004C4272633000010004000000CC2C0000D8\n:102C6C00F02C0000142D0000502D0000000000007E\n:102C7C000000000000000000000000000000000048\n:102C8C000000000000000000000000000000000038\n:102C9C000000000000000000000000000000000028\n:102CAC000000000000000000000000000000000018\n:102CBC000000000000000000000000000000000008\n:102CCC000100000000000000FFFFFFFF00001F05D7\n:102CDC0000001F036406070300000007000000014A\n:102CEC00000000FE0200000000000000FFFFFFFFDC\n:102CFC0000001F0500001F0364020303000000070F\n:102D0C0000000001000000FE600000000000000058\n:102D1C00FFFFFFFF0000000700001F0500001F035E\n:102D2C00000000680700000164060603640C0C0335\n:102D3C0000000070000000016404050300000001A5\n:102D4C00000000FE1C00000000000000FFFFFFFF61\n:102D5C000000000700001F0500001F03000000A278\n:102D6C000A000001000000A40D0000016406070326\n:102D7C00640C0D030000000164060603640C0C03D4\n:102D8C000000000164070703640D0D03000000013F\n:102D9C00000000FE000000FF00000000000000002A\n:102DAC000000000000000000000000000000000017\n:102DBC000000000000000000000000000000000007\n:102DCC0000000000000000000000000000000000F7\n:102DDC0000000000000000000000000000000000E7\n:102DEC0000000000000000000000000000000000D7\n:102DFC0000000000000000000000000000000000C7\n:00000001FF\n",default_light_program='// These light programs provide generic functionality desired in most\n// light controller installations.\n//\n// They handle when there is no incoming servo signal, letting the user visibly\n// know that the light controller is initializing, and guide the user through\n// steering/throttle reversing as well as the servo output endpoint setup.\n\n\n// ----------------------------------------------------------------------------\n// Light up the front indicators statically when there is no incoming servo\n// signal\n// ----------------------------------------------------------------------------\nrun when no-signal\n\n// Take over all LEDs\nuse all leds\n\nled indicator-front-l = led[6]\nled indicator-front-r = led[7]\n\nloop:\n    // Turn fading off for all leds, we want them to switch on/off immediately\n    fade all leds stepsize 0\n\n    // Turn all lights\n    // Turn all lights off, then the indicators on the front full on.\n    // This won\'t cause any flicker as the light output is only executed\n    // when a light program executes a "sleep" statement (or at the end of\n    // a light program).\n    all leds = 0%\n    indicator-front-l, indicator-front-r = 100%\n\n    // We done our bit, so yield for 20 ms to give processing time to other\n    // parts of the firmware.\n    sleep 0\n\n    // Run the program in a loop so it always shows the indicators, even if\n    // after being interrupted by another light program with higher priority.\n    goto loop\n\nend\n\n\n// ----------------------------------------------------------------------------\n// Light up the main beam lights while the light controller is initializing.\n//\n// Normally the main beam would be on only if the parking lights are already\n// on, so just the main beam lighting up is a unique identifiaction.\n// ----------------------------------------------------------------------------\nrun when initializing\n\nuse all leds\nled main-beam-l = led[2]\nled main-beam-r = led[3]\n\nloop:\n    fade all leds stepsize 0\n    all leds = 0%\n    main-beam-l, main-beam-r = 100%\n    sleep 0\n    goto loop\n\nend\n\n\n// ----------------------------------------------------------------------------\n// Steering an throttle reversing setup\n//\n// This program runs after 7 CH3-clicks. The user is expected to turn the\n// steering wheel to the same direction as the indicators are lighting up,\n// and push the throttle forward.\n//\n// Therefore we turn the left indicators on until we detect the user having\n// given significant steering input (reversing-setup-steering goes off).\n// We also turn the high beam on until we detect significant throttle input\n// (reversing-setup-throttle goes off).\n//\n// Once both are off the light controller lights resume their normal function\n// as the condition for running this program is "false".\n// ----------------------------------------------------------------------------\nrun when reversing-setup-steering or reversing-setup-throttle\n\nuse all leds\nled high-beam-l = led[4]\nled high-beam-r = led[5]\nled indicator-front-l = led[6]\nled indicator-rear-l = led[12]\n\nloop:\n    sleep 0\n\n    fade all leds stepsize 0\n\n    // Turn all lights off, then indicators or high beam on selectivly.\n    // This won\'t cause any flicker as the light output is only executed\n    // when a light program executes a "sleep" statement (or at the end of\n    // a light program).\n    all leds = 0%\n\n    skip if is reversing-setup-steering         // Steering setup?\n    goto not_steering                           // No: check throttle\n    indicator-front-l, indicator-rear-l = 100%  // Yes: light up the indicators\n\nnot_steering:\n    skip if is reversing-setup-throttle         // Throttle setup?\n    goto loop                                   // No: start over\n    high-beam-l, high-beam-r = 100%             // Yes: light up high beam\n    goto loop\n\nend\n\n\n// ----------------------------------------------------------------------------\n// Servo output endpoint setup\n//\n// This program runs after 8 CH3-clicks. The user can now use the steering\n// wheel on the transmitter to directly drive the servo output (i.e. the\n// servo output behaves like the servo would be connected to the steering\n// output of the receiver).\n//\n// The user can now setup what he considers "left" endpoint (or gear 1 if it\n// is a gearbox servo). Then one CH3-click switches to "center" (or gear 2).\n// Another CH3-click switches to "right" (or gear 3). A final CH3-click\n// ends the procedure, saves the endpoints and resumes normal operation.\n//\n// At any point in time during the setup two or more clicks cancel the servo\n// output setup and restore the original endpoints.\n// ----------------------------------------------------------------------------\n\n\n// Note: "or" between the conditions is optional, same meaning with or without\nrun when servo-output-setup-centre servo-output-setup-left servo-output-setup-right\n\nuse all leds\nled indicator-front-l = led[6]\nled indicator-front-r = led[7]\nled indicator-rear-l = led[12]\nled indicator-rear-r = led[13]\n\nloop:\n    sleep 0\n\n    fade all leds stepsize 0\n    all leds = 0%\n\n    skip if not servo-output-setup-left\n    goto left\n    skip if not servo-output-setup-right\n    goto right\n    // If it is neither left nor right, it must be centre...\n    // Otherwise the program would not be run in the first place, see RUN WHEN\n    // above!\n\n    // Centre setup: light up all four indicators\ncentre:\n    indicator-front-l, indicator-front-r, \\\n        indicator-rear-l, indicator-rear-r = 100%\n    goto loop\n\n    // Left setup: light up all indicators on the left side\nleft:\n    indicator-front-l, indicator-rear-l = 100%\n    goto loop\n\n    // Right setup: light up all indicators on the right side\nright:\n    indicator-front-r, indicator-rear-r = 100%\n    goto loop\n\nend\n';</script>
  <script>var hardware_test_configuration={config:{firmware_version:1,mode:1,esc_mode:0,slave_output:!1,preprocessor_output:!1,winch_output:!1,steering_wheel_servo_output:!0,gearbox_servo_output:!1,ch3_is_local_switch:!1,ch3_is_momentary:!1,auto_brake_lights_forward_enabled:!0,auto_brake_lights_reverse_enabled:!0,auto_brake_counter_value_forward_min:25,auto_brake_counter_value_forward_max:125,auto_brake_counter_value_reverse_min:25,auto_brake_counter_value_reverse_max:125,auto_reverse_counter_value_min:40,auto_reverse_counter_value_max:100,brake_disarm_counter_value:50,blink_counter_value:17,indicator_idle_time_value:25,indicator_off_timeout_value:100,centre_threshold_low:8,centre_threshold_high:12,blink_threshold:30,light_switch_positions:5,initial_light_switch_position:0,initial_endpoint_delta:250,ch3_multi_click_timeout:15,winch_command_repeat_time:50,baudrate:115200,no_signal_timeout:25,number_of_gears:2,gearbox_servo_active_time:50,gearbox_servo_idle_time:450,servo_pulse_min:600,servo_pulse_max:2500,startup_time:100},local_leds:{0:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:255,light_switch_position2:255,light_switch_position3:255,light_switch_position4:255,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},1:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:255,light_switch_position2:255,light_switch_position3:255,light_switch_position4:255,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},2:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:255,light_switch_position3:255,light_switch_position4:255,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},3:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:255,light_switch_position3:255,light_switch_position4:255,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},4:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:255,light_switch_position4:255,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},5:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:255,light_switch_position4:255,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},6:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:255,indicator_right:0},7:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:255},8:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:84,brake_light:255,reversing_light:0,indicator_left:0,indicator_right:0},9:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:84,brake_light:255,reversing_light:0,indicator_left:0,indicator_right:0},10:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:255,indicator_left:0,indicator_right:0},11:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:255,indicator_left:0,indicator_right:0},12:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:255,indicator_right:0},13:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:255},14:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:255,reversing_light:0,indicator_left:0,indicator_right:0},15:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:255,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},led_count:16},slave_leds:{0:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},1:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},2:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},3:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},4:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},5:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},6:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},7:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},8:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},9:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},10:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},11:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},12:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},13:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},14:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},15:{max_change_per_systick:0,reduction_percent:0,weak_light_switch_position0:!1,weak_light_switch_position1:!1,weak_light_switch_position2:!1,weak_light_switch_position3:!1,weak_light_switch_position4:!1,weak_light_switch_position5:!1,weak_light_switch_position6:!1,weak_light_switch_position7:!1,weak_light_switch_position8:!1,weak_tail_light:!1,weak_brake_light:!1,weak_reversing_light:!1,weak_indicator_left:!1,weak_indicator_right:!1,always_on:0,light_switch_position0:0,light_switch_position1:0,light_switch_position2:0,light_switch_position3:0,light_switch_position4:0,light_switch_position5:0,light_switch_position6:0,light_switch_position7:0,light_switch_position8:0,tail_light:0,brake_light:0,reversing_light:0,indicator_left:0,indicator_right:0},led_count:16},gamma:{gamma_value:"1.8"},light_programs:"// Test program\n//\n// This light controller firmware is designed to test the hardware.\n// As soon as power is applied it runs a test pattern on all LEDs.\n\nrun always\n\nled led0 = led[0]\nled led1 = led[1]\nled led2 = led[2]\nled led3 = led[3]\nled led4 = led[4]\nled led5 = led[5]\nled led6 = led[6]\nled led7 = led[7]\nled led8 = led[8]\nled led9 = led[9]\nled led10 = led[10]\nled led11 = led[11]\nled led12 = led[12]\nled led13 = led[13]\nled led14 = led[14]\nled led15 = led[15]\n\nvar brightness\nvar delay_time\n\nrestart:\n    fade all leds stepsize 0\n    all leds = 0%\n    brightness = 100    // percent\n    delay_time = 100    // milliseconds\n\n    // STEP 1: running lights, 100ms per LED, with decresing brightness in 5 steps\nchase:\n    led0 = brightness\n    sleep delay_time\n    led0 = 0\n    led1 = brightness\n    sleep delay_time\n    led1 = 0\n    led2 = brightness\n    sleep delay_time\n    led2 = 0\n    led3 = brightness\n    sleep delay_time\n    led3 = 0\n    led4 = brightness\n    sleep delay_time\n    led4 = 0\n    led5 = brightness\n    sleep delay_time\n    led5 = 0\n    led6 = brightness\n    sleep delay_time\n    led6 = 0\n    led7 = brightness\n    sleep delay_time\n    led7 = 0\n    led8 = brightness\n    sleep delay_time\n    led8 = 0\n    led9 = brightness\n    sleep delay_time\n    led9 = 0\n    led10 = brightness\n    sleep delay_time\n    led10 = 0\n    led11 = brightness\n    sleep delay_time\n    led11 = 0\n    led12 = brightness\n    sleep delay_time\n    led12 = 0\n    led13 = brightness\n    sleep delay_time\n    led13 = 0\n    led14 = brightness\n    sleep delay_time\n    led14 = 0\n    led15 = brightness\n    sleep delay_time\n    led15 = 0\n\n    brightness -= 20\n    skip if brightness < 20\n    goto chase\n\n\n    // STEP2: All leds on for 5 seconds\n    all leds = 100%\n    sleep 5000\n\n\n    // STEP3: All leds increasing brightness for 1 second\n    all leds = 20%\n    sleep 1000\n    all leds = 30%\n    sleep 1000\n    all leds = 60%\n    sleep 1000\n    all leds = 80%\n    sleep 1000\n    all leds = 100%\n    sleep 1000\n\n    goto restart\n\n    end\n"};</script>
  <script>!function(){var t={};this.tmpl=function n(p,i){var e=/\W/.test(p)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+p.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):t[p]=t[p]||n(document.getElementById(p).innerHTML);return i?e(i):e}}();</script>
  <script>"use strict";var ui=function(){var e,t=[],n=function(e){var t,n=document.getElementById(e.target.name),i=Boolean("none"!==n.style.display),a=document.getElementsByClassName("led_features");for(t=0;t<a.length;t+=1)a[t].style.display="none";i||(n.style.display="")},i=function(e){function t(e){var t=e.target.parentNode,n=parseInt(o.value,10);for((isNaN(n)||!isFinite(n)||n<o.min||n>o.max)&&(n=l);t.firstChild;)t.removeChild(a.firstChild);if(0!==n){var i=document.createTextNode(n);t.appendChild(i)}}function n(e){var t=e.target;switch(e.keyCode){case 27:t.value=l,t.blur();break;case 13:t.blur()}}var i=e.target;if("TD"===i.nodeName){var a=document.getElementById(i.id),l=parseInt(a.textContent,10);!isNaN(l)&&isFinite(l)||(l=0);var o=document.createElement("input");for(o.type="number",o.min=0,o.max=100,o.step=1,o.value=l;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(o),o.focus(),o.addEventListener("blur",t,!1),o.addEventListener("keydown",n,!1)}},a=function(){function e(e,t){var a,l,o,s,r=document.getElementById(e),h=r.getElementsByClassName("led_config");for(a=0;a<h.length;a+=1){for(l=h[a].getElementsByTagName("td"),o=0;o<l.length;o+=1)l[o].id=t+a+"field"+o,l[o].addEventListener("click",i,!0);s=h[a].getElementsByClassName("spanner")[0],s.name=t+a+"features",s.addEventListener("click",n,!0)}}e("leds_master","master"),e("leds_slave","slave")},l=function(){function e(e,t){var n,i,a,l=document.getElementById(e),o=l.getElementsByClassName("led_features");for(i=0;i<o.length;i+=1)for(o[i].id=t+i+"features",o[i].style.display="none",n=o[i].getElementsByClassName("incandescent"),n[0].id=t+i+"incandescent",n=o[i].getElementsByClassName("weak_ground"),n[0].id=t+i+"weak_ground",n=o[i].getElementsByClassName("checkbox"),a=0;a<n.length;a+=1)n[a].id=t+i+"checkbox"+a}e("leds_master","master"),e("leds_slave","slave")},o=function(){function e(e,t){var n,i,a=document.getElementById(e),l=a.getElementsByTagName("tbody")[0],o=tmpl("led_row_template"),s="<table>";for(n=0;n<16;n+=1)s+=o({even_odd:n%2?"odd":"even",led_number:n+t});for(s+="</table>",i=document.getElementById("table_helper"),i.innerHTML=s,i=i.getElementsByTagName("tbody")[0];null!==i.firstChild;)l.appendChild(i.firstChild)}e("leds_master",0),e("leds_slave",16)},s=function(){function e(e,t){var n,i=document.getElementsByName(e);for(n=0;n<i.length;n+=1)i[n].title=t}e("help_led_light_switch","The virtual light switch has 9 positions. A single click on AUX/CH3 increments the light switch position, a double-click decrements the light switch position.\nIf you want an LED to be on at multiple positions simply fill in values at all the desired light switch positions where the LED should turn on.\nExample: For parking lights (aka positioning lights), set a value for light switch position 1. For main beam (aka. head lamps) set a value at both light switch position 1 and 2. For high beam set a value at light switch positions 1, 2 and 3. This way the light behaviour corresponds to a real car in most countries."),e("help_led_always_on","The LED will be always on at the given brightness, regardless of the car state."),e("help_led_tail","Tail light (aka. rear position light). This function applies when the light position switch is at any state other than 0."),e("help_led_brake",'Brake light function.\nHint: to do a combined tail and brake light, set the "tail" entry to a low value (e.g. 33%), and the "brake" entry to a high value (e.g. 100%).'),e("help_led_reverse","Reversing light function; turns on when the car is driving backwards.\nNote: see main configuration above to configure your ESC type!"),e("help_led_indicator","Indicator, aka. turn signals.\nAlso applies to the hazard light function."),e("help_click_to_change","Click to change"),e("help_toggle_features","Click to show/hide advanced LED features"),e("help_incandescent","LEDs emit light instantly, while incandescent lamps gradually increase in brightness over a short amount of time.\nBy setting a value greater than 0 in this field, the LED only changes brightness up to the given percentage in a period of 20 ms, and therfore fading in and out rather than instantly turning on or off.\nThe smaller the value, the slower the LED fades. A value of 15% results in a fade time of approx 130 ms from off to on, which is a realistic simulation for incandescent bulbs in vintage cars.\nNote that slow fading causes visible steps at lower brightness values due to the limited control range of the LED driver."),e("help_weak_ground","In old cars the ground connection often corrodes, especially on rear light units. This causes current flow to be restricted, which in turn causes lights to go dim whenever other lights in the same fixture go on.\nThis can be simulated by setting a reduction value and ticking the boxes corresponding to the light function that should cause dimming.\nExample: the tail light should be dimmed whenever the left indicator goes on. Configure an LED to be a tail light by setting a value in the Tail field. Click on the spanner of that LED and enter 20% reduction, and tick the checkbox in the left indicator column. The tail light LED will now dim by 20% whenever the left indicator light is on.")},r=function(){document.addEventListener("keydown",function(e){var t=navigator.platform.match("Mac")?e.metaKey:e.ctrlKey;return t&&83===e.which?(e.preventDefault(),document.getElementById("save_config").click(),!1):t&&72===e.which?(e.preventDefault(),document.getElementById("save_firmware").click(),!1):void 0})},h=function(){e=CodeMirror.fromTextArea(document.getElementById("light_programs"),{indentUnit:4,tabSize:4,lineNumbers:!0,mode:"light-program",autoCloseBrackets:!0,showCursorWhenSelecting:!0,styleActiveLine:!0,keyMap:"sublime",theme:"monokai",gutters:["CodeMirror-lint-markers"],lint:!1,extraKeys:{"Shift-Delete":"deleteLine",F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},"Shift-Ctrl-A":function(){document.getElementById("light_programs_assembler").click()},Esc:function(e){if(e.listSelections().length>1){var t=e.listSelections()[0];e.setSelection(t.anchor,t.head,{scroll:!1})}else e.getOption("fullScreen")?e.setOption("fullScreen",!1):e.execCommand("clearSearch")}}})},d=function(n){t=n,t.length>0?e.setOption("lint",function(){return t}):e.setOption("lint",!1)},c=function(){e.setValue(document.getElementById("light_programs").value)},u=function(){return e.getValue()},g=function(){o(),a(),l(),s(),h(),r()};return{init:g,update_editor:c,update_errors:d,get_editor_content:u}}();</script>
  <script>"use strict";var app=function(){var e,t,_,i,o,a,n,s,r,l={},c=20,u=25,d="Configuration",h="Gamma table",m="Light programs",g="Local LEDs",p="Slave LEDs",v={1:d,2:h,16:g,32:p,48:m,SECTION_CONFIG:1,SECTION_GAMMA:2,SECTION_LOCAL_LEDS:16,SECTION_SLAVE_LEDS:32,SECTION_LIGHT_PROGRAMS:48},w="Master, servo inputs",f="Master, pre-processor input",y="Master, CPPM input",k="Slave",b="Hardware test",E={0:w,1:f,2:y,3:k,99:b,MASTER_WITH_SERVO_READER:0,MASTER_WITH_UART_READER:1,MASTER_WITH_CPPM_READER:2,SLAVE:3,TEST:99},x={0:38400,1:115200,38400:0,115200:1},B=function(e,t){return 256*e[t+1]+e[t]},I=function(e,t){return 256*e[t+3]*256*256+65536*e[t+2]+256*e[t+1]+e[t]},C=function(e,t,_){_=parseInt(_,10),isNaN(_)&&(console.log("ERROR in set_uint8 when setting offset "+t+": value='"+_+"'"),_=0),e[t]=_%256},R=function(e,t,_){_=parseInt(_,10),isNaN(_)&&(console.log("ERROR in set_uint16 when setting offset "+t+": value='"+_+"'"),_=0),e[t]=_%256,e[t+1]=(_/256>>0)%256},S=function(e,t,_){_=parseInt(_,10),isNaN(_)&&(console.log("ERROR in set_uint32 when setting offset "+t+": value='"+_+"'"),_=0),e[t]=_%256,e[t+1]=(_/256>>0)%256,e[t+2]=(_/65536>>0)%256,e[t+3]=(_/16777216>>0)%256},T=function(e){for(var t=[],_=0;_+4<=e.length;)t.push(I(e,_)),_+=4;return t},A=function(t){function _(e,t){function _(e){return Boolean(o&e)}var i={};i.max_change_per_systick=e[t],i.reduction_percent=e[t+1];var o=B(e,t+2);return i.weak_light_switch_position0=_(1),i.weak_light_switch_position1=_(2),i.weak_light_switch_position2=_(4),i.weak_light_switch_position3=_(8),i.weak_light_switch_position4=_(16),i.weak_light_switch_position5=_(32),i.weak_light_switch_position6=_(64),i.weak_light_switch_position7=_(128),i.weak_light_switch_position8=_(256),i.weak_tail_light=_(512),i.weak_brake_light=_(1024),i.weak_reversing_light=_(2048),i.weak_indicator_left=_(4096),i.weak_indicator_right=_(8192),i.always_on=e[t+4],i.light_switch_position0=e[t+5],i.light_switch_position1=e[t+6],i.light_switch_position2=e[t+7],i.light_switch_position3=e[t+8],i.light_switch_position4=e[t+9],i.light_switch_position5=e[t+10],i.light_switch_position6=e[t+11],i.light_switch_position7=e[t+12],i.light_switch_position8=e[t+13],i.tail_light=e[t+14],i.brake_light=e[t+15],i.reversing_light=e[t+16],i.indicator_left=e[t+17],i.indicator_right=e[t+18],i}var i,o=e.data,a=e.offset[t],n={},s=o[a];n.led_count=s;var r=I(o,a+4);for(i=0;i<s;i+=1)n[i]=_(o,r+20*i);return n},N=function(){var t=e.data,_=e.offset[h],i={};return i.gamma_value=String.fromCharCode(t[_])+String.fromCharCode(t[_+1])+String.fromCharCode(t[_+2]),i},L=function(){function t(e){return Boolean(a&e)}var _=e.data,i=e.offset[d],o={};o.firmware_version=_[i],o.mode=_[i+1],o.esc_mode=_[i+2];var a=I(_,i+4);return o.slave_output=t(1),o.preprocessor_output=t(2),o.winch_output=t(4),o.steering_wheel_servo_output=t(8),o.gearbox_servo_output=t(16),o.ch3_is_local_switch=t(64),o.ch3_is_momentary=t(128),o.auto_brake_lights_forward_enabled=t(256),o.auto_brake_lights_reverse_enabled=t(512),o.ch3_is_two_button=t(1024),o.auto_brake_counter_value_forward_min=B(_,i+8),o.auto_brake_counter_value_forward_max=B(_,i+10),o.auto_brake_counter_value_reverse_min=B(_,i+12),o.auto_brake_counter_value_reverse_max=B(_,i+14),o.auto_reverse_counter_value_min=B(_,i+16),o.auto_reverse_counter_value_max=B(_,i+18),o.brake_disarm_counter_value=B(_,i+20),o.blink_counter_value=B(_,i+22),o.indicator_idle_time_value=B(_,i+24),o.indicator_off_timeout_value=B(_,i+26),o.centre_threshold_low=B(_,i+28),o.centre_threshold_high=B(_,i+30),o.blink_threshold=B(_,i+32),o.light_switch_positions=B(_,i+34),o.initial_light_switch_position=B(_,i+36),o.initial_endpoint_delta=B(_,i+38),o.ch3_multi_click_timeout=B(_,i+40),o.winch_command_repeat_time=B(_,i+42),o.baudrate=I(_,i+44),o.no_signal_timeout=B(_,i+48),o.number_of_gears=B(_,i+50),o.gearbox_servo_active_time=B(_,i+52),o.gearbox_servo_idle_time=B(_,i+54),o.servo_pulse_min=B(_,i+56),o.servo_pulse_max=B(_,i+58),o.startup_time=B(_,i+60),o},M=function(){var t=e.data,_=e.offset[m],i=_+4+4*u,o=T(t.slice(i));return disassembler.disassemble(o)},O=function(e){var t,i,o,a=[76,66,114,99],n=4,s={};for(t=0;t<e.length;t+=1)if(e.slice(t,t+n).join()===a.join())if(i=256*e[t+5]+e[t+4],_=256*e[t+7]+e[t+6],void 0===v[i])console.log("Warning: unknown section "+t);else{if(1!==_)throw new Error("Unknown configuration version "+_);o=v[i],s[o]=t+8}return s},D=function(){function e(e,t,_,i){for(var o=document.getElementById(e+t+"field"+_);o.firstChild;)o.removeChild(o.firstChild);if(i=Math.round(100*i/255),0!==i){var a=document.createTextNode(i);o.appendChild(a)}}function t(e,t,_,i){var o=document.getElementById(e+t+_);"checkbox"===o.type?o.checked=Boolean(i):o.value=i}function _(_,i){var o,a;for(o=0;o<_.led_count;o+=1)a=_[o],e(i,o,0,a.always_on),e(i,o,1,a.light_switch_position0),e(i,o,2,a.light_switch_position1),e(i,o,3,a.light_switch_position2),e(i,o,4,a.light_switch_position3),e(i,o,5,a.light_switch_position4),e(i,o,6,a.light_switch_position5),e(i,o,7,a.light_switch_position6),e(i,o,8,a.light_switch_position7),e(i,o,9,a.light_switch_position8),e(i,o,10,a.tail_light),e(i,o,11,a.brake_light),e(i,o,12,a.reversing_light),e(i,o,13,a.indicator_left),e(i,o,14,a.indicator_right),t(i,o,"incandescent",Math.round(100*a.max_change_per_systick/255)),t(i,o,"weak_ground",a.reduction_percent),t(i,o,"checkbox0",a.weak_light_switch_position0),t(i,o,"checkbox1",a.weak_light_switch_position1),t(i,o,"checkbox2",a.weak_light_switch_position2),t(i,o,"checkbox3",a.weak_light_switch_position3),t(i,o,"checkbox4",a.weak_light_switch_position4),t(i,o,"checkbox5",a.weak_light_switch_position5),t(i,o,"checkbox6",a.weak_light_switch_position6),t(i,o,"checkbox7",a.weak_light_switch_position7),t(i,o,"checkbox8",a.weak_light_switch_position8),t(i,o,"checkbox9",a.weak_tail_light),t(i,o,"checkbox10",a.weak_brake_light),t(i,o,"checkbox11",a.weak_reversing_light),t(i,o,"checkbox12",a.weak_indicator_left),t(i,o,"checkbox13",a.weak_indicator_right)}_(i,"master"),_(o,"slave")},H=function(){function e(e,t){var _;for(_=0;_<e.length;_+=1)e[_].name=t}function _(e,t){var _;for(_=0;_<e.length;_+=1)e[_].style.display=t}function i(e){var t,_=document.getElementsByName(e);for(t=0;t<_.length;t+=1)if(_[t].checked)return;_[0].checked=!0}var o=parseInt(l.mode.options[l.mode.selectedIndex].value,10);switch(o){case E.MASTER_WITH_SERVO_READER:l.mode_master_servo.style.display="",l.mode_master_uart.style.display="none",l.mode_master_cppm.style.display="none",l.mode_slave.style.display="none",l.mode_test.style.display="none",l.config_light_programs.style.display="",l.config_leds.style.display="",l.config_basic.style.display="",l.config_basic_esc_type.style.display="",l.config_basic_ch3.style.display="",l.config_basic_output.style.display="",l.config_advanced.style.display="",_(l.single_output,""),_(l.dual_output,"none"),e(l.dual_output_th,"output_out"),t.mode=o;break;case E.MASTER_WITH_UART_READER:l.mode_master_servo.style.display="none",l.mode_master_uart.style.display="",l.mode_master_cppm.style.display="none",l.mode_slave.style.display="none",l.mode_test.style.display="none",l.config_basic.style.display="",l.config_light_programs.style.display="",l.config_leds.style.display="",l.config_basic.style.display="",l.config_basic_esc_type.style.display="",l.config_basic_ch3.style.display="",l.config_basic_output.style.display="",l.config_advanced.style.display="",_(l.single_output,"none"),_(l.dual_output,""),e(l.dual_output_th,"output_th"),t.mode=o;break;case E.MASTER_WITH_CPPM_READER:l.mode_master_servo.style.display="none",l.mode_master_uart.style.display="none",l.mode_master_cppm.style.display="",l.mode_slave.style.display="none",l.mode_test.style.display="none",l.config_basic.style.display="",l.config_light_programs.style.display="",l.config_leds.style.display="",l.config_basic.style.display="",l.config_basic_esc_type.style.display="",l.config_basic_ch3.style.display="",l.config_basic_output.style.display="",l.config_advanced.style.display="",_(l.single_output,"none"),_(l.dual_output,""),e(l.dual_output_th,"output_th"),t.mode=o;break;case E.SLAVE:l.mode_master_servo.style.display="none",l.mode_master_uart.style.display="none",l.mode_master_cppm.style.display="none",l.mode_slave.style.display="",l.mode_test.style.display="none",l.config_light_programs.style.display="none",l.config_leds.style.display="none",l.config_basic.style.display="",l.config_basic_esc_type.style.display="none",l.config_basic_ch3.style.display="none",l.config_basic_output.style.display="none",l.config_advanced.style.display="none",t.mode=o;break;case E.TEST:l.mode_master_servo.style.display="none",l.mode_master_uart.style.display="none",l.mode_master_cppm.style.display="none",l.mode_slave.style.display="none",l.mode_test.style.display="",l.config_light_programs.style.display="none",l.config_leds.style.display="none",l.config_basic.style.display="none",l.config_advanced.style.display="none",t.mode=o}i("output_out"),i("output_th"),l.preprocessor_output.checked||l.slave_output.checked?(l.winch_output.style.display="none",l.winch_enable.style.display=""):(l.winch_output.style.display="",l.winch_enable.style.display="none"),l.leds_slave.style.display=l.slave_output.checked?"":"none"},F=function(){function e(e,t){var _,i,o,a,n,s,r,l,c=document.getElementById(e),u=c.getElementsByClassName("led_config"),d=c.getElementsByClassName("led_features");for(_=0;_<d.length;_+=1){for(o=!1,a=parseInt(document.getElementById(t+_+"incandescent").value,10),n=parseInt(document.getElementById(t+_+"weak_ground").value,10),s=!1,r=d[_].getElementsByClassName("checkbox"),i=0;i<r.length;i+=1)if(r[i].checked){s=!0;break}a>0&&a<100&&(o=!0),n>0&&s&&(o=!0),l=u[_].getElementsByClassName("spanner")[0],o?addClass(l,"led_feature_active"):removeClass(l,"led_feature_active")}}e("leds_master","master"),e("leds_slave","slave")},P=function(){l.mode.selectedIndex=t.mode,l.firmware_version.innerHTML=_+"."+t.firmware_version,l.esc[t.esc_mode].checked=!0,l.winch_output.checked=Boolean(t.winch_output),l.winch_enable.checked=Boolean(t.winch_output),l.gearbox_servo_output.checked=Boolean(t.gearbox_servo_output),l.steering_wheel_servo_output.checked=Boolean(t.steering_wheel_servo_output),l.preprocessor_output.checked=Boolean(t.preprocessor_output),l.slave_output.checked=Boolean(t.slave_output),l.ch3[0].checked=!0,t.ch3_is_local_switch?l.ch3[3].checked=!0:t.ch3_is_momentary?l.ch3[2].checked=!0:t.ch3_is_two_button&&(l.ch3[1].checked=!0),l.baudrate.selectedIndex=x[t.baudrate],D(),l.auto_brake_lights_forward_enabled.checked=Boolean(t.auto_brake_lights_forward_enabled),l.auto_brake_counter_value_forward_min.value=t.auto_brake_counter_value_forward_min*c,l.auto_brake_counter_value_forward_max.value=t.auto_brake_counter_value_forward_max*c,l.auto_brake_lights_reverse_enabled.checked=Boolean(t.auto_brake_lights_reverse_enabled),l.auto_brake_counter_value_reverse_min.value=t.auto_brake_counter_value_reverse_min*c,l.auto_brake_counter_value_reverse_max.value=t.auto_brake_counter_value_reverse_max*c,l.brake_disarm_counter_value.value=t.brake_disarm_counter_value*c,l.auto_reverse_counter_value_min.value=t.auto_reverse_counter_value_min*c,l.auto_reverse_counter_value_max.value=t.auto_reverse_counter_value_max*c,l.blink_counter_value.value=t.blink_counter_value*c,l.indicator_idle_time_value.value=t.indicator_idle_time_value*c,l.indicator_off_timeout_value.value=t.indicator_off_timeout_value*c,l.blink_threshold.value=t.blink_threshold,l.centre_threshold_low.value=t.centre_threshold_low,l.centre_threshold_high.value=t.centre_threshold_high,l.initial_endpoint_delta.value=t.initial_endpoint_delta,l.ch3_multi_click_timeout.value=t.ch3_multi_click_timeout*c,l.winch_command_repeat_time.value=t.winch_command_repeat_time*c,l.no_signal_timeout.value=t.no_signal_timeout*c,l.number_of_gears.value=t.number_of_gears,l.gearbox_servo_active_time.value=t.gearbox_servo_active_time*c,l.gearbox_servo_idle_time.value=t.gearbox_servo_idle_time*c,l.initial_light_switch_position.value=t.initial_light_switch_position,l.servo_pulse_min.value=t.servo_pulse_min,l.servo_pulse_max.value=t.servo_pulse_max,l.startup_time.value=t.startup_time*c,l.gamma_value.value=a.gamma_value,H(),F()},V=function(e){var t,_;return t=intel_hex.parse(e),_=O(t.data),{data:t.data,offset:_}},W=function(_){e=void 0,t=void 0,i=void 0,o=void 0,a=void 0,n="",l.light_programs.value="",l.light_programs_errors.style.display="none";try{e=V(_),t=L(),i=A(g),o=A(p),n=M(),a=N(),P(),l.light_programs.value=n,ui.update_editor()}catch(e){window.alert("Unable to load Intel-hex formatted firmware image:\n"+e)}},G=function(e){l.light_programs_errors.style.display="none",l.light_programs_ok.style.display="none",symbols.reset(),emitter.reset(),ui.update_errors([]);try{var t=parser.parse(e);return l.light_programs_ok.style.display="",t}catch(e){var _,i,o,a="Errors occured while assembling light programs\n",n=emitter.get_errors(),s=[];if(n.length>0)for(a+="\n",i=0;i<n.length;i+=1)a+=n[i].str+"\n\n",n[i].hash&&n[i].hash.loc&&(o=n[i].hash.loc,_={message:n[i].str,from:CodeMirror.Pos(o.first_line-1,o.first_column),to:CodeMirror.Pos(o.last_line-1,o.last_column)},s.push(_));throw l.light_programs_errors.innerHTML=a,l.light_programs_errors.style.display="",ui.update_errors(s),new Error("Errors occured while assembling light programs")}},U=function(t){var _,i,o=e.data,a=e.offset[h];for(C(o,a,t.gamma_value.charCodeAt(0)),C(o,a+1,t.gamma_value.charCodeAt(1)),C(o,a+2,t.gamma_value.charCodeAt(2)),i=gamma.make_table(t.gamma_value),_=0;_<i.length;_+=1)C(o,a+4+_,i[_])},J=function(t,_){function i(e,t,_){C(e,t,_.max_change_per_systick),C(e,t+1,_.reduction_percent);var i=0,o=0;i|=_.weak_light_switch_position0<<0,i|=_.weak_light_switch_position1<<1,i|=_.weak_light_switch_position2<<2,i|=_.weak_light_switch_position3<<3,i|=_.weak_light_switch_position4<<4,i|=_.weak_light_switch_position5<<5,i|=_.weak_light_switch_position6<<6,i|=_.weak_light_switch_position7<<7,i|=_.weak_light_switch_position8<<8,i|=_.weak_tail_light<<9,i|=_.weak_brake_light<<10,i|=_.weak_reversing_light<<11,i|=_.weak_indicator_left<<12,i|=_.weak_indicator_right<<13,R(e,t+2,i),C(e,t+4,_.always_on),C(e,t+5,_.light_switch_position0),C(e,t+6,_.light_switch_position1),C(e,t+7,_.light_switch_position2),C(e,t+8,_.light_switch_position3),C(e,t+9,_.light_switch_position4),C(e,t+10,_.light_switch_position5),C(e,t+11,_.light_switch_position6),C(e,t+12,_.light_switch_position7),C(e,t+13,_.light_switch_position8),C(e,t+14,_.tail_light),C(e,t+15,_.brake_light),C(e,t+16,_.reversing_light),C(e,t+17,_.indicator_left),C(e,t+18,_.indicator_right),_.light_switch_position0&&(o=1),_.light_switch_position1&&(o=2),_.light_switch_position2&&(o=3),_.light_switch_position3&&(o=4),_.light_switch_position4&&(o=5),_.light_switch_position5&&(o=6),_.light_switch_position6&&(o=7),_.light_switch_position7&&(o=8),_.light_switch_position8&&(o=9),o>r&&(r=o)}var o,a=e.data,n=e.offset[t],s=I(a,n+4);for(C(a,n,_.led_count),o=0;o<_.led_count;o+=1)i(a,s+20*o,_[o])},j=function(t){var _=e.data,i=e.offset[d];t.light_switch_positions=r,C(_,i,t.firmware_version),C(_,i+1,t.mode),C(_,i+2,t.esc_mode);var o=0;o|=t.slave_output<<0,o|=t.preprocessor_output<<1,o|=t.winch_output<<2,o|=t.steering_wheel_servo_output<<3,o|=t.gearbox_servo_output<<4,o|=t.ch3_is_local_switch<<6,o|=t.ch3_is_momentary<<7,o|=t.auto_brake_lights_forward_enabled<<8,o|=t.auto_brake_lights_reverse_enabled<<9,o|=t.ch3_is_two_button<<10,S(_,i+4,o),R(_,i+8,t.auto_brake_counter_value_forward_min),R(_,i+10,t.auto_brake_counter_value_forward_max),R(_,i+12,t.auto_brake_counter_value_reverse_min),R(_,i+14,t.auto_brake_counter_value_reverse_max),R(_,i+16,t.auto_reverse_counter_value_min),R(_,i+18,t.auto_reverse_counter_value_max),R(_,i+20,t.brake_disarm_counter_value),R(_,i+22,t.blink_counter_value),R(_,i+24,t.indicator_idle_time_value),R(_,i+26,t.indicator_off_timeout_value),R(_,i+28,t.centre_threshold_low),R(_,i+30,t.centre_threshold_high),R(_,i+32,t.blink_threshold),R(_,i+34,t.light_switch_positions),R(_,i+36,t.initial_light_switch_position),R(_,i+38,t.initial_endpoint_delta),R(_,i+40,t.ch3_multi_click_timeout),R(_,i+42,t.winch_command_repeat_time),S(_,i+44,t.baudrate),R(_,i+48,t.no_signal_timeout),R(_,i+50,t.number_of_gears),R(_,i+52,t.gearbox_servo_active_time),R(_,i+54,t.gearbox_servo_idle_time),R(_,i+56,t.servo_pulse_min),R(_,i+58,t.servo_pulse_max),R(_,i+60,t.startup_time)},K=function(t){var _,i,o,a=G(t);a.light_switch_positions>r&&(r=a.light_switch_positions);var n=4+4*u,s=4+4*u+4*a.instructions.length,l=[];for(_=0;_<s;_+=1)l.push(0);for(S(l,0,a.number_of_programs),_=0;_<u;_+=1)i=0,_<a.number_of_programs&&(i=n,i+=e.offset[m],i+=4*a.start_offset[_]),S(l,4+4*_,i);for(_=0;_<a.instructions.length;_+=1)S(l,n+4*_,a.instructions[_]);o=e.data,i=e.offset[m],e.data=o.slice(0,i).concat(l)},q=function(e){r=1,J(g,e.local_leds),J(p,e.slave_leds),K(e.light_programs),U(e.gamma),j(e.config)},z=function(){W(default_firmware_image),s=t.firmware_version,n=default_light_program,l.light_programs.value=n,ui.update_editor()},Q=function(){if(!(this.files.length<1)){var _=new FileReader;_.onload=function(_){var i;W(_.target.result),s>t.firmware_version&&(i="A new firmware version is available.\n",i+="Click OK to update the firmware, keeping your settings.\n",i+="Click Cancel to keep the original firmware.\n",window.confirm(i)&&(e=V(default_firmware_image),t.firmware_version=s,P()))},_.readAsText(this.files[0])}},X=function(){function e(e,t,_){var i=document.getElementById(e+t+"field"+_),o=i.textContent;return""===o?0:Math.round(255*parseInt(o,10)/100)}function t(e,t,_){var i=document.getElementById(e+t+_);return"checkbox"===i.type?Boolean(i.checked):parseInt(i.value,10)}function _(_,i){var o,a;for(o=0;o<_.led_count;o+=1)a=_[o],a.always_on=e(i,o,0),a.light_switch_position0=e(i,o,1),a.light_switch_position1=e(i,o,2),a.light_switch_position2=e(i,o,3),a.light_switch_position3=e(i,o,4),a.light_switch_position4=e(i,o,5),a.light_switch_position5=e(i,o,6),a.light_switch_position6=e(i,o,7),a.light_switch_position7=e(i,o,8),a.light_switch_position8=e(i,o,9),a.tail_light=e(i,o,10),a.brake_light=e(i,o,11),a.reversing_light=e(i,o,12),a.indicator_left=e(i,o,13),a.indicator_right=e(i,o,14),a.max_change_per_systick=Math.round(255*t(i,o,"incandescent")/100),a.reduction_percent=t(i,o,"weak_ground"),a.weak_light_switch_position0=t(i,o,"checkbox0"),a.weak_light_switch_position1=t(i,o,"checkbox1"),a.weak_light_switch_position2=t(i,o,"checkbox2"),a.weak_light_switch_position3=t(i,o,"checkbox3"),a.weak_light_switch_position4=t(i,o,"checkbox4"),a.weak_light_switch_position5=t(i,o,"checkbox5"),a.weak_light_switch_position6=t(i,o,"checkbox6"),a.weak_light_switch_position7=t(i,o,"checkbox7"),a.weak_light_switch_position8=t(i,o,"checkbox8"),a.weak_tail_light=t(i,o,"checkbox9"),a.weak_brake_light=t(i,o,"checkbox10"),a.weak_reversing_light=t(i,o,"checkbox11"),a.weak_indicator_left=t(i,o,"checkbox12"),a.weak_indicator_right=t(i,o,"checkbox13")}_(i,"master"),_(o,"slave")},Y=function(){function e(e){t[e]=parseInt(l[e].value,10)}function _(e){t[e]=Boolean(l[e].checked)}function s(e){t[e]=Math.round(l[e].value/c)}function r(e){var t=parseFloat(l[e].value);return isNaN(t)?void(a[e]="2.2"):t<.1?void(a[e]="0.1"):t>9.9?void(a[e]="9.9"):(t=t.toString(),t.length<3&&(t+=".0"),void(a[e]=t))}var u;if(parseInt(l.mode.value,10)===E.TEST)return hardware_test_configuration;for(e("mode"),u=0;u<l.esc.length;u+=1)if(l.esc[u].checked){t.esc_mode=parseInt(l.esc[u].value,10);break}t.mode===E.SLAVE?(t.preprocessor_output=!1,t.slave_output=!1,t.steering_wheel_servo_output=!1,t.gearbox_servo_output=!1,t.winch_output=!1):(_("preprocessor_output"),_("slave_output"),_("steering_wheel_servo_output"),_("gearbox_servo_output"),l.preprocessor_output.checked||l.slave_output.checked?t.winch_output=Boolean(l.winch_enable.checked):_("winch_output")),t.ch3_is_momentary=!1,t.ch3_is_local_switch=!1,t.ch3_is_two_button=!1,l.ch3[2].checked?t.ch3_is_momentary=!0:l.ch3[3].checked?t.ch3_is_local_switch=!0:l.ch3[1].checked&&(t.ch3_is_two_button=!0),e("baudrate"),X(),_("auto_brake_lights_forward_enabled"),s("auto_brake_counter_value_forward_min"),s("auto_brake_counter_value_forward_max"),_("auto_brake_lights_reverse_enabled"),s("auto_brake_counter_value_reverse_min"),s("auto_brake_counter_value_reverse_max"),s("brake_disarm_counter_value"),s("auto_reverse_counter_value_min"),s("auto_reverse_counter_value_max"),s("blink_counter_value"),s("indicator_idle_time_value"),s("indicator_off_timeout_value"),e("blink_threshold"),e("centre_threshold_low"),e("centre_threshold_high"),e("initial_endpoint_delta"),s("ch3_multi_click_timeout"),s("winch_command_repeat_time"),s("no_signal_timeout"),e("number_of_gears"),s("gearbox_servo_active_time"),s("gearbox_servo_idle_time"),e("initial_light_switch_position"),e("servo_pulse_min"),e("servo_pulse_max"),s("startup_time"),t.mode===E.SLAVE?a.gamma_value="1.0":r("gamma_value"),n=ui.get_editor_content();var d={};return d.config=t,d.local_leds=i,d.slave_leds=o,d.gamma=a,d.light_programs=n,d},Z=function(){var t=Y();try{q(t)}catch(e){return void window.alert("Failed to assemble the firmware. Reason:\n\n"+e.message)}var _=intel_hex.fromArray(e.data),i=new Blob([_],{type:"text/plain;charset=utf-8"}),o=window.prompt("Filename for the firmware image:","light_controller.hex");null!==o&&""!==o&&saveAs(i,o)},$=function(){if(!(this.files.length<1)){var _=new FileReader;_.onload=function(_){var r;try{r=JSON.parse(_.target.result),t=r.config,i=r.local_leds,o=r.slave_leds,n=r.light_programs,a=r.gamma,e=V(default_firmware_image),t.firmware_version=s}catch(e){window.alert("Failed to load configuration.\nFile may not be a light controller configuration file (JSON format)")}P(),l.light_programs.value=n,ui.update_editor()},_.readAsText(this.files[0])}},ee=function(){var e=Y(),t=JSON.stringify(e,null,2),_=new Blob([t],{type:"text/plain;charset=utf-8"}),i=window.prompt("Filename for the configuration file:","light_controller.config.txt");null!==i&&""!==i&&saveAs(_,i)},te=function(){function e(){function e(e,t){var _={};return _.max_change_per_systick=0,_.reduction_percent=0,_.weak_light_switch_position0=!1,_.weak_light_switch_position1=!1,_.weak_light_switch_position2=!1,_.weak_light_switch_position3=!1,_.weak_light_switch_position4=!1,_.weak_light_switch_position5=!1,_.weak_light_switch_position6=!1,_.weak_light_switch_position7=!1,_.weak_light_switch_position8=!1,_.weak_tail_light=!1,_.weak_brake_light=!1,_.weak_reversing_light=!1,_.weak_indicator_left=!1,_.weak_indicator_right=!1,_.always_on=0,_.light_switch_position0=0,_.light_switch_position1=0,_.light_switch_position2=0,_.light_switch_position3=0,_.light_switch_position4=0,_.light_switch_position5=0,_.light_switch_position6=0,_.light_switch_position7=0,_.light_switch_position8=0,_.tail_light=0,_.brake_light=0,_.reversing_light=0,_.indicator_left=0,_.indicator_right=0,_}var t,_={},i=16;for(_.led_count=i,t=0;t<i;t+=1)_[t]=e();return _}i=e(),o=e(),P()},_e=function(){parser.yy={symbols:symbols,emitter:emitter,logger:logger},logger.set_log_level("ERROR"),emitter.set_parser(parser),symbols.set_parser(parser),l.light_programs_ok.style.display="none"},ie=function(){function e(e){var t,_,i,o=document.getElementById(e),a=o.getElementsByClassName("led_features");for(_=0;_<a.length;_+=1)for(i=a[_].getElementsByTagName("input"),t=0;t<i.length;t+=1)i[t].addEventListener("change",F,!0)}l.firmware_version=document.getElementById("firmware_version"),l.save_config=document.getElementById("save_config"),l.load_config=document.getElementById("load_config"),l.save_firmware=document.getElementById("save_firmware"),l.load_firmware=document.getElementById("load_firmware"),l.mode=document.getElementById("mode"),l.mode_master_servo=document.getElementById("mode_master_servo"),l.mode_master_uart=document.getElementById("mode_master_uart"),l.mode_master_cppm=document.getElementById("mode_master_cppm"),l.mode_slave=document.getElementById("mode_slave"),l.mode_test=document.getElementById("mode_test"),l.config_leds=document.getElementById("config_leds"),l.leds_master=document.getElementById("leds_master"),l.leds_slave=document.getElementById("leds_slave"),l.config_basic=document.getElementById("config_basic"),l.config_basic_esc_type=document.getElementById("config_basic_esc_type"),l.config_basic_ch3=document.getElementById("config_basic_ch3"),l.config_basic_output=document.getElementById("config_basic_output"),l.config_basic_baudrate=document.getElementById("config_basic_baudrate"),l.baudrate=document.getElementById("baudrate"),l.esc=document.getElementsByName("esc"),l.ch3=document.getElementsByName("ch3"),l.output_out=document.getElementsByName("output_out"),l.single_output=document.getElementsByClassName("single_output"),l.dual_output=document.getElementsByClassName("dual_output"),l.dual_output_th=document.getElementsByClassName("dual_output_th"),l.winch_enable=document.getElementById("winch_output_checkbox"),l.slave_output=document.getElementById("slave_output"),l.preprocessor_output=document.getElementById("preprocessor_output"),l.steering_wheel_servo_output=document.getElementById("steering_wheel_servo_output"),l.gearbox_servo_output=document.getElementById("gearbox_servo_output"),l.winch_output=document.getElementById("winch_output"),l.leds_clear=document.getElementById("leds_clear"),l.config_light_programs=document.getElementById("config_light_programs"),l.light_programs=document.getElementById("light_programs"),l.light_programs_errors=document.getElementById("light_programs_errors"),l.light_programs_assembler=document.getElementById("light_programs_assembler"),l.light_programs_ok=document.getElementById("light_programs_ok"),l.config_advanced=document.getElementById("config_advanced"),l.auto_brake_lights_forward_enabled=document.getElementById("auto_brake_lights_forward_enabled"),l.auto_brake_counter_value_forward_min=document.getElementById("auto_brake_counter_value_forward_min"),l.auto_brake_counter_value_forward_max=document.getElementById("auto_brake_counter_value_forward_max"),l.auto_brake_lights_reverse_enabled=document.getElementById("auto_brake_lights_reverse_enabled"),l.auto_brake_counter_value_reverse_min=document.getElementById("auto_brake_counter_value_reverse_min"),l.auto_brake_counter_value_reverse_max=document.getElementById("auto_brake_counter_value_reverse_max"),l.brake_disarm_timeout_enabled=document.getElementById("brake_disarm_timeout_enabled"),l.brake_disarm_counter_value=document.getElementById("brake_disarm_counter_value"),l.auto_reverse_counter_value_min=document.getElementById("auto_reverse_counter_value_min"),l.auto_reverse_counter_value_max=document.getElementById("auto_reverse_counter_value_max"),l.blink_counter_value=document.getElementById("blink_counter_value"),l.indicator_idle_time_value=document.getElementById("indicator_idle_time_value"),l.indicator_off_timeout_value=document.getElementById("indicator_off_timeout_value"),l.blink_threshold=document.getElementById("blink_threshold"),l.centre_threshold_low=document.getElementById("centre_threshold_low"),l.centre_threshold_high=document.getElementById("centre_threshold_high"),l.initial_endpoint_delta=document.getElementById("initial_endpoint_delta"),l.ch3_multi_click_timeout=document.getElementById("ch3_multi_click_timeout"),l.winch_command_repeat_time=document.getElementById("winch_command_repeat_time"),l.no_signal_timeout=document.getElementById("no_signal_timeout"),l.number_of_gears=document.getElementById("number_of_gears"),l.gearbox_servo_active_time=document.getElementById("gearbox_servo_active_time"),l.gearbox_servo_idle_time=document.getElementById("gearbox_servo_idle_time"),l.initial_light_switch_position=document.getElementById("initial_light_switch_position"),l.servo_pulse_min=document.getElementById("servo_pulse_min"),l.servo_pulse_max=document.getElementById("servo_pulse_max"),l.startup_time=document.getElementById("startup_time"),l.gamma_value=document.getElementById("gamma_value"),l.mode.addEventListener("change",H,!1),l.config_basic_output.addEventListener("change",H,!1),e("leds_master","master"),e("leds_slave","slave"),l.load_firmware.addEventListener("change",Q,!1),l.save_firmware.addEventListener("click",Z,!1),l.load_config.addEventListener("change",$,!1),l.save_config.addEventListener("click",ee,!1),l.leds_clear.addEventListener("click",function(){window.confirm("Clear all LED configurations? This can not be undone.")&&te()},!1),l.light_programs_assembler.addEventListener("click",function(){G(ui.get_editor_content())},!1),l.light_programs_errors.style.display="none",_e(),z()};return{load:Q,init:ie}}();document.addEventListener("DOMContentLoaded",function(){ui.init(),app.init()},!1);</script>

</head>
<body>
  <div id="heading" class="widebox heading">
    <h1><span id="logo"></span> RC Light Controller configuration tool</h1>
    <span id="version">Version: 2017-08-13</span>
    <br>Please check out <a href="https://github.com/laneboysrc/rc-light-controller">https://github.com/laneboysrc/rc-light-controller</a> for a description of the RC Light Controller this tool belongs to.
  </div>

  <div id="runtime-error" style="display: none; margin: 10px; padding: 10px; background: red; color: white">
    <h1 style="color: white">ATTENTION</h1>
    <strong>
      The Light Program parser is not present.<br>
      This means that you are most likely trying to run a source file meant for development
      rather than the actual &quot;configurator.html&quot; program.
      <br>&nbsp;<br>
      You can obtain the correct &quot;configurator.html&quot; at <a href="https://github.com/laneboysrc/rc-light-controller/blob/master/mk4-tlc5940-lpc812/mk4-download-me.zip?raw=true">https://github.com/laneboysrc/rc-light-controller/blob/master/mk4-tlc5940-lpc812/mk4-download-me.zip</a>
      <br>&nbsp;<br>
    </strong>
      To fix this error during development, change to the &quot;assembler/&quot; directory and run &quot;make&quot;.
  </div>

  <div class="page" id="main">
    <div id="load_and_save" class="box configuration">
      <h2>Load and Save</h2>
      <div>
        Firmware version: <span id="firmware_version"></span>
      </div>
      <table class="load_save_table">
        <tr>
          <td><button id="save_firmware">Save firmware image...</button></td>
          <td>Load firmware image: <input type="file" id="load_firmware"></td>
        </tr>
        <tr>
          <td><button id="save_config">Save configuration...</button></td>
          <td>Load configuration file: <input type="file" id="load_config"></td>
        </tr>
      </table>
      <div class="info">
        <div>
          This tool has the light controller firmware already embedded. Below
          you can adjust the configuration according to your needs.
        </div>
        <div>
          After you are done, you can save the firmware image. It will appear
          in the download folder of your web browser.
        </div>
        <div>
          You can also save the configuration into a text file, which
          can be loaded at a later point in time, e.g. to make further tweaks.
        </div>
        <div>
          It is advisable that you always keep a copy of the saved
          configuration. While it is possible to retrieve all settings from
          a firmware image, some data especially in the light programs, like
          variable names and comments, are lost as they are not placed into
          the firmware image.
        </div>
      </div>
    </div>


    <div id="config_mode" class="box configuration">
      <h2>Operating mode</h2>
      <div>
        <select id="mode">
          <option value="0">Master, servo inputs</option>
          <option value="1">Master, pre-processor input</option>
          <option value="2">Master, CPPM input</option>
          <option value="3">Slave</option>
          <option value="99">Hardware test</option>
        </select>
      </div>
      <div id="mode_master_servo" class="info">
        <div>
          The light controller reads servo signals from the receiver. The
          steering signal must be connected to input <strong>ST/Rx</strong> on
          the light controller, the throttle signal to <strong>TH/Tx</strong>
          and the Channel 3 (AUX) signal to the <strong>CH3</strong> input.
        </div>
      </div>
      <div id="mode_master_uart" class="info">
        <div>
          The light controller does not read servo signals directly, but from a
          <em>pre-processor</em>. The <em>pre-processor</em> is a
          microcontroller directly built into the receiver. It reads the servo
          signals and converts them into a serial data stream so that the light
          controller can be connected with a single servo extension cable. This
          simplifies wiring of a RC car, especially when the light controller
          resides on the body while the receiver is mounted on the chassis.
        </div>
        <div>
          For more information on the preprocessor please read our blog articles:
          <ul>
            <li><a href="http://laneboysrc.blogspot.com/2012/12/pre-processor-for-diy-rc-light.html" target="_blank">Pre-processor for the DIY RC Light controller</a></li>
            <li><a href="http://laneboysrc.blogspot.com/2013/01/pre-processor-miniaturization.html">pre-processor miniaturization</a></li>
          </ul>
        </div>
        <div>
          The output from the <em>pre-processor</em> must be connected to the
          <strong>ST/Rx</strong> input of the light controller.
        </div>
      </div>
      <div id="mode_master_cppm" class="info">
        <div>
          Some receiver have a CPPM output, which encodes information of all
          servos in a single electrical signal. The light controller can read
          this signal, so only a single cable needs to be connected from the
          receiver to the light controller.
        </div>
        <div>
          Please consult your the instructions of your RC system to check
          whether your receiver has a CPPM output.
        </div>
      </div>
      <div id="mode_slave" class="info">
        <div>
          In case more than 16 LEDs are required, it is possible to daisy-chain
          two light controllers. One needs to be configured as <em>master</em>
          and have the <em>slave output</em> activated, the other one
          must be configured as <em>slave</em>, for a total of 32 LEDs.
        </div>
        <div>
          The output from the <em>master</em> must be fed into the
          <strong>ST/Rx</strong> input on the <em>slave</em>.
        </div>
        <div>
          The <em>master</em> controls the light functions of both light
          controllers. Ensure that the baudrate of both <em>master</em> and
          <em>slave</em> match.
        </div>
      </div>
      <div id="mode_test" class="info">
        <div>
          Generates a firmware image suitable for hardware test. As soon as
          power is applied the LEDs flash in certain patterns.
        </div>
      </div>
    </div>


    <div id="config_basic" class="box configuration">
      <h2>Basic configuration</h2>
      <div id="config_basic_esc_type">
        <h3>ESC type</h2>
        <div>
          <div class="radio_item">
            <input type="radio" name="esc" value="0" id="esc_fbr_with_timeout">
            <label for="esc_fbr_with_timeout">Forward/Brake/Reverse (with timeout)</label>
            <br>
            After going forward, the ESC allows going in reverse when the throttle
            has been in neutral for a certain amount of time.
            <br>
            Examples: HPI SC-15WP, HobbyKing HK-SENS-60A
          </div>
          <div class="radio_item">
            <input type="radio" name="esc" value="1" id="esc_fbr_no_timeout">
            <label for="esc_fbr_no_timeout">Forward/Brake/Reverse (no timeout)</label>
            <br>
            After going forward, the first push backwards on the throttle is
            always engagin the brake function, regardless whether the throttle
            has been in neutral for a long time. The second push on the throttle
            engages reverse function. Note: the timeout can be adjusted in the
            advanced configuration section below.
            <br>
            Examples: Tamiya TEU-104BK, TEU-105BK.
          </div>
          <div class="radio_item">
            <input type="radio" name="esc" value="2" id="esc_fr">
            <label for="esc_fr">Forward/Reverse (crawler mode)</label>
            <br>
            Forward and reverse engage immediately when the throttle is moved
            to the corresponding position. Many ESC call this behaviour a &quot;crawler mode&quot;
          </div>
          <div class="radio_item">
            <input type="radio" name="esc" value="3"id="esc_fb">
            <label for="esc_fb">Forward/Brake (racing mode)</label>
            <br>
            For racing purpose some ESC can be configured to disable reverse.
          </div>
        </div>
      </div>

      <div id="config_basic_ch3">
        <h3>CH3/AUX function</h2>
        <div>
          <div class="radio_item">
            <input type="radio" name="ch3" value="0" id="ch3_two_position">
            <label for="ch3_two_position">Two-position switch</label>
            <br>
            The CH3/AUX function on the transmitter is either a two-position
            switch, or a toggle button that moves the servo between two endpoints.
            <br>
            Examples: FlySky GT3 series, HobbyKing HK310
          </div>
          <div class="radio_item">
            <input type="radio" name="ch3" value="1" id="ch3_two_position_up_down">
            <label for="ch3_two_position">Two-position switch with up/down buttons</label>
            <br>
            The CH3/AUX function on the transmitter has two positions that are selected
            with two buttons on the transmitter. Pressing the down button moves
            to position 1, pressing the up button moves to position 2.
            <br>
            Selecting this option requires to always press the down button first before
            entering the desired number of clicks
            <br>
            Examples: HobbyKing X3S, Tactic TTX300
          </div>
          <div class="radio_item">
            <input type="radio" name="ch3" value="2" id="ch3_momentary">
            <label for="ch3_momentary">Momentary push button</label>
            <br>
            The CH3/AUX function on the transmitter is a push button that moves
            the servo to the opposite endpoint while the button is pushed, but
            moves the servo back to the original position once the button is
            released.
            <br>
            Examples: Futaba 4PL
          </div>
          <div class="radio_item">
            <input type="radio" name="ch3" value="3" id="ch3_local">
            <label for="ch3_local">Push button on the light controller</label>
            <br>
            A push button directly connected to the light controller's CH3 input
            (i.e. a physical button, not a servo signal from the receiver).
            Useful for 2-channel radios.
          </div>
        </div>
      </div>

      <div id="config_basic_output">
        <h3 class="single_output">Output function on pin OUT/ISP</h2>
        <h3 class="dual_output">Servo output function on pin OUT/ISP</h2>
        <div>
          <div class="radio_item">
            <input type="radio" name="output_out" value="0" id="single_off">
            <label for="single_off">(no output function)</label>
            <br>
            No signal on the OUT/ISP pin of the light controller.
          </div>
          <div class="radio_item">
            <input type="radio" name="output_out" value="3" id="steering_wheel_servo_output">
            <label for="steering_wheel_servo_output">Steering wheel servo output</label>
            <br>
            The light controller can be connected to a servo, that moves the
            steering wheel in the cabin of the car. The output follows the
            steering input, but the endpoints and direction can be configured
            independently of the steering function of the car.
          </div>
          <div class="radio_item">
            <input type="radio" name="output_out" value="4" id="gearbox_servo_output">
            <label for="gearbox_servo_output">Gearbox servo output</label>
            <br>
            When enabled, a servo signal is generated that allows control of a
            two-speed gearbox.
            <br>
            <label for="number_of_gears">Number of gears:</label> <select id="number_of_gears">
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          </div>
        </div>
        <h3 class="dual_output">Output function on pin TH/Tx</h2>
        <div class="radio_item dual_output">
          <input type="radio" name="output_th" value="0" id="dual_off">
          <label for="single_off">(no output function)</label>
          <br>
          No signal on the TH/Tx pin of the light controller.
        </div>
        <div class="radio_item">
          <input class="dual_output_th" type="radio" name="output_out" value="1" id="slave_output">
          <label for="slave_ouput">Slave output</label>
          <br>
          By using a second light controller configured as <em>slave</em>
          a total of 32 LEDs can be controlled. A single cable must be run
          between the <em>master</em>
          <span class="single_output">OUT/ISP</span><span class="dual_output">TH/Tx</span>
          pin and the <em>slave</em> ST/Rx pin.
          <br>
          When this option is selected, a second set of LED configuration
          becomes visible below.
        </div>
        <div class="radio_item">
          <input class="dual_output_th" type="radio" name="output_out" value="2" id="preprocessor_output">
          <label for="preprocessor_output">Pre-processour output</label>
          <br>
          When enabled, the light controller outputs the steering, throttle
          and CH3/AUX signals as serial data stream. This function can be
          useful for connecting custom hardware to the light controller.
        </div>
        <div class="radio_item">
          <input class="dual_output_th" type="radio" name="output_out" value="5" id="winch_output">
          <input class="dual_output_th" type="checkbox" name="winch_enable" value="5" id="winch_output_checkbox">
          <label for="winch_output">Winch output</label>
          <br>
          Enables control of the
          <a href="https://github.com/laneboysrc/rc-winch-controller" target="_blank">LANE Boys RC winch controller</a><br>
        </div>
      </div>

      <div id="config_basic_baudrate">
        <h3>Baudrate</h3>
        <select id="baudrate">
          <option value="38400">38400</option>
          <option value="115200">115200</option>
        </select>
        <br>
        The baudrate for serial input/output functions. This applies to the
        pre-processor input and output, the slave input and output, and the winch controller.
        <br>
        Ensure that master and slave are using the same baudrate. Note that the
        winch controller and the pre-processor that is based on the Microchip
        PIC operate only at 34800 baud.
      </div>
    </div>


    <div id="config_leds" class="box configuration">
      <h2>LED configuration</h2>
      <div>
        Click on a field in the table to set the LED brighness value in percent for a particular function.
      </div>
      <div>
        Click on the <span class="spanner"></span> icon to configure advanced parameters for simulating incandescent bulbs and weak ground connections.
        The background of the icon turns orange when advanced features are in use.
      </div>
      <div>
        <strong>Hover the mouse over individual items</strong> to see an explaination about their function.
      </div>
      <div>
        <button id="leds_clear">Clear...</button> Use the clear button to reset all LED configurations to off. <strong>Warning:</strong> this can not be undone; save your configuration before clearing!
      </div>
      <div id="leds_master">
        <h3>Master</h2>
        <div>
          <table class="led_table">
            <tbody>
              <tr class="odd">
                <th></th>
                <th name="help_led_always_on" rowspan="2">Always on</th>
                <th name="help_led_light_switch" colspan="9">Light switch position</th>
                <th name="help_led_tail"></th>
                <th name="help_led_brake"></th>
                <th name="help_led_reverse"></th>
                <th name="help_led_indicator" colspan="2">Indicator</th>
              </tr>
              <tr class="odd">
                <th>LED</th>
                <th name="help_led_light_switch">0</th>
                <th name="help_led_light_switch">1</th>
                <th name="help_led_light_switch">2</th>
                <th name="help_led_light_switch">3</th>
                <th name="help_led_light_switch">4</th>
                <th name="help_led_light_switch">5</th>
                <th name="help_led_light_switch">6</th>
                <th name="help_led_light_switch">7</th>
                <th name="help_led_light_switch">8</th>
                <th name="help_led_tail">Tail</th>
                <th name="help_led_brake">Brake</th>
                <th name="help_led_reverse">Reverse</th>
                <th name="help_led_indicator">left</th>
                <th name="help_led_indicator">right</th>
              </tr>

              <!-- LED rows will be inserted here -->

            </table>
          </div>
        </div>

        <div id="leds_slave">
          <h3>Slave</h2>
          <div>
            <table class="led_table">
              <tr class="odd">
                <th></th>
                <th name="help_led_always_on" rowspan="2">Always on</th>
                <th name="help_led_light_switch" colspan="9">Light switch position</th>
                <th name="help_led_tail"></th>
                <th name="help_led_brake"></th>
                <th name="help_led_reverse"></th>
                <th name="help_led_indicator" colspan="2">Indicator</th>
              </tr>
              <tr class="odd">
                <th>LED</th>
                <th name="help_led_light_switch">0</th>
                <th name="help_led_light_switch">1</th>
                <th name="help_led_light_switch">2</th>
                <th name="help_led_light_switch">3</th>
                <th name="help_led_light_switch">4</th>
                <th name="help_led_light_switch">5</th>
                <th name="help_led_light_switch">6</th>
                <th name="help_led_light_switch">7</th>
                <th name="help_led_light_switch">8</th>
                <th name="help_led_tail">Tail</th>
                <th name="help_led_brake">Brake</th>
                <th name="help_led_reverse">Reverse</th>
                <th name="help_led_indicator">left</th>
                <th name="help_led_indicator">right</th>
              </tr>

              <!-- LED rows will be inserted here -->

            </tbody>
          </table>
        </div>
      </div>
    </div>


    <div id="config_light_programs" class="box configuration">
      <h2>Light programs:</h2>
      <div>
        Light programs are small scripts that can perform custom light
        sequences. See <a href="https://github.com/laneboysrc/rc-light-controller/blob/master/mk4-tlc5940-lpc812/doc/light-programs.md">light-programs.md</a> for an details on the
        programming language.
      </div>
      <div>
        Press <strong>F11</strong> to toggle fullscreen mode within your browser
        window. The <a href="http://codemirror.net/demo/sublime.html">keybindings</a>
        are similar to the Sublime Text editor.
      </div>
      <div>
        Use the <em>Check...</em> button below the editor to perform a syntax
        check on the light programs.
      </div>
      <div class="editor">
        <textarea id="light_programs" placeholder="Enter light programs here..."></textarea>
      </div>
      <div>
        <button id="light_programs_assembler">Check...</button>
        <span id="light_programs_ok">Light programs correct!</span>
      </div>
      <pre class="box error" id="light_programs_errors">
      </pre>
    </div>


    <div id="config_advanced" class="box configuration">
      <h2>Advanced configuration</h2>
        Note: all timing values have a resolution of 20 ms.

        <h3>Initial light switch position</h3>
        <div class="advanced_feature">
          <div>
            <input type=number id="initial_light_switch_position" min="0" max="8">
            <label for="initial_light_switch_position"></label>
          </div>
          <div>
            When the car is turned on, the virtual light switch is set to the
            given position. This allows to turn the car lights on by default,
            but still be able to turn them off on demand using CH3.
          </div>
        </div>

        <h3>Automatic brake lights</h3>
        <div class="advanced_feature">
          <div>
            <input type="checkbox" id="auto_brake_lights_forward_enabled">
            <label for="auto_brake_lights_forward_enabled">Enable automatic brake lights after driving forward</label>
          </div>
          <div>
            <input type=number id="auto_brake_counter_value_forward_min">
            <label for="auto_brake_counter_value_forward_min"> .. </label>
            <input type=number id="auto_brake_counter_value_forward_max">
            <label for="auto_brake_counter_value_forward_max">min/max time in ms the brake lights should light up</label>
          </div>

          <div>
            If enabled, the light controller turns on the brake lights for a
            random amount of time every time the throttle input goes from
            forward driving to neutral.<br>
            This provides a realistic brake light effect since often the brake
            function is not engaged in scale driving, but rather we return
            the throttle to neutral and let the car coast to a stop.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type="checkbox" id="auto_brake_lights_reverse_enabled">
            <label for="auto_brake_lights_reverse_enabled">Enable automatic brake   lights after reversing</label>
          </div>
          <div>
            <input type=number id="auto_brake_counter_value_reverse_min">
            <label for="auto_brake_counter_value_reverse_min"> .. </label>
            <input type=number id="auto_brake_counter_value_reverse_max">
            <label for="auto_brake_counter_value_reverse_max">min/max time in ms the brake lights should light up</label>
          </div>

          <div>
            If enabled, the light controller turns on the brake lights for a
            random amount of time every time the throttle goes to neutral
            after reversing. This setting only takes effect when the ESC mode
            is set to Forward/Brake/Reverse or Forward/Reverse.
          </div>
        </div>


        <h3>ESC brake function</h3>
        <div class="advanced_feature">
          <div>
            <input type=number id="brake_disarm_counter_value">
            <label for="brake_disarm_counter_value">Timeout in milliseconds</label>
          </div>
          <div>
            This setting deterimes the time how long the throttle has to be
            in neutral before the ESC allows going into reverse. It only applies
            if the ESC type is <em>Forward/Brake/Reverse (with timeout)</em>.
          </div>
        </div>


        <h3>Reversing light extension</h3>
        <div class="advanced_feature">
          <div>
            <input type=number id="auto_reverse_counter_value_min">
            <label for="auto_reverse_counter_value_min"> .. </label>
            <input type=number id="auto_reverse_counter_value_max">
            <label for="auto_reverse_counter_value_max">min/max time in ms the reversing lights should be kept on</label>
          </div>
          <div>
            After driving the car in reverse, the light controller keeps the reversing lights on for a random time between the specified min/max
            after the throttle has returned to neutral. This adds realism
            as drivers usually take a short time until they disengage reverse
            gear.<br>
            The reversing lights are immediately turned off when the car
            drives forward.<br>
            This function applies only to ESC with a forward/reverse/brake or
            forward/reverse function.
          </div>
        </div>


        <h3>Indicators</h3>
        <div class="advanced_feature">
          <div>
            <input type=number id="blink_counter_value">
            <label for="blink_counter_value">Indicator on/off time in ms</label>
          </div>
          <div>
            This value sets the frequency of the indicators and hazard lights.
            For most countries the indicator blink frequency is 1.5 Hz,
            which means the half-period time should be 333 ms.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type=number id="indicator_idle_time_value">
            <label for="indicator_idle_time_value">Idle time in ms before indicators engage</label>
          </div>
          <div>
            In order to prevent the indicators coming on unintentionally during
            driving, the throttle and steering must be in center for a
            specified time before the indicators can be engaged by turning
            the steering.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type=number id="indicator_off_timeout_value">
            <label for="indicator_off_timeout_value">Timeout in ms before the indicators turn off</label>
          </div>
          <div>
            When the indicators are engaged and steering is returned to neutral,
            the indicators continue to blink for the specified amount of time.<br>
            The indicators can be turned off immediately by turning the
            steering in the opposite direction.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type=number id="blink_threshold">
            <label for="blink_threshold">% steering input required to turn on the indicators</label>
          </div>
          <div>
            The steering wheel must be turned for at least the specified
            percentage of steering lock before the indicators turn on.
          </div>
        </div>


        <h3>Servo input</h3>
        <div class="advanced_feature">
          <div>
            <input type=number id="initial_endpoint_delta">
            <label for="initial_endpoint_delta">Initial endpoint delta in ms</label>
          </div>

          <div>
            The light controller features automatic detection of center and
            endpoint for both steering and throttle.<br>
            This value determines how much the initial endpoint left and right
            is set from the center value after power up.<br>
            A servo pulse is usually between 1000 and 2000 ms, with 1500 ms
            being the centre. Dual-rate and end-point adjustments in the
            transmitter change the minimum and maximum received pulse duration.<br>
            A good value for the initial endpoint is 250 ms, which corresponds
            to 50% of nominal servo travel. If the light controller sees
            a signal larger than that, it automatically adjusts its
            endpoint.<br>
            If you set this value too small the lights may flicker after power
            on until you perform steering and throttle inputs, which adjust
            the endpoints to your transmitter.<br>
            If you set this value too large steering and brake signals may
            not engage properly.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type=number id="centre_threshold_low">
            <label for="centre_threshold_low"> .. </label>
            <input type=number id="centre_threshold_high">
            <label for="centre_threshold_high">% centre threshold low/high</label>
          </div>

          <div>
            In order to prevent flickering due to mis-detection of steering
            and throttle inputs, a threshold is applied before steering and
            throttle are detected as being engaged.<br>
            When the steering/throttle is in the center, it first has to be
            engaged past the high percent mark before the light controller
            accepts the input.<br>
            When returning to center, the steering/throttle value has to go
            below the low threshold before it is recognized as being in center.<br>
            Good values depend mostly on the throttle and ESC of your car. If
            the values are set to high the car may be driving already long
            before the light controller recognizes the car as being moving.
            If the values are set too low then brake and reverse lights may
            flicker when driving at very slow speeds.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type=number id="ch3_multi_click_timeout">
            <label for="ch3_multi_click_timeout">timeout in ms before a &quot;click&quot; is accepted on CH3/AUX</label>
          </div>

          <div>
            In order to be able to perform multiple functions on a single
            CH3/AUX input, a method of multiple clicks -- similar to the
            concept used on computers -- is employed.<br>
            The timeout value determines how quickly the light controller reacts
            to CH3/AUX. A low value means you must switch CH3/AUX quickly, but
            also that the reaction of the function engages quickly. a high
            value means you must wait longer until the light controller accepts
            the input. 300 ms works well for the LANE Boys.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type=number id="servo_pulse_min">
            <label for="servo_pulse_min"> .. </label>
            <input type=number id="servo_pulse_max">
            <label for="servo_pulse_max">min/max pulse duration in ms that are valid servo pulses</label>
          </div>

          <div>
            Servo signals have a nominal pulse width of 1.5 ms when in center,
            and 1.0 / 2.0 ms when at the end points. In reality servo pulses
            can go below 0.9 ms and above 2.3 ms when features like end-point
            adjustment and sub-trim are applied.
          </div>
          <div>
            The values above define what minimum and maxium pulse width a servo
            signal is allowed to have in order to consider it valid. This
            setting only applies to servo inputs and CPPM input configurations.
          </div>
          <div>
            For the CPPM input the max pulse duration is the minimum idle
            idle time to identify a start of a CPPM frame.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type=number id="startup_time">
            <label for="startup_time">time in ms to delay operation</label>
          </div>

          <div>
            This value applies to servo inputs and CPPM input configurations.
            After power on, the light controller waits for the first servo
            pulse to arrive. The time given in this field determines how
            long the light controller waits after the first servo pulse until
            it in itializes neutral points of steering and throtte, and starts
            its normal operation.
          </div>
        </div>

        <div class="advanced_feature">
          <div>
            <input type=number id="no_signal_timeout">
            <label for="no_signal_timeout">no signal timeout in ms</label>
          </div>

          <div>
           If no servo signal is received within the given time, for example
           because the transmitter is out of range, then the light controller
           sets the no-signal flag internally, which can be used in light
           programs to perform a certain function.<br>
           Note that most likely this will not work well on modern digital
           transmitters, because the failsafe function will output valid servo
           signals even if the transmitter is out of range.
          </div>
        </div>


        <h3>Winch output</h3>
        <div class="advanced_feature">
          <div>
            <input type=number id="winch_command_repeat_time">
            <label for="winch_command_repeat_time">winch command repeat time in ms</label>
          </div>

          <div>
           This setting only applies to the
           <a href="https://github.com/laneboysrc/rc-winch-controller" target="_blank">LANE Boys RC winch controller</a><br>
           The value determines how often the winch commands are sent to the
           winch controller.
          </div>
        </div>


        <h3>Gearbox servo output</h3>
        <div class="advanced_feature">
          <div>
            <input type=number id="gearbox_servo_active_time">
            <label for="gearbox_servo_active_time">servo activation time in ms</label>
          </div>

          <div>
           The value determines how long the gearbox servo is activated
           (= receives servo pulses) after a gear has changed or the idle
           time (see below) expires.
          </div>
        </div>
        <div class="advanced_feature">
          <div>
            <input type=number id="gearbox_servo_idle_time">
            <label for="gearbox_servo_idle_time">servo idle time in ms</label>
          </div>

          <div>
           The value determines for how long the gearbox servo stays idle
           (= servo pulses are turned off) when there is no gear change.
           This prevents the servo from being damaged due to the servo constantly
           pushing against mechanical stops of the gearbox.<br>
           Setting the value to 0 keeps the gearbox servo active at all times.<br>
          </div>
        </div>


        <h3>Gamma correction</h3>
        <div class="advanced_feature">
          <div>
            <input type=number id="gamma_value" min="0.0" max="9.9" step="0.1">
            <label for="gamma_value">gamma value</label>
          </div>

          <div>
            The current flowing through an LED determines its light output.
            However, the human perception is not linear to the amount of light.
            The light controller therefore offers a gamma correction so that
            if you set a light value of 50%, it should be roughly perceived
            has half as bright as the same LED set to 100%.<br>
            Useful values are between 1.8 and 2.2.
          </div>
        </div>

    </div>

    <div class="widebox footer">
      <div>
        This tool would not have been possible without these awesome software components:
      </div>
      <div>
        <strong>CodeMirror</strong> <a href="http://codemirror.net/">http://codemirror.net/</a><br>
        A text editor in JavaScript. Very easy to use, yet extremely powerful.
        With little effort I could build custom syntax highlighting, and
        had error messages after the assembly process shown in the gutter.
      </div>
      <div>
        <strong>JISON</strong> <a href="https://zaach.github.io/jison/docs/">https://zaach.github.io/jison/docs/</a><br>
        Parser and scanner generator for JavaScript. It was very easy to adapt
        a prototype written in Bison/Flex to JISON.
      </div>
      <div>
        <strong>FileSaver.js</strong> <a href="https://github.com/eligrey/FileSaver.js/"></a><br>
        Allowed us to save generated JSON and Intel-hex files from within the
        browser.
      </div>
      <div>
        <strong>node.js</strong> <a href="http://nodejs.org">http://nodejs.org</a><br>
        Fantastic to have the same code work in the browser, and with the help
        of node.js also be able to use from the command-line.
      </div>
      <div>
        <strong>gulp.js</strong> <a href="http://gulpjs.com/">http://gulpjs.com/</a><br>
        Build system that made it very easy to in-line and compress JavaScript
        and CSS files, so that this tool is now a single HTML file.
      </div>
      <div>
        <strong>intel-hex</strong> <a href="https://github.com/bminer/intel-hex.js">https://github.com/bminer/intel-hex.js</a><br>
        Good starting point for parsing Intel-hex files. I made it
        browser-compatible and added the missing write functions.
      </div>
      <div>
        <strong>Simple JavaScript Templating</strong> <a href="http://ejohn.org/">http://ejohn.org/</a><br>
        As the name says: a very simple templating engine.
      </div>
      <div>
        <strong>DOM class manipulation</strong> <a href="http://www.openjs.com/scripts/dom/class_manipulation.php">http://www.openjs.com/scripts/dom/class_manipulation.php</a><br>
        Old, simple, effective methods for adding and removing class names to
        DOM elements.
      </div>
  </div>

  <div id="table_helper" style="visibility:hidden"></div>

  <!--
  This template is used by ui.js to build the table for master and slave
  LED configuration
  -->
  <script id="led_row_template" type="text/html-template">
    <tr class="led_config <%=even_odd%>" name="help_click_to_change">
      <th name="help_toggle_features"><%=led_number%> <span class="spanner"></span></th>
      <td></td> <td></td> <td></td> <td></td> <td></td> <td></td>
      <td></td> <td></td> <td></td> <td></td> <td></td> <td></td>
      <td></td> <td></td> <td></td>
    </tr>
    <tr class="led_features <%=even_odd%>">
      <td colspan="16">
        <table>
          <tbody>
            <tr name="help_incandescent">
              <td colspan="16">
                <div>
                  Incandescent light bulb simulation: <input type="number" min="0" max="100" class="incandescent"> % change per 20 ms
                </div>
              </td>
            </tr>
            <tr name="help_weak_ground">
              <td colspan="16">
                Weak ground simulation: <input type="number" min="0" max="100" class="weak_ground"> % reduction
              </td>
            </tr>
            <tr name="help_weak_ground">
              <td colspan="2"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
              <td><input type="checkbox" class="checkbox"></td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function(event) {
      if (typeof(parser) === 'undefined') {
        var el = document.getElementById('runtime-error');

        el.style.display = "block";
      }
    });
  </script>

</body>
</html>

